<!DOCTYPE html>
<html>
<head>
<title>lorenz</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
<meta charset=utf-8><meta name="application-name" content="lorenz">
<meta name="subject" content="Computing the lorenz attractor on the GPU">
<meta name="abstract" content="Computing the lorenz attractor on the GPU">
<meta name="twitter:title" content="lorenz">
<meta name="description" content="Computing the lorenz attractor on the GPU">
<meta name="twitter:description" content="Computing the lorenz attractor on the GPU">
<meta name="author" content="Ricky Reusser">
<meta name="twitter:creator" content="Ricky Reusser">
<meta name="twitter:image" content="https&colon;&sol;&sol;cdn&period;rawgit&period;com&sol;rreusser&sol;demos&sol;master&sol;lorenz&sol;screenshot&period;png">
<meta name="twitter:card" content="summary&lowbar;large&lowbar;image">
<meta itemprop="title" content="lorenz">
<meta itemprop="description" content="Computing the lorenz attractor on the GPU">
<meta itemprop="image" content="https&colon;&sol;&sol;cdn&period;rawgit&period;com&sol;rreusser&sol;demos&sol;master&sol;lorenz&sol;screenshot&period;png">
<meta property="og:title" content="lorenz">
<meta property="og:description" content="Computing the lorenz attractor on the GPU">
<meta property="article:author" content="Ricky Reusser">
<meta property="og:image" content="https&colon;&sol;&sol;cdn&period;rawgit&period;com&sol;rreusser&sol;demos&sol;master&sol;lorenz&sol;screenshot&period;png">
<style type="text/css">.github-corner{display:block;position:absolute;top:0;left:auto;right:0;z-index:10000}.github-corner svg{display:block}.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%{transform:rotate(0)}20%{transform:rotate(-25deg)}40%{transform:rotate(10deg)}60%{transform:rotate(-25deg)}80%{transform:rotate(10deg)}100%{transform:rotate(0)}}@media(max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style></head>
<body><a href="https://github.com/rreusser/demos/tree/master/lorenz" class="github-corner" aria-label="View source on Github"><svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 250 250" fill="#dedede">
  <path d="M0 0l115 115h15l12 27 108 108V0z" fill="#444"/>
  <path class="octo-arm" d="M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16" style="-webkit-transform-origin: 130px 106px; transform-origin: 130px 106px"/>
  <path class="octo-body" d="M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z"/>
</svg>
</a></body>
<script>
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';
document.body.classList.add('isInverted');
var canvas = document.createElement('canvas');
document.body.appendChild(canvas);
function setCanvasSize(el, width, height) {
    el.width = width;
    el.height = height;
    el.style.width = width ? width + 'px' : undefined;
    el.style.height = height ? height + 'px' : undefined;
}
setCanvasSize(canvas, screenWidth, screenHeight);
var fit = require('canvas-fit')(canvas);
window.addEventListener('resize', fit, false);
var screenWidth = canvas.width;
var screenHeight = canvas.height;
require('regl/dist/regl.min.js')({
    extensions: ['OES_texture_float'],
    pixelRatio: 1,
    canvas: canvas,
    onDone: function (err, regl) {
        if (!regl.hasExtension('OES_texture_float')) {
            return require('fail-nicely')('WebGL: "OES_texture_float" extension is not supported by the current WebGL context, try upgrading your system or a different browser');
        }
        if (err) {
            return require('fail-nicely')('WebGL: ', err);
        }
        run(regl);
    }
});
function run(regl) {
    var glslify = require('glslify');
    var gpgpu = require('../regl-cwise')(regl);
    var length = require('gl-vec3/length');
    var invert = require('gl-mat4/invert');
    var h = require('h');
    var hsv = require('hsv2rgb');
    var hex = require('rgb-hex');
    var css = require('insert-css');
    css('html, body {\n  background-color: black;\n  margin: 0;\n  padding: 0;\n  font-family: \'Arial\', sans-serif;\n  text-align: center;\n}\n\n.equations {\n  font-size: 0.8em;\n  opacity: 0.7;\n  text-align: right;\n  display: inline-block;\n  position: absolute;\n  top: 10px;\n  right: 65px;\n}\n\n.equation {\n  margin-bottom: 0.5em;\n  text-align: left;\n}\n\nbody.isInverted {\n  background-color: white;\n}\n\ncanvas {\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.controls-hidden .hidable {\n  display: none;\n}\n\n#equation {\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n\n.selector {\n  text-align: left;\n  z-index: 10;\n  position: absolute;\n  bottom: 0;\n  padding: 8px;\n}\n.selector button {\n  font-size: 0.9em;\n  font-style: italic;\n  cursor: pointer;\n  outline: none;\n  background: none;\n  border: none;\n  opacity: 0.5;\n}\n.selector button.selected {\n  opacity: 1.0;\n}\n.fields {\n  text-align: left;\n  font-size: 0.9em;\n  font-style: italic;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 100;\n  padding: 10px;\n}\n\n.field {\n  margin-bottom: 0.2em;\n  position: relative;\n}\n\n.field input[type=range] {\n  -webkit-appearance: none;\n  width: 200px;\n  height: 20px;\n  border: none;\n  vertical-align: middle;\n  cursor: ew-resize;\n  background: rgba(255, 255, 255, 0.1);\n}\n\nbody.isInverted .field input[type=range] {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n.field span {\n  vertical-align: middle;\n  margin-left: 10px;\n  position: absolute;\n  top: 4px;\n  right: 7px;\n  pointer-events: none;\n  opacity: 0.7;\n}\n\n.field input[type=range]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  width: 20px;\n  height: 20px;\n  cursor: ew-resize;\n  background-color: rgba(255, 255, 255, 0.2);\n}\n\nbody.isInverted .field input[type=range]::-webkit-slider-thumb {\n  background-color: rgba(0, 0, 0, 0.2);\n}\n\n.field input[type=range]:focus {\n  outline: none;\n}\n\n.field input[type=range]::-ms-track {\n  width: 200px;\n  cursor: pointer;\n  border: none;\n  height: 20px;\n  background: rgba(255, 255, 255, 0.1);\n  color: rgba(255, 255, 255, 0.2);\n}\n\nbody.isInverted .field input[type=range]::-ms-track {\n  background: rgba(0, 0, 0, 0.1);\n  color: rgba(0, 0, 0, 0.2);\n}\n\n.btn {\n  outline: none;\n  font-size: 1em;\n  cursor: pointer;\n  font-style: italic;\n  background: none;\n  border: none;\n  opacity: 0.7;\n  margin-left: 2px;\n  margin-right: 1em;\n  margin-top: 0.3em;\n  width: 70px;\n  text-align: center;\n}\n\n.bg-color {\n  background: rgba(255, 255, 255, 0.1);\n}\n\nbody.isInverted .bg-color {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n.fields input[type=text] {\n  border: none;\n  outline: none;\n  height: 1.4em;\n  line-height: 1.4em;\n  text-align: right;\n  width: 80px;\n  margin-left: 2px;\n  margin-top: 0.3em;\n}\n');
    css('.Scp {\n  width: 175px;\n  height: 150px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  position: relative;\n}\n.Scp-saturation {\n  position: relative;\n  width: calc(100% - 25px);\n  height: 100%;\n  background: -webkit-linear-gradient(left, #fff, #f00);\n  background: linear-gradient(to right, #fff, #f00);\n  float: left;\n  margin-right: 5px;\n}\n.Scp-brightness {\n  width: 100%;\n  height: 100%;\n  background: -webkit-linear-gradient(rgba(255,255,255,0), #000);\n  background: linear-gradient(rgba(255,255,255,0), #000);\n}\n.Scp-sbSelector {\n  border: 2px solid #fff;\n  position: absolute;\n  width: 14px;\n  height: 14px;\n  background: #fff;\n  border-radius: 10px;\n  top: -7px;\n  left: -7px;\n  box-sizing: border-box;\n  z-index: 10;\n}\n.Scp-hue {\n  width: 20px;\n  height: 100%;\n  position: relative;\n  float: left;\n  background: -webkit-linear-gradient(#f00 0%, #f0f 17%, #00f 34%, #0ff 50%, #0f0 67%, #ff0 84%, #f00 100%);\n  background: linear-gradient(#f00 0%, #f0f 17%, #00f 34%, #0ff 50%, #0f0 67%, #ff0 84%, #f00 100%);\n}\n.Scp-hSelector {\n  position: absolute;\n  background: #fff;\n  border-bottom: 1px solid #000;\n  right: -3px;\n  width: 10px;\n  height: 2px;\n}\n');
    var styleDiv = h('div#colorStyles');
    document.body.appendChild(styleDiv);
    css('@font-face{font-family:KaTeX_AMS;src:url(fonts/KaTeX_AMS-Regular.eot);src:url(fonts/KaTeX_AMS-Regular.eot#iefix) format(\'embedded-opentype\'),url(fonts/KaTeX_AMS-Regular.woff2) format(\'woff2\'),url(fonts/KaTeX_AMS-Regular.woff) format(\'woff\'),url(fonts/KaTeX_AMS-Regular.ttf) format(\'ttf\');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Caligraphic;src:url(fonts/KaTeX_Caligraphic-Bold.eot);src:url(fonts/KaTeX_Caligraphic-Bold.eot#iefix) format(\'embedded-opentype\'),url(fonts/KaTeX_Caligraphic-Bold.woff2) format(\'woff2\'),url(fonts/KaTeX_Caligraphic-Bold.woff) format(\'woff\'),url(fonts/KaTeX_Caligraphic-Bold.ttf) format(\'ttf\');font-weight:700;font-style:normal}@font-face{font-family:KaTeX_Caligraphic;src:url(fonts/KaTeX_Caligraphic-Regular.eot);src:url(fonts/KaTeX_Caligraphic-Regular.eot#iefix) format(\'embedded-opentype\'),url(fonts/KaTeX_Caligraphic-Regular.woff2) format(\'woff2\'),url(fonts/KaTeX_Caligraphic-Regular.woff) format(\'woff\'),url(fonts/KaTeX_Caligraphic-Regular.ttf) format(\'ttf\');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Fraktur;src:url(fonts/KaTeX_Fraktur-Bold.eot);src:url(fonts/KaTeX_Fraktur-Bold.eot#iefix) format(\'embedded-opentype\'),url(fonts/KaTeX_Fraktur-Bold.woff2) format(\'woff2\'),url(fonts/KaTeX_Fraktur-Bold.woff) format(\'woff\'),url(fonts/KaTeX_Fraktur-Bold.ttf) format(\'ttf\');font-weight:700;font-style:normal}@font-face{font-family:KaTeX_Fraktur;src:url(fonts/KaTeX_Fraktur-Regular.eot);src:url(fonts/KaTeX_Fraktur-Regular.eot#iefix) format(\'embedded-opentype\'),url(fonts/KaTeX_Fraktur-Regular.woff2) format(\'woff2\'),url(fonts/KaTeX_Fraktur-Regular.woff) format(\'woff\'),url(fonts/KaTeX_Fraktur-Regular.ttf) format(\'ttf\');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Main;src:url(fonts/KaTeX_Main-Bold.eot);src:url(fonts/KaTeX_Main-Bold.eot#iefix) format(\'embedded-opentype\'),url(fonts/KaTeX_Main-Bold.woff2) format(\'woff2\'),url(fonts/KaTeX_Main-Bold.woff) format(\'woff\'),url(fonts/KaTeX_Main-Bold.ttf) format(\'ttf\');font-weight:700;font-style:normal}@font-face{font-family:KaTeX_Main;src:url(fonts/KaTeX_Main-Italic.eot);src:url(fonts/KaTeX_Main-Italic.eot#iefix) format(\'embedded-opentype\'),url(fonts/KaTeX_Main-Italic.woff2) format(\'woff2\'),url(fonts/KaTeX_Main-Italic.woff) format(\'woff\'),url(fonts/KaTeX_Main-Italic.ttf) format(\'ttf\');font-weight:400;font-style:italic}@font-face{font-family:KaTeX_Main;src:url(fonts/KaTeX_Main-Regular.eot);src:url(fonts/KaTeX_Main-Regular.eot#iefix) format(\'embedded-opentype\'),url(fonts/KaTeX_Main-Regular.woff2) format(\'woff2\'),url(fonts/KaTeX_Main-Regular.woff) format(\'woff\'),url(fonts/KaTeX_Main-Regular.ttf) format(\'ttf\');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Math;src:url(fonts/KaTeX_Math-Italic.eot);src:url(fonts/KaTeX_Math-Italic.eot#iefix) format(\'embedded-opentype\'),url(fonts/KaTeX_Math-Italic.woff2) format(\'woff2\'),url(fonts/KaTeX_Math-Italic.woff) format(\'woff\'),url(fonts/KaTeX_Math-Italic.ttf) format(\'ttf\');font-weight:400;font-style:italic}@font-face{font-family:KaTeX_SansSerif;src:url(fonts/KaTeX_SansSerif-Regular.eot);src:url(fonts/KaTeX_SansSerif-Regular.eot#iefix) format(\'embedded-opentype\'),url(fonts/KaTeX_SansSerif-Regular.woff2) format(\'woff2\'),url(fonts/KaTeX_SansSerif-Regular.woff) format(\'woff\'),url(fonts/KaTeX_SansSerif-Regular.ttf) format(\'ttf\');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Script;src:url(fonts/KaTeX_Script-Regular.eot);src:url(fonts/KaTeX_Script-Regular.eot#iefix) format(\'embedded-opentype\'),url(fonts/KaTeX_Script-Regular.woff2) format(\'woff2\'),url(fonts/KaTeX_Script-Regular.woff) format(\'woff\'),url(fonts/KaTeX_Script-Regular.ttf) format(\'ttf\');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size1;src:url(fonts/KaTeX_Size1-Regular.eot);src:url(fonts/KaTeX_Size1-Regular.eot#iefix) format(\'embedded-opentype\'),url(fonts/KaTeX_Size1-Regular.woff2) format(\'woff2\'),url(fonts/KaTeX_Size1-Regular.woff) format(\'woff\'),url(fonts/KaTeX_Size1-Regular.ttf) format(\'ttf\');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size2;src:url(fonts/KaTeX_Size2-Regular.eot);src:url(fonts/KaTeX_Size2-Regular.eot#iefix) format(\'embedded-opentype\'),url(fonts/KaTeX_Size2-Regular.woff2) format(\'woff2\'),url(fonts/KaTeX_Size2-Regular.woff) format(\'woff\'),url(fonts/KaTeX_Size2-Regular.ttf) format(\'ttf\');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size3;src:url(fonts/KaTeX_Size3-Regular.eot);src:url(fonts/KaTeX_Size3-Regular.eot#iefix) format(\'embedded-opentype\'),url(fonts/KaTeX_Size3-Regular.woff2) format(\'woff2\'),url(fonts/KaTeX_Size3-Regular.woff) format(\'woff\'),url(fonts/KaTeX_Size3-Regular.ttf) format(\'ttf\');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size4;src:url(fonts/KaTeX_Size4-Regular.eot);src:url(fonts/KaTeX_Size4-Regular.eot#iefix) format(\'embedded-opentype\'),url(fonts/KaTeX_Size4-Regular.woff2) format(\'woff2\'),url(fonts/KaTeX_Size4-Regular.woff) format(\'woff\'),url(fonts/KaTeX_Size4-Regular.ttf) format(\'ttf\');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Typewriter;src:url(fonts/KaTeX_Typewriter-Regular.eot);src:url(fonts/KaTeX_Typewriter-Regular.eot#iefix) format(\'embedded-opentype\'),url(fonts/KaTeX_Typewriter-Regular.woff2) format(\'woff2\'),url(fonts/KaTeX_Typewriter-Regular.woff) format(\'woff\'),url(fonts/KaTeX_Typewriter-Regular.ttf) format(\'ttf\');font-weight:400;font-style:normal}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:inline-block;text-align:initial}.katex{font:400 1.21em KaTeX_Main;line-height:1.2;white-space:nowrap;text-indent:0}.katex .katex-html{display:inline-block}.katex .katex-mathml{position:absolute;clip:rect(1px,1px,1px,1px);padding:0;border:0;height:1px;width:1px;overflow:hidden}.katex .base,.katex .strut{display:inline-block}.katex .mathit{font-family:KaTeX_Math;font-style:italic}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .amsrm,.katex .mathbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak{font-family:KaTeX_Fraktur}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr{font-family:KaTeX_Script}.katex .mathsf{font-family:KaTeX_SansSerif}.katex .mainit{font-family:KaTeX_Main;font-style:italic}.katex .textstyle>.mord+.mop{margin-left:.16667em}.katex .textstyle>.mord+.mbin{margin-left:.22222em}.katex .textstyle>.mord+.mrel{margin-left:.27778em}.katex .textstyle>.mop+.mop,.katex .textstyle>.mop+.mord,.katex .textstyle>.mord+.minner{margin-left:.16667em}.katex .textstyle>.mop+.mrel{margin-left:.27778em}.katex .textstyle>.mop+.minner{margin-left:.16667em}.katex .textstyle>.mbin+.minner,.katex .textstyle>.mbin+.mop,.katex .textstyle>.mbin+.mopen,.katex .textstyle>.mbin+.mord{margin-left:.22222em}.katex .textstyle>.mrel+.minner,.katex .textstyle>.mrel+.mop,.katex .textstyle>.mrel+.mopen,.katex .textstyle>.mrel+.mord{margin-left:.27778em}.katex .textstyle>.mclose+.mop{margin-left:.16667em}.katex .textstyle>.mclose+.mbin{margin-left:.22222em}.katex .textstyle>.mclose+.mrel{margin-left:.27778em}.katex .textstyle>.mclose+.minner,.katex .textstyle>.minner+.mop,.katex .textstyle>.minner+.mord,.katex .textstyle>.mpunct+.mclose,.katex .textstyle>.mpunct+.minner,.katex .textstyle>.mpunct+.mop,.katex .textstyle>.mpunct+.mopen,.katex .textstyle>.mpunct+.mord,.katex .textstyle>.mpunct+.mpunct,.katex .textstyle>.mpunct+.mrel{margin-left:.16667em}.katex .textstyle>.minner+.mbin{margin-left:.22222em}.katex .textstyle>.minner+.mrel{margin-left:.27778em}.katex .mclose+.mop,.katex .minner+.mop,.katex .mop+.mop,.katex .mop+.mord,.katex .mord+.mop,.katex .textstyle>.minner+.minner,.katex .textstyle>.minner+.mopen,.katex .textstyle>.minner+.mpunct{margin-left:.16667em}.katex .reset-textstyle.textstyle{font-size:1em}.katex .reset-textstyle.scriptstyle{font-size:.7em}.katex .reset-textstyle.scriptscriptstyle{font-size:.5em}.katex .reset-scriptstyle.textstyle{font-size:1.42857em}.katex .reset-scriptstyle.scriptstyle{font-size:1em}.katex .reset-scriptstyle.scriptscriptstyle{font-size:.71429em}.katex .reset-scriptscriptstyle.textstyle{font-size:2em}.katex .reset-scriptscriptstyle.scriptstyle{font-size:1.4em}.katex .reset-scriptscriptstyle.scriptscriptstyle{font-size:1em}.katex .style-wrap{position:relative}.katex .vlist{display:inline-block}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist .baseline-fix{display:inline-table;table-layout:fixed}.katex .msupsub{text-align:left}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{width:100%}.katex .mfrac .frac-line:before{border-bottom-style:solid;border-bottom-width:1px;content:"";display:block}.katex .mfrac .frac-line:after{border-bottom-style:solid;border-bottom-width:.04em;content:"";display:block;margin-top:-1px}.katex .mspace{display:inline-block}.katex .mspace.negativethinspace{margin-left:-.16667em}.katex .mspace.thinspace{width:.16667em}.katex .mspace.mediumspace{width:.22222em}.katex .mspace.thickspace{width:.27778em}.katex .mspace.enspace{width:.5em}.katex .mspace.quad{width:1em}.katex .mspace.qquad{width:2em}.katex .llap,.katex .rlap{width:0;position:relative}.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{right:0}.katex .rlap>.inner{left:0}.katex .katex-logo .a{font-size:.75em;margin-left:-.32em;position:relative;top:-.2em}.katex .katex-logo .t{margin-left:-.23em}.katex .katex-logo .e{margin-left:-.1667em;position:relative;top:.2155em}.katex .katex-logo .x{margin-left:-.125em}.katex .rule{display:inline-block;border:0 solid;position:relative}.katex .overline .overline-line,.katex .underline .underline-line{width:100%}.katex .overline .overline-line:before,.katex .underline .underline-line:before{border-bottom-style:solid;border-bottom-width:1px;content:"";display:block}.katex .overline .overline-line:after,.katex .underline .underline-line:after{border-bottom-style:solid;border-bottom-width:.04em;content:"";display:block;margin-top:-1px}.katex .sqrt>.sqrt-sign{position:relative}.katex .sqrt .sqrt-line{width:100%}.katex .sqrt .sqrt-line:before{border-bottom-style:solid;border-bottom-width:1px;content:"";display:block}.katex .sqrt .sqrt-line:after{border-bottom-style:solid;border-bottom-width:.04em;content:"";display:block;margin-top:-1px}.katex .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.katex .fontsize-ensurer,.katex .sizing{display:inline-block}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:2em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:3.46em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:4.14em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.98em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.71428571em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.14285714em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.28571429em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.42857143em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.71428571em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2.05714286em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.47142857em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.95714286em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.55714286em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.875em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.125em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.25em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.5em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.8em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.1625em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.5875em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:3.1125em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.55555556em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.77777778em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.88888889em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.11111111em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.6em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.92222222em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.3em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.76666667em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.7em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.8em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.9em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.2em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.44em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.73em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:2.07em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.49em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.41666667em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.58333333em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.66666667em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.75em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.83333333em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44166667em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.725em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.075em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.34722222em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.48611111em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.55555556em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.625em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.69444444em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.83333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.20138889em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.4375em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.72916667em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.28901734em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.40462428em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.46242775em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.52023121em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.57803468em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.69364162em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.83236994em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.19653179em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.43930636em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.24154589em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.33816425em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.38647343em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.43478261em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.48309179em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.57971014em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.69565217em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.83574879em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.20289855em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.20080321em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.2811245em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.32128514em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.36144578em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.40160643em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.48192771em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.57831325em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.69477912em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.8313253em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .accent>.vlist>span,.katex .op-limits>.vlist>span{text-align:center}.katex .accent .accent-body>span{width:0}.katex .accent .accent-body.accent-vec>span{position:relative;left:.326em}.katex .mtable .vertical-separator{display:inline-block;margin:0 -.025em;border-right:.05em solid #000}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist{text-align:center}.katex .mtable .col-align-l>.vlist{text-align:left}.katex .mtable .col-align-r>.vlist{text-align:right}');
    var doCapture = false;
    var needsStop = false;
    var mbframes = 1;
    var CCapture = require('ccapture.js');
    var capturer;
    var katex = require('katex');
    var dxdt = h('div.equation', { class: 'fg-color equation' });
    var dydt = h('div.equation', { class: 'fg-color equation' });
    var dzdt = h('div.equation', { class: 'fg-color equation' });
    var eqn = h('div.equations.hidable', [
        dxdt,
        dydt,
        dzdt
    ]);
    document.body.appendChild(eqn);
    function makeEqn(letter, value) {
        return '\\frac{d' + letter + '}{dt} = ' + value;
    }
    function setEqns(name) {
        var parts = eqns[name];
        katex.render(makeEqn('x', parts[0]), dxdt);
        katex.render(makeEqn('y', parts[1]), dydt);
        katex.render(makeEqn('z', parts[2]), dzdt);
    }
    var captureBtn = h('button#capture', 'Capture', { class: 'fg-color btn bg-color' });
    captureBtn.addEventListener('click', function () {
        doCapture = true;
        mbframes = 8;
        capturer = new CCapture({
            format: 'jpg',
            verbose: false,
            framerate: 60,
            motionBlurFrames: mbframes
        });
        capturer.start();
        var stopBtn = h('button#capture', 'Stop', { class: 'fg-color btn bg-color' });
        window.removeEventListener('resize', fit);
        var dims = captureDims.value.match(/^([0-9]*)\s*x\s*([0-9]*)$/);
        if (dims) {
            screenWidth = parseInt(dims[1]);
            screenHeight = parseInt(dims[2]);
        } else {
            screenWidth = 540;
            screenHeight = 540;
        }
        canvas.width = screenWidth;
        canvas.height = screenHeight;
        canvas.style.width = screenWidth + 'px';
        canvas.style.height = screenHeight + 'px';
        setScreenbuffer(screenWidth, screenHeight);
        stopBtn.addEventListener('click', function () {
            mbframes = 1;
            needsStop = true;
            fit();
            setScreenbuffer(canvas.width, canvas.height);
            window.addEventListener('resize', fit, false);
            captureField.removeChild(stopBtn);
            captureField.removeChild(captureDims);
        });
        captureField.replaceChild(stopBtn, captureBtn);
    });
    var attractors = {
        lorenz: attractor('\n      10.0 * (y - x),\n      x * (28.0 - z) - y,\n      x * y - 8.0 /  3.0 * z\n    '),
        lorenzmod1: attractor('\n      -0.1 * x + y * y - z * z + 0.1 * 14.0,\n      x * (y - 4.0 * z) + 0.08,\n      z + x * (4.0 * y + z)\n    ', {
            dt: 0.5,
            shift: 28,
            scale: 0.5
        }),
        lorenzmod2: attractor('\n      -0.9 * x + y * y - z * z + 0.9 * 9.9,\n      x * (y - 5.0 * z) + 1.0,\n      -z + x * (5.0 * y + z)\n    ', {
            dt: 0.3,
            shift: 28,
            scale: 1,
            clip: 1000
        }),
        rossler: attractor('\n      28.0 - z - y,\n      x + 0.1 * y,\n      0.1 + (z - 28.0) * (x - 14.0)\n    ', { dt: 4 }),
        chua: attractor('\n        40.0 * (y - x),\n        -12.0 * x - x * z + 28.0 * y,\n        x * y - 3.0 * z\n    ', {
            dt: 0.3,
            zscale: 1.5
        }),
        arneodo: attractor('\n      y,\n      z,\n      5.5 * x - 3.5 * y - z - x * x * x\n    ', {
            dt: 2,
            shift: 28,
            clip: 1000,
            scale: 3
        }),
        chenlee: attractor('\n      5.0 * x - y * z,\n      -10.0 * y + x * z,\n      -0.38 * z + x * y / 3.0\n    ', { shift: 28 }),
        coullet: attractor('\n      y,\n      z,\n      0.8 * x - 1.1 * y - 0.45 * z - x * x * x\n    ', {
            dt: 4,
            shift: 28,
            scale: 10,
            clip: 1000
        }),
        dadras: attractor('\n      y - 3.0 * x + 2.7 * y * z,\n      1.7 * y - x * z + z,\n      2.0 * x * y - 9.0 * z\n    ', {
            dt: 1,
            shift: 28,
            scale: 2
        }),
        thomas: attractor('\n      -0.19 * x + sin(y),\n      -0.19 * y + sin(z),\n      -0.19 * z + sin(x)\n    ', {
            dt: 8,
            shift: 28,
            scale: 5
        }),
        tsucs1: attractor('\n      40.0 * (y - x) + 0.5 * x * z,\n      20.0 * y - x * z,\n      0.833 * z + x * y - 0.65 * x * x\n    ', {
            dt: 0.25,
            shift: 10,
            scale: 0.5,
            clip: 1000
        }),
        tsucs2: attractor('\n      40.0 * (y - x) + 0.16 * x * z,\n      55.0 * x - x * z + 20.0 * y,\n      1.833 * z + x * y - 0.65 * x * x\n    ', {
            dt: 0.1,
            shift: 12,
            scale: 0.15
        }),
        aizawa: attractor('\n      (z - 0.7) * x - 3.5 * y,\n      3.5 * x + (z - 0.7) * y,\n      0.6 + 0.95 * z - (z * z * z / 3.0) - (x * x + y * y) * (1.0 + 0.25 * z) + 0.1 * z * (x * x * x)\n    ', {
            dt: 1.5,
            shift: 20,
            scale: 15,
            clip: 1000
        }),
        nosehoover: attractor('\n      y,\n      -x + y * z,\n      1.5 - y * y\n    ', {
            dt: 4,
            shift: 28,
            scale: 6
        }),
        yuwang: attractor('\n      10.0 * (y - x),\n      40.0 * x - 2.0 * x * z,\n      exp(x * y) - 2.5 * z\n    ', {
            dt: 0.3,
            scale: 6,
            clip: 1000,
            zscale: 0.25,
            shift: -5
        }),
        fourwing: attractor('\n      0.2 * x + y * z,\n      -0.01 * x - 0.4 * y - x * z,\n      -z - x * y\n    ', {
            dt: 4,
            shift: 28,
            scale: 10
        }),
        liuchen: attractor('\n      0.4 * x - y * z,\n      -12.0 * y + x * z,\n      -5.0 * z + x * y\n    ', {
            dt: 2,
            shift: 28,
            scale: 2,
            clip: 1000
        }),
        genesiotesi: attractor('\n      y,\n      z,\n      -x - 1.1 * y - 0.44 * z + x * x\n    ', {
            dt: 4,
            shift: 28,
            scale: 30,
            clip: 100
        }),
        newtonleipnik: attractor('\n      0.4 * x + y + 10.0 * y * z,\n      -x - 0.4 * y + 5.0 * x * z,\n      0.175 * z - 5.0 * x * y\n    ', {
            dt: 0.05,
            shift: 28,
            scale: 0.5,
            clip: 1000
        }),
        luchen: attractor('\n      -4.0 * x + z * y,\n      -10.0 * y + z * x,\n      (10.0 * 4.0 * z) / 14.0 - y * x + 18.1\n    ', {
            dt: 0.5,
            shift: 23,
            scale: 1.3
        }),
        dequanli: attractor('\n      40.0 * (y - x) + 0.16 * x * z,\n      55.0 * x + 20.0 * y - x * z,\n      1.833 * z + x * y - 0.65 * x * x\n    ', {
            dt: 0.1,
            shift: 2,
            clip: 1000,
            scale: 0.2
        }),
        halvorsen: attractor('\n      -1.4 * x - 4.0 * (y + z) - y * y,\n      -1.4 * y - 4.0 * (z + x) - z * z,\n      -1.4 * z - 4.0 * (x + y) - x * x\n    ', {
            dt: 0.5,
            shift: 28,
            clip: 1000,
            scale: 2
        }),
        rucklidge: attractor('\n      -2.0 * x + 6.7 * y - y * z,\n      x,\n      -z + y * y\n    ', {
            dt: 4,
            shift: 10,
            clip: 1000,
            scale: 3
        }),
        hadley: attractor('\n      4.0 * z * y + z * x - x,\n      z * y - 4.0 * z * x - y + 1.0,\n      -y * y - x * x - 0.2 * z + 0.2 * 8.0\n    ', {
            shift: 15,
            scale: 10
        }),
        wangsun: attractor('\n      x * 0.2 + y * z,\n      -0.01 * x + -0.4 * y - x * z,\n      -z - x * y\n    ', {
            dt: 6,
            shift: 28,
            scale: 15
        }),
        sakarya: attractor('\n      -x + y + y * z,\n      -x - y + 0.4 * x * z,\n      z - 0.3 * x * y\n    ', {
            dt: 1,
            shift: 22,
            scale: 1
        }),
        burkeshaw: attractor('\n      -10.0 * (x + y),\n      -y - 10.0 * x * z,\n      10.0 * x * y + 4.272\n    ', {
            dt: 0.5,
            shift: 28,
            clip: 100,
            scale: 5
        }),
        bouali: attractor('\n      x * (4.0 - y) + 0.3 * z,\n      -y * (1.0 - x * x),\n      -x * (1.5 - z) - 0.05 * z\n    ', {
            dt: 1,
            shift: 28,
            scale: 2,
            clip: 100,
            scale: 1
        }),
        qichen: attractor('\n      38.0 * (y - x) + y * z,\n      80.0 * x + y - x * z,\n      x * y - 8.0 / 3.0 * z\n    ', {
            dt: 0.2,
            shift: -50,
            clip: 10000,
            scale: 0.5,
            zscale: 2
        }),
        finance: attractor('\n      y - 1.1 * x,\n      (5.0 - 0.001) * y - x - y * z,\n      -0.2 * z + y * y\n    ', {
            dt: 5,
            shift: -12,
            scale: 10
        }),
        rayleighbenard: attractor('\n      -9.0 * x + 9.0 * y,\n      12.0 * x - y - x * z,\n      x * y - 0.5 * z\n    ', {
            dt: 2,
            shift: 5,
            clip: 10000,
            scale: 2
        })
    };
    var eqns = {
        lorenz: [
            '10 (y - x)',
            '(28 - z) x - y',
            'x y - \\frac{8}{3} z'
        ],
        lorenzmod1: [
            '-0.1 x + y^2 - z^2 + 0.14',
            'x (y - 4 z) + 0.08',
            'z + x (4 y + z)'
        ],
        lorenzmod2: [
            '-0.9 x + y^2 - z^2 + 8.91',
            'x (y - 5 z) + 1',
            '-z + x (5 y + z)'
        ],
        rossler: [
            '28 - z - y',
            'x + 0.1 y',
            '0.1 + (z - 28) (x - 14)'
        ],
        chua: [
            '40 (y - x)',
            '-12 x - x z + 28 y',
            'x y - 3 z'
        ],
        arneodo: [
            'y',
            'z',
            '5.5 x - 3.5 y - z - x^3'
        ],
        chenlee: [
            '5 x - y z',
            '-10 y + x z',
            '-0.38 z + \\frac{1}{3} x y'
        ],
        coullet: [
            'y',
            'z',
            '0.8 x - 1.1 y - 0.45 z - x^3'
        ],
        dadras: [
            'y - 3 x + 2.7 y z',
            '1.7 y - x z + z',
            '2 x y - 9 z'
        ],
        thomas: [
            '-0.19 x + \\sin(y)',
            '-0.19 y + \\sin(z)',
            '-0.19 z + \\sin(x)'
        ],
        tsucs1: [
            '40 (y - x) + 0.5 x z',
            '20 y - x z',
            '0.833 z + x y - 0.65 x^2'
        ],
        tsucs2: [
            '40 (y - x) + 0.16 x z',
            '55 x - x z + 20 y',
            '1.833 z + x y - 0.65 x^2'
        ],
        aizawa: [
            '(z - 0.7) x - 3.5 y',
            '3.5 x + (z - 0.7) y',
            '0.6 + 0.95 z - \\frac{1}{3}z^3 - (x^2 + y^2) (1 + 0.25 z) + 0.1 z x^3'
        ],
        nosehoover: [
            'y',
            '-x + y z',
            '1.5 - y^2'
        ],
        yuwang: [
            '10 (y - x)',
            '40 x - 2 x z',
            'e^{x y} - 2.5 z'
        ],
        fourwing: [
            '0.2 x + y z',
            '-0.01 x - 0.4 y - x z',
            '-z - x y'
        ],
        liuchen: [
            '0.4 x - y z',
            '-12 y + x z',
            '-5 z + x y'
        ],
        genesiotesi: [
            'y',
            'z',
            '-x - 1.1 y - 0.44 z + x^2'
        ],
        newtonleipnik: [
            '0.4 x + y + 10 y z',
            '-x - 0.4 y + 5 x z',
            '0.175 z - 5 x y'
        ],
        luchen: [
            '-4 x + z y',
            '-10 y + z x',
            '\\frac{20}{7} z - y x + 18.1'
        ],
        dequanli: [
            '40 (y - x) + 0.16 x z',
            '55 x + 20 y - x z',
            '1.833 z + x y - 0.65 x^2'
        ],
        halvorsen: [
            '-1.4 x - 4 (y + z) - y^2',
            '-1.4 y - 4 (z + x) - z^2',
            '-1.4 z - 4 (x + y) - x^2'
        ],
        rucklidge: [
            '-2 x + 6.7 y - y z',
            'x',
            '-z + y^2'
        ],
        hadley: [
            '4 z y + z x - x',
            'z y - 4 z x - y + 1',
            '-y^2 - x x - 0.2 z + 0.16'
        ],
        wangsun: [
            '0.2 x + y z',
            '-0.01 x + -0.4 y - x z',
            '-z - x y'
        ],
        sakarya: [
            '-x + y + y z',
            '-x - y + 0.4 x z',
            'z - 0.3 x y'
        ],
        burkeshaw: [
            '-10 (x + y)',
            '-y - 10 x z',
            '10.0 x y + 4.272'
        ],
        bouali: [
            'x (4 - y) + 0.3 z',
            '-y (1 - x^2)',
            '-x (1.5 - z) - 0.05 z'
        ],
        qichen: [
            '38 (y - x) + y z',
            '80 x + y - x z',
            'x y - \\frac{8}{3}z'
        ],
        finance: [
            'y - 1.1 x',
            '4.999 y - x - y z',
            '-0.2 z + y^2'
        ],
        rayleighbenard: [
            '-9.0 x + 9.0 y',
            '12.0 x - y - x z',
            'x y - 0.5 z'
        ]
    };
    var attractorLabels = {
        aizawa: 'Aizawa',
        arneodo: 'Arneodo',
        bouali: 'Bouali',
        burkeshaw: 'Burke-Shaw',
        chua: 'Chua',
        chenlee: 'Chen-Lee',
        coullet: 'Coullet',
        dadras: 'Dadras',
        finance: 'Finance',
        fourwing: 'Four-Wing',
        genesiotesi: 'Genesio-Tesi',
        hadley: 'Hadley',
        halvorsen: 'Halvorsen',
        dequanli: 'Dequan-Li',
        lorenz: 'Lorenz',
        lorenzmod1: 'Lorenz Mod 1',
        lorenzmod2: 'Lorenz Mod 2',
        liuchen: 'Liu-Chen',
        luchen: 'Lü-Chen',
        newtonleipnik: 'Newton-Leipnik',
        nosehoover: 'Nose-Hoover',
        qichen: 'Qi-Chen',
        thomas: 'Thomas',
        tsucs1: 'TSUCS1',
        tsucs2: 'TSUCS2',
        rayleighbenard: 'Rayleigh-Benard',
        rossler: 'Rössler',
        rucklidge: 'Rucklidge',
        sakarya: 'Sakarya',
        wangsun: 'Wang-Sun',
        yuwang: 'Yu-Wang'
    };
    var fg, bg;
    var hb = 180;
    var hf = 100;
    var sat = 0.3;
    var bgIntensity = 0.1;
    var isInverted = true;
    var randomizeColors = function () {
        var cf = void 0, cb = void 0, lhf = void 0, lhb = void 0;
        if (isInverted) {
            lhf = (hf + 180) % 360;
            lhb = (hb + 180) % 360;
        } else {
            lhf = hf;
            lhb = hb;
        }
        cf = hsv(lhf, sat, 1);
        cb = hsv(lhb, 0.1, bgIntensity);
        if (isInverted) {
            cf = cf.map(function (i) {
                return 255 - i;
            });
            cb = cb.map(function (i) {
                return 255 - i;
            });
        }
        fg = cf.map(function (i) {
            return i / 255;
        });
        bg = cb.map(function (i) {
            return i / 255;
        });
        var htmlfg = hsv(lhf, Math.min(0.3, sat), 1);
        if (isInverted) {
            htmlfg = htmlfg.map(function (i) {
                return 255 - i;
            });
        }
        var s = styleDiv.querySelector('style');
        if (s)
            styleDiv.removeChild(s);
        styleDiv.appendChild(h('style', { type: 'text/css' }, '\n      .selector button, .fg-color { color: #' + hex.apply(null, htmlfg) + '; }\n    '));
        if (isInverted) {
            document.body.classList.add('isInverted');
        } else {
            document.body.classList.remove('isInverted');
        }
    };
    randomizeColors();
    var selectedAttractor = /^#/.test(window.location.hash || '') ? window.location.hash.substr(1) : 'lorenz';
    setEqns(selectedAttractor);
    var btns = Object.keys(attractorLabels).map(function (name) {
        return h('button', {
            'data-attractor': name,
            class: name === selectedAttractor ? 'selected' : ''
        }, attractorLabels[name]);
    });
    document.body.appendChild(h('div.selector.hidable', btns));
    btns.forEach(function (btn) {
        return btn.addEventListener('click', function () {
            btns.forEach(function (b) {
                return b === btn ? b.classList.add('selected') : b.classList.remove('selected');
            });
            selectedAttractor = btn.getAttribute('data-attractor');
            setEqns(selectedAttractor);
            window.location.hash = selectedAttractor;
            randomizeColors();
        });
    });
    var numberRange = h('input', {
        type: 'range',
        min: 1,
        max: 100,
        value: 60
    });
    var numberOutput = h('span');
    var numberField = h('div.field.fg-color', [
        numberRange,
        numberOutput
    ]);
    numberRange.addEventListener('input', setNumber);
    numberRange.addEventListener('mousemove', function (e) {
        return e.stopPropagation();
    });
    function setNumber() {
        var min = parseInt(numberRange.getAttribute('min'));
        var max = parseInt(numberRange.getAttribute('max'));
        var interp = (parseInt(numberRange.value) - min) / (max - min);
        var number = Math.pow(10, 4 + interp * 3);
        var newside = Math.floor(Math.sqrt(number));
        if (newside === side)
            return;
        side = newside;
        shape[0] = shape[1] = side;
        n = shape[0] * shape[1];
        numberOutput.textContent = 'Particles: ' + n;
        if (args[0])
            args[0].destroy();
        if (args[1])
            args[1].destroy();
        args[0] = gpgpu.array(null, shape);
        args[1] = gpgpu.array(function (i, j) {
            var vec;
            do {
                var vec = [
                    Math.random(),
                    Math.random(),
                    Math.random()
                ].map(function (i) {
                    return i * 2 - 1;
                });
            } while (length(vec) > 1);
            vec = vec.map(function (x) {
                return x * 0.3;
            });
            vec[2] += 28;
            vec[3] = 1;
            return vec;
        }, shape);
        if (uv)
            uv.destroy();
        uv = args[0].samplerCoords();
    }
    var screenbufferProxy;
    function setScreenbuffer(w, h) {
        if (screenbufferProxy && screenbufferProxy.destroy) {
            screenbufferProxy.destroy();
        }
        canvas.style.width = w;
        canvas.style.height = h;
        screenbufferProxy = gpgpu.array(null, [
            w,
            h,
            4
        ]);
    }
    setScreenbuffer(screenWidth, screenHeight);
    window.addEventListener('resize', function () {
        screenWidth = canvas.width;
        screenHeight = canvas.height;
        setScreenbuffer(screenWidth, screenHeight);
    });
    var dtOutput = h('span');
    var dtRange = h('input', {
        type: 'range',
        min: 1,
        max: 100,
        value: 25
    });
    var dtField = h('div.field.fg-color', [
        dtRange,
        dtOutput
    ]);
    dtRange.addEventListener('input', setDt);
    dtRange.addEventListener('mousemove', function (e) {
        return e.stopPropagation();
    });
    function setDt() {
        var min = parseInt(dtRange.getAttribute('min'));
        var max = parseInt(dtRange.getAttribute('max'));
        var interp = (parseInt(dtRange.value) - min) / (max - min);
        dt0 = 0.0001 + 0.0399 * interp;
        dtOutput.textContent = '\u2206t: ' + dt0.toFixed(4);
    }
    setDt();
    var hueOutput = h('span');
    var hueRange = h('input', {
        type: 'range',
        min: 0,
        max: 360,
        value: 100
    });
    var hueField = h('div.field.fg-color', [
        hueRange,
        hueOutput
    ]);
    hueRange.addEventListener('input', setHue);
    hueRange.addEventListener('mousemove', function (e) {
        return e.stopPropagation();
    });
    function setHue() {
        var min = parseInt(hueRange.getAttribute('min'));
        var max = parseInt(hueRange.getAttribute('max'));
        var interp = (parseInt(hueRange.value) - min) / (max - min);
        hf = 360 * interp;
        hb = (hf + 180) % 180;
        hueOutput.textContent = 'Hue: ' + hf.toFixed(0);
        randomizeColors();
    }
    setHue();
    var satOutput = h('span');
    var satRange = h('input', {
        type: 'range',
        min: 0,
        max: 100,
        value: 30
    });
    var satField = h('div.field.fg-color', [
        satRange,
        satOutput
    ]);
    satRange.addEventListener('input', setSat);
    satRange.addEventListener('mousemove', function (e) {
        return e.stopPropagation();
    });
    function setSat() {
        var min = parseInt(satRange.getAttribute('min'));
        var max = parseInt(satRange.getAttribute('max'));
        var interp = (parseInt(satRange.value) - min) / (max - min);
        sat = interp;
        satOutput.textContent = 'Saturation: ' + sat.toFixed(2);
        randomizeColors();
    }
    setSat();
    var exposureOutput = h('span');
    var exposureRange = h('input', {
        type: 'range',
        min: 0,
        max: 101,
        value: 20
    });
    var exposureField = h('div.field.fg-color', [
        exposureRange,
        exposureOutput
    ]);
    exposureRange.addEventListener('input', setExposure);
    exposureRange.addEventListener('mousemove', function (e) {
        return e.stopPropagation();
    });
    function setExposure() {
        var min = parseInt(exposureRange.getAttribute('min'));
        var max = parseInt(exposureRange.getAttribute('max'));
        var interp = (parseInt(exposureRange.value) - min) / (max - min);
        exposure = interp;
        exposureOutput.textContent = 'Density: ' + exposure.toFixed(2);
        randomizeColors();
    }
    setExposure();
    var gammaOutput = h('span');
    var gammaRange = h('input', {
        type: 'range',
        min: 0,
        max: 100,
        value: 50
    });
    var gammaField = h('div.field.fg-color', [
        gammaRange,
        gammaOutput
    ]);
    gammaRange.addEventListener('input', setGamma);
    gammaRange.addEventListener('mousemove', function (e) {
        return e.stopPropagation();
    });
    function setGamma() {
        var min = parseInt(gammaRange.getAttribute('min'));
        var max = parseInt(gammaRange.getAttribute('max'));
        var interp = (parseInt(gammaRange.value) - min) / (max - min);
        gamma = 0.01 + 3.99 * interp;
        gammaOutput.textContent = 'Gamma: ' + gamma.toFixed(2);
        randomizeColors();
    }
    setGamma();
    var bgOutput = h('span');
    var bgRange = h('input', {
        type: 'range',
        min: 0,
        max: 100,
        value: 1
    });
    var bgField = h('div.field.fg-color', [
        bgRange,
        bgOutput
    ]);
    bgRange.addEventListener('input', setBackground);
    bgRange.addEventListener('mousemove', function (e) {
        return e.stopPropagation();
    });
    function setBackground() {
        var min = parseInt(bgRange.getAttribute('min'));
        var max = parseInt(bgRange.getAttribute('max'));
        var interp = (parseInt(bgRange.value) - min) / (max - min);
        bgIntensity = 0.01 + 0.99 * interp;
        bgOutput.textContent = 'Background: ' + bgIntensity.toFixed(2);
        randomizeColors();
    }
    setBackground();
    var rotation = 0;
    var rotationOutput = h('span');
    var rotationRange = h('input', {
        type: 'range',
        min: 0,
        max: 1000,
        value: 500
    });
    var rotationField = h('div.field.fg-color', [
        rotationRange,
        rotationOutput
    ]);
    rotationRange.addEventListener('input', setRotation);
    rotationRange.addEventListener('mousemove', function (e) {
        return e.stopPropagation();
    });
    function setRotation() {
        var min = parseInt(rotationRange.getAttribute('min'));
        var max = parseInt(rotationRange.getAttribute('max'));
        var interp = (parseInt(rotationRange.value) - min) / (max - min);
        rotation = 4 * (interp * 2 - 1);
        rotationOutput.textContent = 'Rotation: ' + rotation.toFixed(2);
        randomizeColors();
    }
    setRotation();
    var invertBtn = h('button', 'Invert', { class: 'fg-color btn bg-color' });
    var invertField = h('div.field.fg-color', [invertBtn]);
    invertField.addEventListener('click', function () {
        isInverted = !isInverted;
        randomizeColors();
    });
    var showHideBtn = h('button', 'Hide', { class: 'fg-color btn bg-color' });
    var showHideField = h('div.field.fg-color', [showHideBtn]);
    var controlsVisible = true;
    showHideBtn.addEventListener('click', function () {
        controlsVisible = !controlsVisible;
        if (controlsVisible) {
            document.body.classList.remove('controls-hidden');
            showHideBtn.textContent = 'Hide';
        } else {
            document.body.classList.add('controls-hidden');
            showHideBtn.textContent = 'Show';
        }
    });
    var captureDims = h('input', {
        type: 'text',
        value: '540x540',
        class: 'bg-color fg-color'
    });
    var captureField = h('div.field', [
        captureBtn,
        captureDims
    ]);
    var fields = h('div.fields', [
        showHideField,
        h('div.hidable', [
            numberField,
            dtField,
            hueField,
            satField,
            exposureField,
            gammaField,
            bgField,
            rotationField,
            invertField,
            captureField
        ])
    ]);
    document.body.appendChild(fields);
    fields.addEventListener('mousedown', function (e) {
        return e.stopPropagation();
    });
    fields.addEventListener('mouseup', function (e) {
        return e.stopPropagation();
    });
    fields.addEventListener('mousemove', function (e) {
        return e.stopPropagation();
    });
    fields.addEventListener('click', function (e) {
        return e.stopPropagation();
    });
    var side = 600;
    var shape = [
        side,
        side,
        4
    ];
    var n = shape[0] * shape[1];
    var args = [
        null,
        null,
        0.01
    ];
    setNumber();
    var uv = args[0].samplerCoords();
    function attractor(op, opts) {
        opts = opts || {};
        opts.dt = opts.dt || 1;
        return gpgpu.map({
            args: [
                'array',
                'scalar'
            ],
            permute: [
                1,
                0,
                2
            ],
            body: '\n        vec3 deriv (float x, float y, float z) {\n          return vec3(' + op + ');\n        }\n        vec4 compute (vec4 y, float dt) {\n          ' + (opts.shift ? 'y.z -= ' + opts.shift.toFixed(2) + ';' : '') + '\n          ' + (opts.scale ? 'y.xyz *= ' + (1 / opts.scale).toFixed(10) + ';' : '') + '\n          ' + (opts.zscale ? 'y.z *= ' + (1 / opts.zscale).toFixed(10) + ';' : '') + '\n          vec3 yh = y.xyz + ' + (opts.dt * 0.5).toFixed(2) + ' * dt * deriv(y.x, y.y, y.z);\n          y.xyz = y.xyz + ' + opts.dt.toFixed(2) + ' * dt * deriv(yh.x, yh.y, yh.z);\n          ' + (opts.zscale ? 'y.z *= ' + opts.zscale.toFixed(10) + ';' : '') + '\n          ' + (opts.scale ? 'y.xyz *= ' + opts.scale.toFixed(10) + ';' : '') + '\n          ' + (opts.clip ? '\n          float r = length(y.xyz);\n          if (r > ' + opts.clip.toFixed(2) + ') y.xyz /= r;\n          ' : '') + '\n          ' + (opts.shift ? 'y.z += ' + opts.shift.toFixed(2) + ';' : '') + '\n          return y;\n        }\n      '
        });
    }
    var camera = require('regl-camera')(regl, {
        center: [
            0,
            28,
            0
        ],
        distance: 100,
        near: 0.1,
        far: 1000,
        damping: 0
    });
    var invView = [];
    var drawBg = regl({
        frag: glslify(['\n      precision mediump float;\n#define GLSLIFY 1\n\n      mat3 calcLookAtMatrix(vec3 origin, vec3 target, float roll) {\n  vec3 rr = vec3(sin(roll), cos(roll), 0.0);\n  vec3 ww = normalize(target - origin);\n  vec3 uu = normalize(cross(ww, rr));\n  vec3 vv = normalize(cross(uu, ww));\n\n  return mat3(uu, vv, ww);\n}\n\nvec3 getRay(mat3 camMat, vec2 screenPos, float lensLength) {\n  return normalize(camMat * vec3(screenPos, lensLength));\n}\n\nvec3 getRay(vec3 origin, vec3 target, vec2 screenPos, float lensLength) {\n  mat3 camMat = calcLookAtMatrix(origin, target, 0.0);\n  return getRay(camMat, screenPos, lensLength);\n}\n\n      //\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\n      uniform vec3 color;\n      uniform float gamma;\n      varying vec3 dir;\n      #define OO2PI 0.15915494309189535\n      #define PI 3.141592653589793238\n      #define VFADE 0.1\n      #define NOISEINTENSITY 0.05\n      void main() {\n        vec3 ndir = dir;\n        float phi = atan(ndir.z, ndir.x);\n        float y = dir.y / length(ndir);\n        float mag = 1.0 - NOISEINTENSITY + NOISEINTENSITY * snoise(ndir  / length(ndir) * 2.0);\n        float vertFade = (1.0 - VFADE) + VFADE * y;\n\n        vec3 c = color * vertFade * mag;\n        float l = length(c);\n\n        gl_FragColor = vec4(c / l * pow(l, gamma), 1.0);\n      }\n    ']),
        vert: '\n      precision mediump float;\n      attribute vec2 xy;\n      varying vec3 dir;\n      uniform mat4 invView;\n      uniform float aspect;\n      void main() {\n        dir = (invView * vec4(xy * vec2(aspect, 1.0), -1, 0)).xyz;\n        gl_Position = vec4(xy, 0, 1);\n      }\n    ',
        attributes: {
            xy: [
                [
                    -4,
                    -4
                ],
                [
                    0,
                    4
                ],
                [
                    4,
                    -4
                ]
            ]
        },
        uniforms: {
            color: regl.prop('color'),
            invView: function (context) {
                return invert(invView, context.view);
            },
            aspect: function (context) {
                return context.viewportWidth / context.viewportHeight;
            },
            gamma: regl.prop('gamma')
        },
        framebuffer: regl.prop('dest'),
        depth: { enable: false },
        count: 3
    });
    var drawPointsFromTexture = regl({
        frag: '\n      precision mediump float;\n      uniform vec4 color;\n      uniform float opac;\n      void main() {\n        vec4 c = color;\n        c.w *= opac;\n        gl_FragColor = c;\n      }\n    ',
        vert: '\n      precision mediump float;\n      attribute vec2 xy;\n      uniform sampler2D points;\n      uniform mat4 projection, view;\n      void main() {\n        vec4 pt = texture2D(points, xy).xzyw;\n        gl_Position = projection * view * pt;\n        gl_PointSize = 1.0;\n      }\n    ',
        attributes: { xy: regl.prop('sampleAt') },
        uniforms: {
            points: regl.prop('data'),
            color: regl.prop('color'),
            opac: regl.prop('opac')
        },
        blend: {
            enable: true,
            func: {
                srcRGB: 'src alpha',
                srcAlpha: 1,
                dstRGB: function (context, props) {
                    return props.invert ? 'one minus src alpha' : 1;
                },
                dstAlpha: 1
            },
            equation: {
                rgb: function (context, props) {
                    return props.invert ? 'reverse subtract' : 'add';
                },
                alpha: 'add'
            }
        },
        framebuffer: regl.prop('dest'),
        depth: { enable: false },
        primitive: 'points',
        count: regl.prop('count')
    });
    var transfer = gpgpu.map({
        args: [
            'array',
            'scalar'
        ],
        body: 'vec4 compute (vec4 c, float gamma) {\n      float l = length(c.xyz);\n      return vec4(c.xyz / l * pow(l, gamma), 1.0);\n    }'
    });
    var exposure = 0.2;
    var gamma = 1;
    var tick = 0;
    var dt0 = 0.01;
    function render() {
        regl.poll();
        tick++;
        raf = requestAnimationFrame(render);
        var dt = dt0 / mbframes;
        args[2] = dt;
        attractors[selectedAttractor](args);
        var changes = {};
        if (rotation !== 0) {
            changes.dtheta = rotation * 0.03 / mbframes;
        }
        camera(changes, function (context) {
            drawBg({
                color: bg,
                dest: screenbufferProxy,
                gamma: gamma
            });
            fg[3] = 1;
            var opac = Math.max(0, Math.min(1, Math.atan(1 / length(context.eye)) * context.viewportHeight * 0.02 * exposure)) * (360000 / n) * 2;
            drawPointsFromTexture({
                count: n,
                data: args[0],
                sampleAt: uv,
                color: fg,
                opac: opac,
                invert: isInverted,
                dest: screenbufferProxy
            });
            transfer([
                null,
                screenbufferProxy,
                1 / gamma
            ]);
        });
        if (doCapture) {
            capturer.capture(canvas);
            if (needsStop) {
                capturer.stop();
                capturer.save();
                needsStop = false;
                doCapture = false;
            }
        }
    }
    var raf = render();
    document.querySelector('canvas').addEventListener('wheel', function (e) {
        e.preventDefault();
    });
}
(function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments);
    }, i[r].l = 1 * new Date();
    a = s.createElement(o), m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m);
}(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga'));
ga('create', 'UA-50197543-4', 'auto');
ga('send', 'pageview');
},{"../regl-cwise":47,"canvas-fit":2,"ccapture.js":3,"fail-nicely":5,"gl-mat4/invert":7,"gl-vec3/length":10,"glslify":11,"h":12,"hsv2rgb":13,"insert-css":14,"katex":15,"regl-camera":42,"regl/dist/regl.min.js":43,"rgb-hex":44}],2:[function(require,module,exports){
var size = require('element-size');
module.exports = fit;
var scratch = new Float32Array(2);
function fit(canvas, parent, scale) {
    var isSVG = canvas.nodeName.toUpperCase() === 'SVG';
    canvas.style.position = canvas.style.position || 'absolute';
    canvas.style.top = 0;
    canvas.style.left = 0;
    resize.scale = parseFloat(scale || 1);
    resize.parent = parent;
    return resize();
    function resize() {
        var p = resize.parent || canvas.parentNode;
        if (typeof p === 'function') {
            var dims = p(scratch) || scratch;
            var width = dims[0];
            var height = dims[1];
        } else if (p && p !== document.body) {
            var psize = size(p);
            var width = psize[0] | 0;
            var height = psize[1] | 0;
        } else {
            var width = window.innerWidth;
            var height = window.innerHeight;
        }
        if (isSVG) {
            canvas.setAttribute('width', width * resize.scale + 'px');
            canvas.setAttribute('height', height * resize.scale + 'px');
        } else {
            canvas.width = width * resize.scale;
            canvas.height = height * resize.scale;
        }
        canvas.style.width = width + 'px';
        canvas.style.height = height + 'px';
        return resize;
    }
}
},{"element-size":4}],3:[function(require,module,exports){
(function (global){
function download(l, k, f) {
    function c(e) {
        var d = e.split(/[:;,]/), e = d[1], d = ('base64' == d[2] ? atob : decodeURIComponent)(d.pop()), b = d.length, q = 0, o = new Uint8Array(b);
        for (q; q < b; ++q)
            o[q] = d.charCodeAt(q);
        return new m([o], { type: e });
    }
    function i(d, b) {
        if ('download' in h)
            return h.href = d, h.setAttribute('download', e), h.innerHTML = 'downloading...', h.style.display = 'none', a.body.appendChild(h), setTimeout(function () {
                h.click();
                a.body.removeChild(h);
                !0 === b && setTimeout(function () {
                    g.URL.revokeObjectURL(h.href);
                }, 250);
            }, 66), !0;
        var o = a.createElement('iframe');
        a.body.appendChild(o);
        b || (d = 'data:' + d.replace(/^data:([\w\/\-\+]+)/, j));
        o.src = d;
        setTimeout(function () {
            a.body.removeChild(o);
        }, 333);
    }
    var g = window, j = 'application/octet-stream', f = f || j, a = document, h = a.createElement('a'), r = function (e) {
            return '' + e;
        }, m = g.Blob || g.MozBlob || g.WebKitBlob || r, b = g.MSBlobBuilder || g.WebKitBlobBuilder || g.BlobBuilder, e = k || 'download', d;
    'true' === '' + this && (l = [
        l,
        f
    ], f = l[0], l = l[1]);
    if (('' + l).match(/^data\:[\w+\-]+\/[\w+\-]+[,;]/))
        return navigator.msSaveBlob ? navigator.msSaveBlob(c(l), e) : i(l);
    try {
        d = l instanceof m ? l : new m([l], { type: f });
    } catch (o) {
        b && (d = new b(), d.append([l]), d = d.getBlob(f));
    }
    if (navigator.msSaveBlob)
        return navigator.msSaveBlob(d, e);
    if (g.URL)
        i(g.URL.createObjectURL(d), !0);
    else {
        if ('string' === typeof d || d.constructor === r)
            try {
                return i('data:' + f + ';base64,' + g.btoa(d));
            } catch (z) {
                return i('data:' + f + ',' + encodeURIComponent(d));
            }
        k = new FileReader();
        k.onload = function () {
            i(this.result);
        };
        k.readAsDataURL(d);
    }
    return !0;
}
;
window.Whammy = function () {
    function l(b, e) {
        for (var d = k(b), d = [
                    {
                        id: 440786851,
                        data: [
                            {
                                data: 1,
                                id: 17030
                            },
                            {
                                data: 1,
                                id: 17143
                            },
                            {
                                data: 4,
                                id: 17138
                            },
                            {
                                data: 8,
                                id: 17139
                            },
                            {
                                data: 'webm',
                                id: 17026
                            },
                            {
                                data: 2,
                                id: 17031
                            },
                            {
                                data: 2,
                                id: 17029
                            }
                        ]
                    },
                    {
                        id: 408125543,
                        data: [
                            {
                                id: 357149030,
                                data: [
                                    {
                                        data: 1000000,
                                        id: 2807729
                                    },
                                    {
                                        data: 'whammy',
                                        id: 19840
                                    },
                                    {
                                        data: 'whammy',
                                        id: 22337
                                    },
                                    {
                                        data: r(d.duration),
                                        id: 17545
                                    }
                                ]
                            },
                            {
                                id: 374648427,
                                data: [{
                                        id: 174,
                                        data: [
                                            {
                                                data: 1,
                                                id: 215
                                            },
                                            {
                                                data: 1,
                                                id: 29637
                                            },
                                            {
                                                data: 0,
                                                id: 156
                                            },
                                            {
                                                data: 'und',
                                                id: 2274716
                                            },
                                            {
                                                data: 'V_VP8',
                                                id: 134
                                            },
                                            {
                                                data: 'VP8',
                                                id: 2459272
                                            },
                                            {
                                                data: 1,
                                                id: 131
                                            },
                                            {
                                                id: 224,
                                                data: [
                                                    {
                                                        data: d.width,
                                                        id: 176
                                                    },
                                                    {
                                                        data: d.height,
                                                        id: 186
                                                    }
                                                ]
                                            }
                                        ]
                                    }]
                            },
                            {
                                id: 475249515,
                                data: []
                            }
                        ]
                    }
                ], o = d[1], a = o.data[2], c = 0, g = 0; c < b.length;) {
            var h = {
                id: 187,
                data: [
                    {
                        data: Math.round(g),
                        id: 179
                    },
                    {
                        id: 183,
                        data: [
                            {
                                data: 1,
                                id: 247
                            },
                            {
                                data: 0,
                                size: 8,
                                id: 241
                            }
                        ]
                    }
                ]
            };
            a.data.push(h);
            var q = [], h = 0;
            do
                q.push(b[c]), h += b[c].duration, c++;
            while (c < b.length && 30000 > h);
            var f = 0, q = {
                    id: 524531317,
                    data: [{
                            data: Math.round(g),
                            id: 231
                        }].concat(q.map(function (e) {
                        var d = j({
                            discardable: 0,
                            frame: e.data.slice(4),
                            invisible: 0,
                            keyframe: 1,
                            lacing: 0,
                            trackNum: 1,
                            timecode: Math.round(f)
                        });
                        f += e.duration;
                        return {
                            data: d,
                            id: 163
                        };
                    }))
                };
            o.data.push(q);
            g += h;
        }
        for (g = c = 0; g < o.data.length; g++)
            3 <= g && (a.data[g - 3].data[1].data[1].data = c), h = i([o.data[g]], e), c += h.size || h.byteLength || h.length, 2 != g && (o.data[g] = h);
        return i(d, e);
    }
    function k(b) {
        for (var e = b[0].width, d = b[0].height, o = b[0].duration, a = 1; a < b.length; a++) {
            if (b[a].width != e)
                throw 'Frame ' + (a + 1) + ' has a different width';
            if (b[a].height != d)
                throw 'Frame ' + (a + 1) + ' has a different height';
            if (0 > b[a].duration || 32767 < b[a].duration)
                throw 'Frame ' + (a + 1) + ' has a weird duration (must be between 0 and 32767)';
            o += b[a].duration;
        }
        return {
            duration: o,
            width: e,
            height: d
        };
    }
    function f(b) {
        for (var e = []; 0 < b;)
            e.push(b & 255), b >>= 8;
        return new Uint8Array(e.reverse());
    }
    function c(b) {
        for (var e = [], b = (b.length % 8 ? Array(9 - b.length % 8).join('0') : '') + b, d = 0; d < b.length; d += 8)
            e.push(parseInt(b.substr(d, 8), 2));
        return new Uint8Array(e);
    }
    function i(b, e) {
        for (var d = [], o = 0; o < b.length; o++)
            if ('id' in b[o]) {
                var a = b[o].data;
                'object' == typeof a && (a = i(a, e));
                if ('number' == typeof a)
                    if ('size' in b[o]) {
                        for (var h = b[o].size, j = new Uint8Array(h), h = h - 1; 0 <= h; h--)
                            j[h] = a & 255, a >>= 8;
                        a = j;
                    } else
                        a = c(a.toString(2));
                if ('string' == typeof a) {
                    j = new Uint8Array(a.length);
                    for (h = 0; h < a.length; h++)
                        j[h] = a.charCodeAt(h);
                    a = j;
                }
                for (var h = a.size || a.byteLength || a.length, j = 0, m = 56; 0 < m; m -= 7)
                    if (h > Math.pow(2, m) - 2) {
                        j = m / 7;
                        break;
                    }
                h = h.toString(2);
                m = Array(8 * (j + 1) + 1).join('0');
                j = Array(j + 1).join('0') + 1;
                h = m.substr(0, m.length - h.length - j.length) + h;
                j += h;
                d.push(f(b[o].id));
                d.push(c(j));
                d.push(a);
            } else
                d.push(b[o]);
        return e ? (d = g(d), new Uint8Array(d)) : new Blob(d, { type: 'video/webm' });
    }
    function g(b, e) {
        null == e && (e = []);
        for (var d = 0; d < b.length; d++)
            'object' == typeof b[d] ? g(b[d], e) : e.push(b[d]);
        return e;
    }
    function j(b) {
        var e = 0;
        b.keyframe && (e |= 128);
        b.invisible && (e |= 8);
        b.lacing && (e |= b.lacing << 1);
        b.discardable && (e |= 1);
        if (127 < b.trackNum)
            throw 'TrackNumber > 127 not supported';
        return [
            b.trackNum | 128,
            b.timecode >> 8,
            b.timecode & 255,
            e
        ].map(function (e) {
            return String.fromCharCode(e);
        }).join('') + b.frame;
    }
    function a(b) {
        for (var e = b.RIFF[0].WEBP[0], d = e.indexOf('\x9D\x01*'), a = 0, h = []; 4 > a; a++)
            h[a] = e.charCodeAt(d + 3 + a);
        a = h[1] << 8 | h[0];
        d = a & 16383;
        a = h[3] << 8 | h[2];
        return {
            width: d,
            height: a & 16383,
            data: e,
            riff: b
        };
    }
    function h(b) {
        for (var e = 0, d = {}; e < b.length;) {
            var a = b.substr(e, 4);
            d[a] = d[a] || [];
            if ('RIFF' == a || 'LIST' == a) {
                var c = parseInt(b.substr(e + 4, 4).split('').map(function (e) {
                        e = e.charCodeAt(0).toString(2);
                        return Array(8 - e.length + 1).join('0') + e;
                    }).join(''), 2), g = b.substr(e + 4 + 4, c), e = e + (8 + c);
                d[a].push(h(g));
            } else
                'WEBP' == a ? d[a].push(b.substr(e + 8)) : d[a].push(b.substr(e + 4)), e = b.length;
        }
        return d;
    }
    function r(a) {
        return [].slice.call(new Uint8Array(new Float64Array([a]).buffer), 0).map(function (e) {
            return String.fromCharCode(e);
        }).reverse().join('');
    }
    function m(a, e) {
        this.frames = [];
        this.duration = 1000 / a;
        this.quality = e || 0.8;
    }
    m.prototype.add = function (a, e) {
        if ('undefined' != typeof e && this.duration)
            throw 'you can\'t pass a duration if the fps is set';
        if ('undefined' == typeof e && !this.duration)
            throw 'if you don\'t have the fps set, you need to have durations here.';
        a.canvas && (a = a.canvas);
        if (a.toDataURL)
            a = a.getContext('2d').getImageData(0, 0, a.width, a.height);
        else if ('string' != typeof a)
            throw 'frame must be a a HTMLCanvasElement, a CanvasRenderingContext2D or a DataURI formatted string';
        if ('string' === typeof a && !/^data:image\/webp;base64,/gi.test(a))
            throw 'Input must be formatted properly as a base64 encoded DataURI of type image/webp';
        this.frames.push({
            image: a,
            duration: e || this.duration
        });
    };
    m.prototype.encodeFrames = function (a) {
        if (this.frames[0].image instanceof ImageData) {
            var e = this.frames, d = document.createElement('canvas'), h = d.getContext('2d');
            d.width = this.frames[0].image.width;
            d.height = this.frames[0].image.height;
            var c = function (g) {
                var j = e[g];
                h.putImageData(j.image, 0, 0);
                j.image = d.toDataURL('image/webp', this.quality);
                g < e.length - 1 ? setTimeout(function () {
                    c(g + 1);
                }, 1) : a();
            }.bind(this);
            c(0);
        } else
            a();
    };
    m.prototype.compile = function (b, e) {
        this.encodeFrames(function () {
            var d = new l(this.frames.map(function (e) {
                var d = a(h(atob(e.image.slice(23))));
                d.duration = e.duration;
                return d;
            }), b);
            e(d);
        }.bind(this));
    };
    return {
        Video: m,
        fromImageArray: function (b, e, d) {
            return l(b.map(function (d) {
                d = a(h(atob(d.slice(23))));
                d.duration = 1000 / e;
                return d;
            }), d);
        },
        toWebM: l
    };
}();
(function () {
    function l(f) {
        var c, i = new Uint8Array(f);
        for (c = 0; c < f; c += 1)
            i[c] = 0;
        return i;
    }
    var k = 'A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,0,1,2,3,4,5,6,7,8,9,+,/'.split(',');
    window.utils = {};
    window.utils.clean = l;
    window.utils.pad = function (f, c, i) {
        f = f.toString(i || 8);
        return '000000000000'.substr(f.length + 12 - c) + f;
    };
    window.utils.extend = function (f, c, i, g) {
        c = l((parseInt((c + i) / g) + 1) * g);
        c.set(f);
        return c;
    };
    window.utils.stringToUint8 = function (f, c, i) {
        var g, j, c = c || l(f.length), i = i || 0;
        for (g = 0, j = f.length; g < j; g += 1)
            c[i] = f.charCodeAt(g), i += 1;
        return c;
    };
    window.utils.uint8ToBase64 = function (f) {
        var c, i = f.length % 3, g = '', j;
        for (c = 0, j = f.length - i; c < j; c += 3)
            i = (f[c] << 16) + (f[c + 1] << 8) + f[c + 2], g += k[i >> 18 & 63] + k[i >> 12 & 63] + k[i >> 6 & 63] + k[i & 63];
        switch (g.length % 4) {
        case 1:
            g += '=';
            break;
        case 2:
            g += '==';
        }
        return g;
    };
}());
(function () {
    var l = window.utils, k;
    k = [
        {
            field: 'fileName',
            length: 100
        },
        {
            field: 'fileMode',
            length: 8
        },
        {
            field: 'uid',
            length: 8
        },
        {
            field: 'gid',
            length: 8
        },
        {
            field: 'fileSize',
            length: 12
        },
        {
            field: 'mtime',
            length: 12
        },
        {
            field: 'checksum',
            length: 8
        },
        {
            field: 'type',
            length: 1
        },
        {
            field: 'linkName',
            length: 100
        },
        {
            field: 'ustar',
            length: 8
        },
        {
            field: 'owner',
            length: 32
        },
        {
            field: 'group',
            length: 32
        },
        {
            field: 'majorNumber',
            length: 8
        },
        {
            field: 'minorNumber',
            length: 8
        },
        {
            field: 'filenamePrefix',
            length: 155
        },
        {
            field: 'padding',
            length: 12
        }
    ];
    window.header = {};
    window.header.structure = k;
    window.header.format = function (f, c) {
        var i = l.clean(512), g = 0;
        k.forEach(function (c) {
            var a = f[c.field] || '', h, r;
            for (h = 0, r = a.length; h < r; h += 1)
                i[g] = a.charCodeAt(h), g += 1;
            g += c.length - h;
        });
        return 'function' === typeof c ? c(i, g) : i;
    };
}());
(function () {
    function l(g) {
        this.written = 0;
        i = (g || 20) * c;
        this.out = f.clean(i);
        this.blocks = [];
        this.length = 0;
    }
    var k = window.header, f = window.utils, c = 512, i;
    l.prototype.append = function (g, j, a) {
        var h, i, m, b, e, d;
        if ('string' === typeof j)
            j = f.stringToUint8(j);
        else if (j.constructor !== Uint8Array.prototype.constructor)
            throw 'Invalid input type. You gave me: ' + j.constructor.toString().match(/function\s*([$A-Za-z_][0-9A-Za-z_]*)\s*\(/)[1];
        'function' === typeof a && (a = {});
        a = a || {};
        m = a.mode || 511;
        b = a.mtime || Math.floor(+new Date() / 1000);
        e = a.uid || 0;
        d = a.gid || 0;
        h = {
            fileName: g,
            fileMode: f.pad(m, 7),
            uid: f.pad(e, 7),
            gid: f.pad(d, 7),
            fileSize: f.pad(j.length, 11),
            mtime: f.pad(b, 11),
            checksum: '        ',
            type: '0',
            ustar: 'ustar  ',
            owner: a.owner || '',
            group: a.group || ''
        };
        i = 0;
        Object.keys(h).forEach(function (e) {
            var d = h[e], a;
            for (e = 0, a = d.length; e < a; e += 1)
                i += d.charCodeAt(e);
        });
        h.checksum = f.pad(i, 6) + '\0 ';
        g = k.format(h);
        a = Math.ceil(g.length / c) * c;
        m = Math.ceil(j.length / c) * c;
        this.blocks.push({
            header: g,
            input: j,
            headerLength: a,
            inputLength: m
        });
    };
    l.prototype.save = function () {
        var g = [], i = [], a = 0, h = Math.pow(2, 20), f = [];
        this.blocks.forEach(function (c) {
            a + c.headerLength + c.inputLength > h && (i.push({
                blocks: f,
                length: a
            }), f = [], a = 0);
            f.push(c);
            a += c.headerLength + c.inputLength;
        });
        i.push({
            blocks: f,
            length: a
        });
        i.forEach(function (a) {
            var b = new Uint8Array(a.length), e = 0;
            a.blocks.forEach(function (d) {
                b.set(d.header, e);
                e += d.headerLength;
                b.set(d.input, e);
                e += d.inputLength;
            });
            g.push(b);
        });
        g.push(new Uint8Array(2 * c));
        return new Blob(g, { type: 'octet/stream' });
    };
    l.prototype.clear = function () {
        this.written = 0;
        this.out = f.clean(i);
    };
    window.Tar = l;
}());
(function (l) {
    function k(c, i) {
        if ({}.hasOwnProperty.call(k.cache, c))
            return k.cache[c];
        var g = k.resolve(c);
        if (!g)
            throw Error('Failed to resolve module ' + c);
        var f = {
            id: c,
            require: k,
            filename: c,
            exports: {},
            loaded: !1,
            parent: i,
            children: []
        };
        i && i.children.push(f);
        var a = c.slice(0, c.lastIndexOf('/') + 1);
        return k.cache[c] = f.exports, g.call(f.exports, f, f.exports, a, c), f.loaded = !0, k.cache[c] = f.exports;
    }
    k.modules = {};
    k.cache = {};
    k.resolve = function (c) {
        return {}.hasOwnProperty.call(k.modules, c) ? k.modules[c] : void 0;
    };
    k.define = function (c, f) {
        k.modules[c] = f;
    };
    var f = function (c) {
        return c = '/', {
            title: 'browser',
            version: 'v0.10.26',
            browser: !0,
            env: {},
            argv: [],
            nextTick: l.setImmediate || function (c) {
                setTimeout(c, 0);
            },
            cwd: function () {
                return c;
            },
            chdir: function (f) {
                c = f;
            }
        };
    }();
    k.define('/gif.coffee', function (c) {
        function f(a, b) {
            function e() {
                this.constructor = a;
            }
            for (var d in b)
                ({}.hasOwnProperty.call(b, d) && (a[d] = b[d]));
            return e.prototype = b.prototype, a.prototype = new e(), a.__super__ = b.prototype, a;
        }
        var g, j, a, h, l;
        a = k('events', c).EventEmitter;
        g = k('/browser.coffee', c);
        l = function (a) {
            function b(e) {
                var a, b;
                this.running = !1;
                this.options = {};
                this.frames = [];
                this.freeWorkers = [];
                this.activeWorkers = [];
                this.setOptions(e);
                for (a in j)
                    b = j[a], null != this.options[a] || (this.options[a] = b);
            }
            return f(b, a), j = {
                workerScript: 'gif.worker.js',
                workers: 2,
                repeat: 0,
                background: '#fff',
                quality: 10,
                width: null,
                height: null,
                transparent: null
            }, h = {
                delay: 500,
                copy: !1
            }, b.prototype.setOption = function (e, a) {
                return this.options[e] = a, null != this._canvas && ('width' === e || 'height' === e) ? this._canvas[e] = a : void 0;
            }, b.prototype.setOptions = function (e) {
                var a, b, h = [];
                for (a in e)
                    ({}.hasOwnProperty.call(e, a) && (b = e[a], h.push(this.setOption(a, b))));
                return h;
            }, b.prototype.addFrame = function (a, d) {
                var b, c;
                null == d && (d = {});
                b = {};
                b.transparent = this.options.transparent;
                for (c in h)
                    b[c] = d[c] || h[c];
                if (null != this.options.width || this.setOption('width', a.width), null != this.options.height || this.setOption('height', a.height), 'undefined' !== typeof ImageData && null != ImageData && a instanceof ImageData)
                    b.data = a.data;
                else if ('undefined' !== typeof CanvasRenderingContext2D && null != CanvasRenderingContext2D && a instanceof CanvasRenderingContext2D || 'undefined' !== typeof WebGLRenderingContext && null != WebGLRenderingContext && a instanceof WebGLRenderingContext)
                    d.copy ? b.data = this.getContextData(a) : b.context = a;
                else if (null != a.childNodes)
                    d.copy ? b.data = this.getImageData(a) : b.image = a;
                else
                    throw Error('Invalid image');
                return this.frames.push(b);
            }, b.prototype.render = function () {
                var a;
                if (this.running)
                    throw Error('Already running');
                if (!(null != this.options.width && null != this.options.height))
                    throw Error('Width and height must be set prior to rendering');
                this.running = !0;
                this.nextFrame = 0;
                this.finishedFrames = 0;
                this.imageParts = function (a) {
                    for (var e = 0, d = function () {
                                var a;
                                a = [];
                                for (var e = 0; 0 <= this.frames.length ? e < this.frames.length : e > this.frames.length; 0 <= this.frames.length ? ++e : --e)
                                    a.push(e);
                                return a;
                            }.apply(this, arguments).length; e < d; ++e)
                        a.push(null);
                    return a;
                }.call(this, []);
                a = this.spawnWorkers();
                for (var d = 0, b = function () {
                            var d;
                            d = [];
                            for (var b = 0; 0 <= a ? b < a : b > a; 0 <= a ? ++b : --b)
                                d.push(b);
                            return d;
                        }.apply(this, arguments).length; d < b; ++d)
                    this.renderNextFrame();
                return this.emit('start'), this.emit('progress', 0);
            }, b.prototype.abort = function () {
                for (var a; !(a = this.activeWorkers.shift(), null == a);) {
                    console.log('killing active worker');
                    a.terminate();
                }
                return this.running = !1, this.emit('abort');
            }, b.prototype.spawnWorkers = function () {
                var a;
                return a = Math.min(this.options.workers, this.frames.length), function () {
                    var d;
                    d = [];
                    for (var b = this.freeWorkers.length; this.freeWorkers.length <= a ? b < a : b > a; this.freeWorkers.length <= a ? ++b : --b)
                        d.push(b);
                    return d;
                }.apply(this, arguments).forEach(function (a) {
                    return function (e) {
                        var b;
                        return console.log('spawning worker ' + e), b = new Worker(a.options.workerScript), b.onmessage = function (a) {
                            return function (e) {
                                return a.activeWorkers.splice(a.activeWorkers.indexOf(b), 1), a.freeWorkers.push(b), a.frameFinished(e.data);
                            };
                        }(a), a.freeWorkers.push(b);
                    };
                }(this)), a;
            }, b.prototype.frameFinished = function (a) {
                console.log('frame ' + a.index + ' finished - ' + this.activeWorkers.length + ' active');
                this.finishedFrames++;
                this.emit('progress', this.finishedFrames / this.frames.length);
                this.imageParts[a.index] = a;
                a: {
                    for (var a = this.imageParts, d = 0, b = a.length; d < b; ++d)
                        if (d in a && null === a[d]) {
                            a = !0;
                            break a;
                        }
                    a = !1;
                }
                return a ? this.renderNextFrame() : this.finishRendering();
            }, b.prototype.finishRendering = function () {
                var a, d, b, h, c, g, f;
                a = c = 0;
                for (g = this.imageParts.length; a < g; ++a)
                    d = this.imageParts[a], c += (d.data.length - 1) * d.pageSize + d.cursor;
                c += d.pageSize - d.cursor;
                console.log('rendering finished - filesize ' + Math.round(c / 1000) + 'kb');
                a = new Uint8Array(c);
                g = 0;
                c = 0;
                for (var q = this.imageParts.length; c < q; ++c) {
                    d = this.imageParts[c];
                    for (var i = 0, j = d.data.length; i < j; ++i)
                        f = d.data[i], b = i, a.set(f, g), b === d.data.length - 1 ? g += d.cursor : g += d.pageSize;
                }
                return h = new Blob([a], { type: 'image/gif' }), this.emit('finished', h, a);
            }, b.prototype.renderNextFrame = function () {
                var a, b, c;
                if (0 === this.freeWorkers.length)
                    throw Error('No free workers');
                return this.nextFrame >= this.frames.length ? void 0 : (a = this.frames[this.nextFrame++], c = this.freeWorkers.shift(), b = this.getTask(a), console.log('starting frame ' + (b.index + 1) + ' of ' + this.frames.length), this.activeWorkers.push(c), c.postMessage(b));
            }, b.prototype.getContextData = function (a) {
                return a.getImageData(0, 0, this.options.width, this.options.height).data;
            }, b.prototype.getImageData = function (a) {
                var b;
                return null != this._canvas || (this._canvas = document.createElement('canvas'), this._canvas.width = this.options.width, this._canvas.height = this.options.height), b = this._canvas.getContext('2d'), b.setFill = this.options.background, b.fillRect(0, 0, this.options.width, this.options.height), b.drawImage(a, 0, 0), this.getContextData(b);
            }, b.prototype.getTask = function (a) {
                var b, c;
                if (b = this.frames.indexOf(a), c = {
                        index: b,
                        last: b === this.frames.length - 1,
                        delay: a.delay,
                        transparent: a.transparent,
                        width: this.options.width,
                        height: this.options.height,
                        quality: this.options.quality,
                        repeat: this.options.repeat,
                        canTransfer: 'chrome' === g.name
                    }, null != a.data)
                    c.data = a.data;
                else if (null != a.context)
                    c.data = this.getContextData(a.context);
                else if (null != a.image)
                    c.data = this.getImageData(a.image);
                else
                    throw Error('Invalid frame');
                return c;
            }, b;
        }(a);
        c.exports = l;
    });
    k.define('/browser.coffee', function (c) {
        var f, g, j, a, h;
        a = navigator.userAgent.toLowerCase();
        j = navigator.platform.toLowerCase();
        h = a.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/) || [
            null,
            'unknown',
            0
        ];
        g = 'ie' === h[1] && document.documentMode;
        f = {
            name: 'version' === h[1] ? h[3] : h[1],
            version: g || parseFloat('opera' === h[1] && h[4] ? h[4] : h[2]),
            platform: { name: a.match(/ip(?:ad|od|hone)/) ? 'ios' : (a.match(/(?:webos|android)/) || j.match(/mac|win|linux/) || ['other'])[0] }
        };
        f[f.name] = !0;
        f[f.name + parseInt(f.version, 10)] = !0;
        f.platform[f.platform.name] = !0;
        c.exports = f;
    });
    k.define('events', function (c, i) {
        f.EventEmitter || (f.EventEmitter = function () {
        });
        var g = i.EventEmitter = f.EventEmitter, j = 'function' === typeof Array.isArray ? Array.isArray : function (a) {
                return '[object Array]' === Object.prototype.toString.call(a);
            };
        g.prototype.setMaxListeners = function (a) {
            this._events || (this._events = {});
            this._events.maxListeners = a;
        };
        g.prototype.emit = function (a) {
            if ('error' === a && (!this._events || !this._events.error || j(this._events.error) && !this._events.error.length))
                throw arguments[1] instanceof Error ? arguments[1] : Error('Uncaught, unspecified \'error\' event.');
            if (!this._events)
                return !1;
            var c = this._events[a];
            if (!c)
                return !1;
            if ('function' != typeof c) {
                if (j(c)) {
                    for (var f = Array.prototype.slice.call(arguments, 1), c = c.slice(), g = 0, b = c.length; g < b; g++)
                        c[g].apply(this, f);
                    return !0;
                }
                return !1;
            }
            switch (arguments.length) {
            case 1:
                c.call(this);
                break;
            case 2:
                c.call(this, arguments[1]);
                break;
            case 3:
                c.call(this, arguments[1], arguments[2]);
                break;
            default:
                f = Array.prototype.slice.call(arguments, 1), c.apply(this, f);
            }
            return !0;
        };
        g.prototype.addListener = function (a, c) {
            if ('function' !== typeof c)
                throw Error('addListener only takes instances of Function');
            if (this._events || (this._events = {}), this.emit('newListener', a, c), !this._events[a])
                this._events[a] = c;
            else if (j(this._events[a])) {
                if (!this._events[a].warned) {
                    var f;
                    void 0 !== this._events.maxListeners ? f = this._events.maxListeners : f = 10;
                    f && 0 < f && this._events[a].length > f && (this._events[a].warned = !0, console.error('(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.', this._events[a].length), console.trace());
                }
                this._events[a].push(c);
            } else
                this._events[a] = [
                    this._events[a],
                    c
                ];
            return this;
        };
        g.prototype.on = g.prototype.addListener;
        g.prototype.once = function (a, c) {
            var f = this;
            return f.on(a, function b() {
                f.removeListener(a, b);
                c.apply(this, arguments);
            }), this;
        };
        g.prototype.removeListener = function (a, c) {
            if ('function' !== typeof c)
                throw Error('removeListener only takes instances of Function');
            if (!this._events || !this._events[a])
                return this;
            var f = this._events[a];
            if (j(f)) {
                var g = f.indexOf(c);
                if (0 > g)
                    return this;
                f.splice(g, 1);
                0 == f.length && delete this._events[a];
            } else
                this._events[a] === c && delete this._events[a];
            return this;
        };
        g.prototype.removeAllListeners = function (a) {
            return a && this._events && this._events[a] && (this._events[a] = null), this;
        };
        g.prototype.listeners = function (a) {
            return this._events || (this._events = {}), this._events[a] || (this._events[a] = []), j(this._events[a]) || (this._events[a] = [this._events[a]]), this._events[a];
        };
    });
    l.GIF = k('/gif.coffee');
}.call(this, this));
(function () {
    function l(a) {
        return a && a.Object === Object ? a : null;
    }
    function k() {
        function a() {
            return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1);
        }
        return a() + a() + '-' + a() + '-' + a() + '-' + a() + '-' + a() + a() + a();
    }
    function f(a) {
        var b = {};
        this.settings = a;
        this.on = function (a, c) {
            b[a] = c;
        };
        this.emit = function (a) {
            var c = b[a];
            c && c.apply(null, Array.prototype.slice.call(arguments, 1));
        };
        this.filename = a.name || k();
        this.mimeType = this.extension = '';
    }
    function c(a) {
        f.call(this, a);
        this.extension = '.tar';
        this.mimeType = 'application/x-tar';
        this.fileExtension = '';
        this.tape = null;
        this.count = 0;
    }
    function i(a) {
        c.call(this, a);
        this.type = 'image/png';
        this.fileExtension = '.png';
    }
    function g(a) {
        c.call(this, a);
        this.type = 'image/jpeg';
        this.fileExtension = '.jpg';
        this.quality = a.quality / 100 || 0.8;
    }
    function j(a) {
        'image/webp' !== document.createElement('canvas').toDataURL('image/webp').substr(5, 10) && console.log('WebP not supported - try another export format');
        f.call(this, a);
        a.quality = a.quality / 100 || 0.8;
        this.extension = '.webm';
        this.mimeType = 'video/webm';
        this.baseFilename = this.filename;
        this.frames = [];
        this.part = 1;
    }
    function a(a) {
        f.call(this, a);
        a.quality = a.quality / 100 || 0.8;
        this.encoder = new FFMpegServer.Video(a);
        this.encoder.on('process', function () {
            this.emit('process');
        }.bind(this));
        this.encoder.on('finished', function (a, b) {
            var c = this.callback;
            c && (this.callback = void 0, c(a, b));
        }.bind(this));
        this.encoder.on('progress', function (a) {
            if (this.settings.onProgress)
                this.settings.onProgress(a);
        }.bind(this));
        this.encoder.on('error', function (a) {
            alert(JSON.stringify(a, null, 2));
        }.bind(this));
    }
    function h(a) {
        f.call(this, a);
        this.framerate = this.settings.framerate;
        this.type = 'video/webm';
        this.extension = '.webm';
        this.mediaRecorder = this.stream = null;
        this.chunks = [];
    }
    function r(a) {
        f.call(this, a);
        a.quality = 31 - (30 * a.quality / 100 || 10);
        a.workers = a.workers || 4;
        this.extension = '.gif';
        this.mimeType = 'image/gif';
        this.canvas = document.createElement('canvas');
        this.ctx = this.canvas.getContext('2d');
        this.sizeSet = !1;
        this.encoder = new GIF({
            workers: a.workers,
            quality: a.quality,
            workerScript: a.workersPath + 'gif.worker.js'
        });
        this.encoder.on('progress', function (a) {
            if (this.settings.onProgress)
                this.settings.onProgress(a);
        }.bind(this));
        this.encoder.on('finished', function (a) {
            var b = this.callback;
            b && (this.callback = void 0, b(a));
        }.bind(this));
    }
    function m(b) {
        function c() {
            function a() {
                this._hooked || (this._hooked = !0, this._hookedTime = this.currentTime || 0, this.pause(), K.push(this));
                return this._hookedTime + n.startTime;
            }
            m('Capturer start');
            y = window.Date.now();
            v = y + n.startTime;
            G = window.performance.now();
            H = G + n.startTime;
            window.Date.prototype.getTime = function () {
                return v;
            };
            window.Date.now = function () {
                return v;
            };
            window.setTimeout = function (a, b) {
                var c = {
                    callback: a,
                    time: b,
                    triggerTime: v + b
                };
                x.push(c);
                m('Timeout set to ' + c.time);
                return c;
            };
            window.clearTimeout = function (a) {
                for (var b = 0; b < x.length; b++)
                    x[b] == a && (x.splice(b, 1), m('Timeout cleared'));
            };
            window.setInterval = function (a, b) {
                var c = {
                    callback: a,
                    time: b,
                    triggerTime: v + b
                };
                A.push(c);
                m('Interval set to ' + c.time);
                return c;
            };
            window.clearInterval = function () {
                m('clear Interval');
                return null;
            };
            window.requestAnimationFrame = function (a) {
                I.push(a);
            };
            window.performance.now = function () {
                return H;
            };
            Object.defineProperty(HTMLVideoElement.prototype, 'currentTime', { get: a });
            Object.defineProperty(HTMLAudioElement.prototype, 'currentTime', { get: a });
        }
        function d() {
            J = !1;
            s.stop();
            m('Capturer stop');
            window.setTimeout = E;
            window.setInterval = O;
            window.clearTimeout = P;
            window.requestAnimationFrame = Q;
            window.Date.prototype.getTime = R;
            window.Date.now = S;
            window.performance.now = T;
        }
        function e() {
            E(k, 0, void 0);
        }
        function f() {
            var a = w / n.framerate;
            if (n.frameLimit && w >= n.frameLimit || n.timeLimit && a >= n.timeLimit)
                d(), l();
            var b = new Date(null);
            b.setSeconds(a);
            u.textContent = 2 < n.motionBlurFrames ? 'CCapture ' + n.format + ' | ' + w + ' frames (' + B + ' inter) | ' + b.toISOString().substr(11, 8) : 'CCapture ' + n.format + ' | ' + w + ' frames | ' + b.toISOString().substr(11, 8);
        }
        function k() {
            var a = (w + B / n.motionBlurFrames) * (1000 / n.framerate);
            v = y + a;
            H = G + a;
            K.forEach(function (b) {
                b._hookedTime = a / 1000;
            });
            f();
            m('Frame: ' + w + ' ' + B);
            for (var b = 0; b < x.length; b++)
                v >= x[b].triggerTime && (E(x[b].callback, 0, void 0), x.splice(b, 1));
            for (b = 0; b < A.length; b++)
                v >= A[b].triggerTime && (E(A[b].callback, 0, void 0), A[b].triggerTime += A[b].time);
            I.forEach(function (a) {
                E(a, 0, v - N);
            });
            I = [];
        }
        function l(a) {
            a || (a = function (a) {
                download(a, s.filename + s.extension, s.mimeType);
                return !1;
            });
            s.save(a);
        }
        function m(a) {
            z && console.log(a);
        }
        function o(a) {
            var b = D[a];
            b && b.apply(null, Array.prototype.slice.call(arguments, 1));
        }
        var n = b || {}, z, v, y, H, G, s, x = [], A = [], w = 0, B = 0, I = [], J = !1, D = {};
        n.framerate = n.framerate || 60;
        n.motionBlurFrames = 2 * (n.motionBlurFrames || 1);
        z = n.verbose || !1;
        n.step = 1000 / n.framerate;
        n.timeLimit = n.timeLimit || 0;
        n.frameLimit = n.frameLimit || 0;
        n.startTime = n.startTime || 0;
        var u = document.createElement('div');
        u.style.position = 'absolute';
        u.style.left = u.style.top = 0;
        u.style.backgroundColor = 'black';
        u.style.fontFamily = 'monospace';
        u.style.fontSize = '11px';
        u.style.padding = '5px';
        u.style.color = 'red';
        u.style.zIndex = 100000;
        n.display && document.body.appendChild(u);
        var t = document.createElement('canvas'), F = t.getContext('2d'), p, C;
        m('Step is set to ' + n.step + 'ms');
        var b = {
                gif: r,
                webm: j,
                ffmpegserver: a,
                png: i,
                jpg: g,
                'webm-mediarecorder': h
            }, L = b[n.format];
        if (!L)
            throw 'Error: Incorrect or missing format: Valid formats are ' + Object.keys(b).join(', ');
        s = new L(n);
        s.step = e;
        s.on('process', k);
        s.on('progress', function (a) {
            o('progress', a);
        });
        !1 == 'performance' in window && (window.performance = {});
        Date.now = Date.now || function () {
            return new Date().getTime();
        };
        if (!1 == 'now' in window.performance) {
            var M = Date.now();
            performance.timing && performance.timing.navigationStart && (M = performance.timing.navigationStart);
            window.performance.now = function () {
                return Date.now() - M;
            };
        }
        var E = window.setTimeout, O = window.setInterval, P = window.clearTimeout, Q = window.requestAnimationFrame, S = window.Date.now, T = window.performance.now, R = window.Date.prototype.getTime, K = [];
        return {
            start: function () {
                c();
                s.start();
                J = !0;
            },
            capture: function (a) {
                if (J)
                    if (2 < n.motionBlurFrames) {
                        if (t.width !== a.width || t.height !== a.height)
                            t.width = a.width, t.height = a.height, p = new Uint16Array(4 * t.height * t.width), F.fillStyle = '#0', F.fillRect(0, 0, t.width, t.height);
                        F.drawImage(a, 0, 0);
                        C = F.getImageData(0, 0, t.width, t.height);
                        for (a = 0; a < p.length; a += 4)
                            p[a] += C.data[a], p[a + 1] += C.data[a + 1], p[a + 2] += C.data[a + 2];
                        B++;
                        if (B >= 0.5 * n.motionBlurFrames) {
                            for (var a = C.data, b = 0; b < p.length; b += 4)
                                a[b] = 2 * p[b] / n.motionBlurFrames, a[b + 1] = 2 * p[b + 1] / n.motionBlurFrames, a[b + 2] = 2 * p[b + 2] / n.motionBlurFrames;
                            F.putImageData(C, 0, 0);
                            s.add(t);
                            w++;
                            B = 0;
                            m('Full MB Frame! ' + w + ' ' + v);
                            for (b = 0; b < p.length; b += 4)
                                p[b] = 0, p[b + 1] = 0, p[b + 2] = 0;
                            gc();
                        } else
                            e();
                    } else
                        s.add(a), w++, m('Full Frame! ' + w);
            },
            stop: d,
            save: l,
            on: function (a, b) {
                D[a] = b;
            }
        };
    }
    var b = {
            'function': !0,
            object: !0
        }, e = b[typeof exports] && exports && !exports.nodeType ? exports : void 0, d = b[typeof module] && module && !module.nodeType ? module : void 0, o = d && d.exports === e ? e : void 0, z = l(e && d && 'object' == typeof global && global), D = l(b[typeof self] && self), y = l(b[typeof window] && window), b = l(b[typeof this] && this), z = z || y !== (b && b.window) && y || D || b || Function('return this')();
    'gc' in window || (window.gc = function () {
    });
    HTMLCanvasElement.prototype.toBlob || Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {
        value: function (a, b, c) {
            for (var c = atob(this.toDataURL(b, c).split(',')[1]), d = c.length, e = new Uint8Array(d), f = 0; f < d; f++)
                e[f] = c.charCodeAt(f);
            a(new Blob([e], { type: b || 'image/png' }));
        }
    });
    (function () {
        !1 == 'performance' in window && (window.performance = {});
        Date.now = Date.now || function () {
            return new Date().getTime();
        };
        if (!1 == 'now' in window.performance) {
            var a = Date.now();
            performance.timing && performance.timing.navigationStart && (a = performance.timing.navigationStart);
            window.performance.now = function () {
                return Date.now() - a;
            };
        }
    }());
    var N = window.Date.now();
    f.prototype.start = function () {
    };
    f.prototype.stop = function () {
    };
    f.prototype.add = function () {
    };
    f.prototype.save = function () {
    };
    f.prototype.dispose = function () {
    };
    f.prototype.safeToProceed = function () {
        return !0;
    };
    f.prototype.step = function () {
        console.log('Step not set!');
    };
    c.prototype = Object.create(f.prototype);
    c.prototype.start = function () {
        this.dispose();
    };
    c.prototype.add = function (a) {
        var b = new FileReader();
        b.onload = function () {
            this.tape.append(('0000000' + this.count).slice(-7) + this.fileExtension, new Uint8Array(b.result));
            this.count++;
            this.step();
        }.bind(this);
        b.readAsArrayBuffer(a);
    };
    c.prototype.save = function (a) {
        a(this.tape.save());
    };
    c.prototype.dispose = function () {
        this.tape = new Tar();
        this.count = 0;
    };
    i.prototype = Object.create(c.prototype);
    i.prototype.add = function (a) {
        a.toBlob(function (a) {
            c.prototype.add.call(this, a);
        }.bind(this), this.type);
    };
    g.prototype = Object.create(c.prototype);
    g.prototype.add = function (a) {
        a.toBlob(function (a) {
            c.prototype.add.call(this, a);
        }.bind(this), this.type, this.quality);
    };
    j.prototype = Object.create(f.prototype);
    j.prototype.start = function () {
        this.dispose();
    };
    j.prototype.add = function (a) {
        this.frames.push(a.toDataURL('image/webp', this.quality));
        0 < this.settings.autoSaveTime && this.frames.length / this.settings.framerate >= this.settings.autoSaveTime ? this.save(function (a) {
            this.filename = this.baseFilename + '-part-' + ('0000000' + this.part).slice(-7);
            download(a, this.filename + this.extension, this.mimeType);
            this.dispose();
            this.part++;
            this.filename = this.baseFilename + '-part-' + ('0000000' + this.part).slice(-7);
            this.step();
        }.bind(this)) : this.step();
    };
    j.prototype.save = function (a) {
        if (this.frames.length) {
            var b = Whammy.fromImageArray(this.frames, this.settings.framerate), b = new Blob([b], { type: 'octet/stream' });
            a(b);
        }
    };
    j.prototype.dispose = function () {
        this.frames = [];
    };
    a.prototype = Object.create(f.prototype);
    a.prototype.start = function () {
        this.encoder.start(this.settings);
    };
    a.prototype.add = function (a) {
        this.encoder.add(a);
    };
    a.prototype.save = function (a) {
        this.callback = a;
        this.encoder.end();
    };
    a.prototype.safeToProceed = function () {
        return this.encoder.safeToProceed();
    };
    h.prototype = Object.create(f.prototype);
    h.prototype.add = function (a) {
        this.stream || (this.stream = a.captureStream(this.framerate), this.mediaRecorder = new MediaRecorder(this.stream), this.mediaRecorder.start(), this.mediaRecorder.ondataavailable = function (a) {
            this.chunks.push(a.data);
        }.bind(this));
        this.step();
    };
    h.prototype.save = function (a) {
        this.mediaRecorder.onstop = function () {
            var b = new Blob(this.chunks, { type: 'video/webm' });
            this.chunks = [];
            a(b);
        }.bind(this);
        this.mediaRecorder.stop();
    };
    r.prototype = Object.create(f.prototype);
    r.prototype.add = function (a) {
        this.sizeSet || (this.encoder.setOption('width', a.width), this.encoder.setOption('height', a.height), this.sizeSet = !0);
        this.canvas.width = a.width;
        this.canvas.height = a.height;
        this.ctx.drawImage(a, 0, 0);
        this.encoder.addFrame(this.ctx, {
            copy: !0,
            delay: this.settings.step
        });
        this.step();
    };
    r.prototype.save = function (a) {
        this.callback = a;
        this.encoder.render();
    };
    (y || D || {}).CCapture = m;
    'function' == typeof define && 'object' == typeof define.amd && define.amd ? define(function () {
        return m;
    }) : e && d ? (o && ((d.exports = m).CCapture = m), e.CCapture = m) : z.CCapture = m;
}());
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],4:[function(require,module,exports){
module.exports = getSize;
function getSize(element) {
    if (element === window || element === document.body) {
        return [
            window.innerWidth,
            window.innerHeight
        ];
    }
    if (!element.parentNode) {
        var temporary = true;
        document.body.appendChild(element);
    }
    var bounds = element.getBoundingClientRect();
    var styles = getComputedStyle(element);
    var height = (bounds.height | 0) + parse(styles.getPropertyValue('margin-top')) + parse(styles.getPropertyValue('margin-bottom'));
    var width = (bounds.width | 0) + parse(styles.getPropertyValue('margin-left')) + parse(styles.getPropertyValue('margin-right'));
    if (temporary) {
        document.body.removeChild(element);
    }
    return [
        width,
        height
    ];
}
function parse(prop) {
    return parseFloat(prop) || 0;
}
},{}],5:[function(require,module,exports){
'use strict';
var h = require('h');
module.exports = failNicely;
function failNicely(msg, options) {
    if (!msg)
        return;
    if (msg instanceof Error) {
        msg = msg.name + ': ' + msg.message;
    } else if (typeof msg !== 'string') {
        throw new Error('fail-nicely: Oops! the message must be a String or an Error. How ironic.');
    }
    options = options || {};
    var zIndex = options.zIndex === undefined ? 9999 : parseInt(options.zIndex);
    var bg = options.bg === undefined ? '#333' : options.bg;
    var fg = options.fg === undefined ? '#fff' : options.fg;
    var title = options.title === undefined ? 'Sorry!' : options.title;
    var fontFamily = options.fontFamily === undefined ? 'Helvetica, Arial, sans-serif' : options.fontFamily;
    var position = options.position === undefined ? 'fixed' : options.position;
    var invert = options.invert === undefined ? false : !!options.invert;
    if (invert) {
        var tmp = fg;
        fg = bg;
        bg = tmp;
    }
    var overlayStyles = {
        position: position,
        top: 0,
        right: 0,
        bottom: 0,
        left: 0,
        'background-color': bg,
        color: fg,
        'text-align': 'center',
        'z-index': zIndex
    };
    var headingStyles = { 'font-family': 'Helvetica, Arial, sans-serif' };
    var explanationStyles = {
        'font-family': 'Helvetica, Arial, sans-serif',
        'max-width': '640px',
        'margin-left': 'auto',
        'margin-right': 'auto',
        'line-height': '1.4',
        'padding': '0 15px'
    };
    var containerStyles = {
        'transform': 'translate(0, -50%)',
        'margin-top': '50vh'
    };
    document.body.appendChild(h('div', { style: overlayStyles }, [h('div', { style: containerStyles }, [
            h('h1', title, { style: headingStyles }),
            h('p', msg, { style: explanationStyles })
        ])]));
}
},{"h":12}],6:[function(require,module,exports){
module.exports = identity;
function identity(out) {
    out[0] = 1;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = 1;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = 1;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
}
;
},{}],7:[function(require,module,exports){
module.exports = invert;
function invert(out, a) {
    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3], a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7], a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11], a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15], b00 = a00 * a11 - a01 * a10, b01 = a00 * a12 - a02 * a10, b02 = a00 * a13 - a03 * a10, b03 = a01 * a12 - a02 * a11, b04 = a01 * a13 - a03 * a11, b05 = a02 * a13 - a03 * a12, b06 = a20 * a31 - a21 * a30, b07 = a20 * a32 - a22 * a30, b08 = a20 * a33 - a23 * a30, b09 = a21 * a32 - a22 * a31, b10 = a21 * a33 - a23 * a31, b11 = a22 * a33 - a23 * a32, det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
    if (!det) {
        return null;
    }
    det = 1 / det;
    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;
    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;
    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;
    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;
    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;
    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;
    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;
    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;
    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;
    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;
    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;
    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;
    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;
    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;
    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;
    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;
    return out;
}
;
},{}],8:[function(require,module,exports){
var identity = require('./identity');
module.exports = lookAt;
function lookAt(out, eye, center, up) {
    var x0, x1, x2, y0, y1, y2, z0, z1, z2, len, eyex = eye[0], eyey = eye[1], eyez = eye[2], upx = up[0], upy = up[1], upz = up[2], centerx = center[0], centery = center[1], centerz = center[2];
    if (Math.abs(eyex - centerx) < 0.000001 && Math.abs(eyey - centery) < 0.000001 && Math.abs(eyez - centerz) < 0.000001) {
        return identity(out);
    }
    z0 = eyex - centerx;
    z1 = eyey - centery;
    z2 = eyez - centerz;
    len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);
    z0 *= len;
    z1 *= len;
    z2 *= len;
    x0 = upy * z2 - upz * z1;
    x1 = upz * z0 - upx * z2;
    x2 = upx * z1 - upy * z0;
    len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);
    if (!len) {
        x0 = 0;
        x1 = 0;
        x2 = 0;
    } else {
        len = 1 / len;
        x0 *= len;
        x1 *= len;
        x2 *= len;
    }
    y0 = z1 * x2 - z2 * x1;
    y1 = z2 * x0 - z0 * x2;
    y2 = z0 * x1 - z1 * x0;
    len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);
    if (!len) {
        y0 = 0;
        y1 = 0;
        y2 = 0;
    } else {
        len = 1 / len;
        y0 *= len;
        y1 *= len;
        y2 *= len;
    }
    out[0] = x0;
    out[1] = y0;
    out[2] = z0;
    out[3] = 0;
    out[4] = x1;
    out[5] = y1;
    out[6] = z1;
    out[7] = 0;
    out[8] = x2;
    out[9] = y2;
    out[10] = z2;
    out[11] = 0;
    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);
    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);
    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);
    out[15] = 1;
    return out;
}
;
},{"./identity":6}],9:[function(require,module,exports){
module.exports = perspective;
function perspective(out, fovy, aspect, near, far) {
    var f = 1 / Math.tan(fovy / 2), nf = 1 / (near - far);
    out[0] = f / aspect;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = f;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = (far + near) * nf;
    out[11] = -1;
    out[12] = 0;
    out[13] = 0;
    out[14] = 2 * far * near * nf;
    out[15] = 0;
    return out;
}
;
},{}],10:[function(require,module,exports){
module.exports = length;
function length(a) {
    var x = a[0], y = a[1], z = a[2];
    return Math.sqrt(x * x + y * y + z * z);
}
},{}],11:[function(require,module,exports){
module.exports = function (strings) {
    if (typeof strings === 'string')
        strings = [strings];
    var exprs = [].slice.call(arguments, 1);
    var parts = [];
    for (var i = 0; i < strings.length - 1; i++) {
        parts.push(strings[i], exprs[i] || '');
    }
    parts.push(strings[i]);
    return parts.join('');
};
},{}],12:[function(require,module,exports){
;
(function () {
    function h() {
        var args = [].slice.call(arguments), e = null;
        function item(l) {
            function parseClass(string) {
                var m = string.split(/([\.#]?[a-zA-Z0-9_-]+)/);
                m.forEach(function (v) {
                    var s = v.substring(1, v.length);
                    if (!v)
                        return;
                    if (!e)
                        e = document.createElement(v);
                    else if (v[0] === '.')
                        e.classList.add(s);
                    else if (v[0] === '#')
                        e.setAttribute('id', s);
                });
            }
            if (l == null);
            else if ('string' === typeof l) {
                if (!e)
                    parseClass(l);
                else
                    e.appendChild(document.createTextNode(l));
            } else if ('number' === typeof l || 'boolean' === typeof l || l instanceof Date || l instanceof RegExp) {
                e.appendChild(document.createTextNode(l.toString()));
            } else if (Array.isArray(l))
                l.forEach(item);
            else if (l instanceof HTMLElement)
                e.appendChild(l);
            else if ('object' === typeof l) {
                for (var k in l) {
                    if ('function' === typeof l[k])
                        e.addEventListener(k, l[k]);
                    else if (k === 'style') {
                        for (var s in l[k])
                            e.style.setProperty(s, l[k][s]);
                    } else
                        e.setAttribute(k, l[k]);
                }
            }
        }
        while (args.length) {
            item(args.shift());
        }
        return e;
    }
    if (typeof module === 'object')
        module.exports = h;
    else
        this.h = h;
}());
},{}],13:[function(require,module,exports){
var TAU = Math.PI * 2;
var round = Math.round;
var min = Math.min;
var max = Math.max;
var ceil = Math.ceil;
module.exports = hsv2rgb;
function set(r, g, b, out) {
    out[0] = round(r * 255);
    out[1] = round(g * 255);
    out[2] = round(b * 255);
}
function clamp(v, l, u) {
    return max(l, min(v, u));
}
function hsv2rgb(h, s, v, out) {
    out = out || [
        0,
        0,
        0
    ];
    h = h % 360;
    s = clamp(s, 0, 1);
    v = clamp(v, 0, 1);
    if (!s) {
        out[0] = out[1] = out[2] = ceil(v * 255);
    } else {
        var b = (1 - s) * v;
        var vb = v - b;
        var hm = h % 60;
        switch (h / 60 | 0) {
        case 0:
            set(v, vb * h / 60 + b, b, out);
            break;
        case 1:
            set(vb * (60 - hm) / 60 + b, v, b, out);
            break;
        case 2:
            set(b, v, vb * hm / 60 + b, out);
            break;
        case 3:
            set(b, vb * (60 - hm) / 60 + b, v, out);
            break;
        case 4:
            set(vb * hm / 60 + b, b, v, out);
            break;
        case 5:
            set(v, b, vb * (60 - hm) / 60 + b, out);
            break;
        }
    }
    return out;
}
},{}],14:[function(require,module,exports){
var containers = [];
var styleElements = [];
var usage = 'insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).';
function insertCss(css, options) {
    options = options || {};
    if (css === undefined) {
        throw new Error(usage);
    }
    var position = options.prepend === true ? 'prepend' : 'append';
    var container = options.container !== undefined ? options.container : document.querySelector('head');
    var containerId = containers.indexOf(container);
    if (containerId === -1) {
        containerId = containers.push(container) - 1;
        styleElements[containerId] = {};
    }
    var styleElement;
    if (styleElements[containerId] !== undefined && styleElements[containerId][position] !== undefined) {
        styleElement = styleElements[containerId][position];
    } else {
        styleElement = styleElements[containerId][position] = createStyleElement();
        if (position === 'prepend') {
            container.insertBefore(styleElement, container.childNodes[0]);
        } else {
            container.appendChild(styleElement);
        }
    }
    if (css.charCodeAt(0) === 65279) {
        css = css.substr(1, css.length);
    }
    if (styleElement.styleSheet) {
        styleElement.styleSheet.cssText += css;
    } else {
        styleElement.textContent += css;
    }
    return styleElement;
}
;
function createStyleElement() {
    var styleElement = document.createElement('style');
    styleElement.setAttribute('type', 'text/css');
    return styleElement;
}
module.exports = insertCss;
module.exports.insertCss = insertCss;
},{}],15:[function(require,module,exports){
var ParseError = require('./src/ParseError');
var Settings = require('./src/Settings');
var buildTree = require('./src/buildTree');
var parseTree = require('./src/parseTree');
var utils = require('./src/utils');
var render = function (expression, baseNode, options) {
    utils.clearNode(baseNode);
    var settings = new Settings(options);
    var tree = parseTree(expression, settings);
    var node = buildTree(tree, expression, settings).toNode();
    baseNode.appendChild(node);
};
if (typeof document !== 'undefined') {
    if (document.compatMode !== 'CSS1Compat') {
        typeof console !== 'undefined' && console.warn('Warning: KaTeX doesn\'t work in quirks mode. Make sure your ' + 'website has a suitable doctype.');
        render = function () {
            throw new ParseError('KaTeX doesn\'t work in quirks mode.');
        };
    }
}
var renderToString = function (expression, options) {
    var settings = new Settings(options);
    var tree = parseTree(expression, settings);
    return buildTree(tree, expression, settings).toMarkup();
};
var generateParseTree = function (expression, options) {
    var settings = new Settings(options);
    return parseTree(expression, settings);
};
module.exports = {
    render: render,
    renderToString: renderToString,
    __parse: generateParseTree,
    ParseError: ParseError
};
},{"./src/ParseError":18,"./src/Settings":20,"./src/buildTree":25,"./src/parseTree":34,"./src/utils":36}],16:[function(require,module,exports){
var matchAt = require('match-at');
var ParseError = require('./ParseError');
function Lexer(input) {
    this._input = input;
}
function Token(text, data, position) {
    this.text = text;
    this.data = data;
    this.position = position;
}
var tokenRegex = new RegExp('([ \r\n\t]+)|(' + '---?' + '|[!-\\[\\]-\u2027\u202A-\uD7FF豈-\uFFFF]' + '|[\uD800-\uDBFF][\uDC00-\uDFFF]' + '|\\\\(?:[a-zA-Z]+|[^\uD800-\uDFFF])' + ')');
var whitespaceRegex = /\s*/;
Lexer.prototype._innerLex = function (pos, ignoreWhitespace) {
    var input = this._input;
    if (pos === input.length) {
        return new Token('EOF', null, pos);
    }
    var match = matchAt(tokenRegex, input, pos);
    if (match === null) {
        throw new ParseError('Unexpected character: \'' + input[pos] + '\'', this, pos);
    } else if (match[2]) {
        return new Token(match[2], null, pos + match[2].length);
    } else if (ignoreWhitespace) {
        return this._innerLex(pos + match[1].length, true);
    } else {
        return new Token(' ', null, pos + match[1].length);
    }
};
var cssColor = /#[a-z0-9]+|[a-z]+/i;
Lexer.prototype._innerLexColor = function (pos) {
    var input = this._input;
    var whitespace = matchAt(whitespaceRegex, input, pos)[0];
    pos += whitespace.length;
    var match;
    if (match = matchAt(cssColor, input, pos)) {
        return new Token(match[0], null, pos + match[0].length);
    } else {
        throw new ParseError('Invalid color', this, pos);
    }
};
var sizeRegex = /(-?)\s*(\d+(?:\.\d*)?|\.\d+)\s*([a-z]{2})/;
Lexer.prototype._innerLexSize = function (pos) {
    var input = this._input;
    var whitespace = matchAt(whitespaceRegex, input, pos)[0];
    pos += whitespace.length;
    var match;
    if (match = matchAt(sizeRegex, input, pos)) {
        var unit = match[3];
        if (unit !== 'em' && unit !== 'ex') {
            throw new ParseError('Invalid unit: \'' + unit + '\'', this, pos);
        }
        return new Token(match[0], {
            number: +(match[1] + match[2]),
            unit: unit
        }, pos + match[0].length);
    }
    throw new ParseError('Invalid size', this, pos);
};
Lexer.prototype._innerLexWhitespace = function (pos) {
    var input = this._input;
    var whitespace = matchAt(whitespaceRegex, input, pos)[0];
    pos += whitespace.length;
    return new Token(whitespace[0], null, pos);
};
Lexer.prototype.lex = function (pos, mode) {
    if (mode === 'math') {
        return this._innerLex(pos, true);
    } else if (mode === 'text') {
        return this._innerLex(pos, false);
    } else if (mode === 'color') {
        return this._innerLexColor(pos);
    } else if (mode === 'size') {
        return this._innerLexSize(pos);
    } else if (mode === 'whitespace') {
        return this._innerLexWhitespace(pos);
    }
};
module.exports = Lexer;
},{"./ParseError":18,"match-at":37}],17:[function(require,module,exports){
function Options(data) {
    this.style = data.style;
    this.color = data.color;
    this.size = data.size;
    this.phantom = data.phantom;
    this.font = data.font;
    if (data.parentStyle === undefined) {
        this.parentStyle = data.style;
    } else {
        this.parentStyle = data.parentStyle;
    }
    if (data.parentSize === undefined) {
        this.parentSize = data.size;
    } else {
        this.parentSize = data.parentSize;
    }
}
Options.prototype.extend = function (extension) {
    var data = {
        style: this.style,
        size: this.size,
        color: this.color,
        parentStyle: this.style,
        parentSize: this.size,
        phantom: this.phantom,
        font: this.font
    };
    for (var key in extension) {
        if (extension.hasOwnProperty(key)) {
            data[key] = extension[key];
        }
    }
    return new Options(data);
};
Options.prototype.withStyle = function (style) {
    return this.extend({ style: style });
};
Options.prototype.withSize = function (size) {
    return this.extend({ size: size });
};
Options.prototype.withColor = function (color) {
    return this.extend({ color: color });
};
Options.prototype.withPhantom = function () {
    return this.extend({ phantom: true });
};
Options.prototype.withFont = function (font) {
    return this.extend({ font: font });
};
Options.prototype.reset = function () {
    return this.extend({});
};
var colorMap = {
    'katex-blue': '#6495ed',
    'katex-orange': '#ffa500',
    'katex-pink': '#ff00af',
    'katex-red': '#df0030',
    'katex-green': '#28ae7b',
    'katex-gray': 'gray',
    'katex-purple': '#9d38bd',
    'katex-blueA': '#c7e9f1',
    'katex-blueB': '#9cdceb',
    'katex-blueC': '#58c4dd',
    'katex-blueD': '#29abca',
    'katex-blueE': '#1c758a',
    'katex-tealA': '#acead7',
    'katex-tealB': '#76ddc0',
    'katex-tealC': '#5cd0b3',
    'katex-tealD': '#55c1a7',
    'katex-tealE': '#49a88f',
    'katex-greenA': '#c9e2ae',
    'katex-greenB': '#a6cf8c',
    'katex-greenC': '#83c167',
    'katex-greenD': '#77b05d',
    'katex-greenE': '#699c52',
    'katex-goldA': '#f7c797',
    'katex-goldB': '#f9b775',
    'katex-goldC': '#f0ac5f',
    'katex-goldD': '#e1a158',
    'katex-goldE': '#c78d46',
    'katex-redA': '#f7a1a3',
    'katex-redB': '#ff8080',
    'katex-redC': '#fc6255',
    'katex-redD': '#e65a4c',
    'katex-redE': '#cf5044',
    'katex-maroonA': '#ecabc1',
    'katex-maroonB': '#ec92ab',
    'katex-maroonC': '#c55f73',
    'katex-maroonD': '#a24d61',
    'katex-maroonE': '#94424f',
    'katex-purpleA': '#caa3e8',
    'katex-purpleB': '#b189c6',
    'katex-purpleC': '#9a72ac',
    'katex-purpleD': '#715582',
    'katex-purpleE': '#644172',
    'katex-mintA': '#f5f9e8',
    'katex-mintB': '#edf2df',
    'katex-mintC': '#e0e5cc',
    'katex-grayA': '#fdfdfd',
    'katex-grayB': '#f7f7f7',
    'katex-grayC': '#eeeeee',
    'katex-grayD': '#dddddd',
    'katex-grayE': '#cccccc',
    'katex-grayF': '#aaaaaa',
    'katex-grayG': '#999999',
    'katex-grayH': '#555555',
    'katex-grayI': '#333333',
    'katex-kaBlue': '#314453',
    'katex-kaGreen': '#639b24'
};
Options.prototype.getColor = function () {
    if (this.phantom) {
        return 'transparent';
    } else {
        return colorMap[this.color] || this.color;
    }
};
module.exports = Options;
},{}],18:[function(require,module,exports){
function ParseError(message, lexer, position) {
    var error = 'KaTeX parse error: ' + message;
    if (lexer !== undefined && position !== undefined) {
        error += ' at position ' + position + ': ';
        var input = lexer._input;
        input = input.slice(0, position) + '̲' + input.slice(position);
        var begin = Math.max(0, position - 15);
        var end = position + 15;
        error += input.slice(begin, end);
    }
    var self = new Error(error);
    self.name = 'ParseError';
    self.__proto__ = ParseError.prototype;
    self.position = position;
    return self;
}
ParseError.prototype.__proto__ = Error.prototype;
module.exports = ParseError;
},{}],19:[function(require,module,exports){
var functions = require('./functions');
var environments = require('./environments');
var Lexer = require('./Lexer');
var symbols = require('./symbols');
var utils = require('./utils');
var parseData = require('./parseData');
var ParseError = require('./ParseError');
function Parser(input, settings) {
    this.lexer = new Lexer(input);
    this.settings = settings;
}
var ParseNode = parseData.ParseNode;
function ParseFuncOrArgument(result, isFunction) {
    this.result = result;
    this.isFunction = isFunction;
}
Parser.prototype.expect = function (text, consume) {
    if (this.nextToken.text !== text) {
        throw new ParseError('Expected \'' + text + '\', got \'' + this.nextToken.text + '\'', this.lexer, this.nextToken.position);
    }
    if (consume !== false) {
        this.consume();
    }
};
Parser.prototype.consume = function () {
    this.pos = this.nextToken.position;
    this.nextToken = this.lexer.lex(this.pos, this.mode);
};
Parser.prototype.parse = function () {
    this.mode = 'math';
    this.pos = 0;
    this.nextToken = this.lexer.lex(this.pos, this.mode);
    var parse = this.parseInput();
    return parse;
};
Parser.prototype.parseInput = function () {
    var expression = this.parseExpression(false);
    this.expect('EOF', false);
    return expression;
};
var endOfExpression = [
    '}',
    '\\end',
    '\\right',
    '&',
    '\\\\',
    '\\cr'
];
Parser.prototype.parseExpression = function (breakOnInfix, breakOnToken) {
    var body = [];
    while (true) {
        var lex = this.nextToken;
        var pos = this.pos;
        if (endOfExpression.indexOf(lex.text) !== -1) {
            break;
        }
        if (breakOnToken && lex.text === breakOnToken) {
            break;
        }
        var atom = this.parseAtom();
        if (!atom) {
            if (!this.settings.throwOnError && lex.text[0] === '\\') {
                var errorNode = this.handleUnsupportedCmd();
                body.push(errorNode);
                pos = lex.position;
                continue;
            }
            break;
        }
        if (breakOnInfix && atom.type === 'infix') {
            this.pos = pos;
            this.nextToken = lex;
            break;
        }
        body.push(atom);
    }
    return this.handleInfixNodes(body);
};
Parser.prototype.handleInfixNodes = function (body) {
    var overIndex = -1;
    var funcName;
    for (var i = 0; i < body.length; i++) {
        var node = body[i];
        if (node.type === 'infix') {
            if (overIndex !== -1) {
                throw new ParseError('only one infix operator per group', this.lexer, -1);
            }
            overIndex = i;
            funcName = node.value.replaceWith;
        }
    }
    if (overIndex !== -1) {
        var numerNode;
        var denomNode;
        var numerBody = body.slice(0, overIndex);
        var denomBody = body.slice(overIndex + 1);
        if (numerBody.length === 1 && numerBody[0].type === 'ordgroup') {
            numerNode = numerBody[0];
        } else {
            numerNode = new ParseNode('ordgroup', numerBody, this.mode);
        }
        if (denomBody.length === 1 && denomBody[0].type === 'ordgroup') {
            denomNode = denomBody[0];
        } else {
            denomNode = new ParseNode('ordgroup', denomBody, this.mode);
        }
        var value = this.callFunction(funcName, [
            numerNode,
            denomNode
        ], null);
        return [new ParseNode(value.type, value, this.mode)];
    } else {
        return body;
    }
};
var SUPSUB_GREEDINESS = 1;
Parser.prototype.handleSupSubscript = function (name) {
    var symbol = this.nextToken.text;
    var symPos = this.pos;
    this.consume();
    var group = this.parseGroup();
    if (!group) {
        if (!this.settings.throwOnError && this.nextToken.text[0] === '\\') {
            return this.handleUnsupportedCmd();
        } else {
            throw new ParseError('Expected group after \'' + symbol + '\'', this.lexer, symPos + 1);
        }
    } else if (group.isFunction) {
        var funcGreediness = functions[group.result].greediness;
        if (funcGreediness > SUPSUB_GREEDINESS) {
            return this.parseFunction(group);
        } else {
            throw new ParseError('Got function \'' + group.result + '\' with no arguments ' + 'as ' + name, this.lexer, symPos + 1);
        }
    } else {
        return group.result;
    }
};
Parser.prototype.handleUnsupportedCmd = function () {
    var text = this.nextToken.text;
    var textordArray = [];
    for (var i = 0; i < text.length; i++) {
        textordArray.push(new ParseNode('textord', text[i], 'text'));
    }
    var textNode = new ParseNode('text', {
        body: textordArray,
        type: 'text'
    }, this.mode);
    var colorNode = new ParseNode('color', {
        color: this.settings.errorColor,
        value: [textNode],
        type: 'color'
    }, this.mode);
    this.consume();
    return colorNode;
};
Parser.prototype.parseAtom = function () {
    var base = this.parseImplicitGroup();
    if (this.mode === 'text') {
        return base;
    }
    var superscript;
    var subscript;
    while (true) {
        var lex = this.nextToken;
        if (lex.text === '\\limits' || lex.text === '\\nolimits') {
            if (!base || base.type !== 'op') {
                throw new ParseError('Limit controls must follow a math operator', this.lexer, this.pos);
            } else {
                var limits = lex.text === '\\limits';
                base.value.limits = limits;
                base.value.alwaysHandleSupSub = true;
            }
            this.consume();
        } else if (lex.text === '^') {
            if (superscript) {
                throw new ParseError('Double superscript', this.lexer, this.pos);
            }
            superscript = this.handleSupSubscript('superscript');
        } else if (lex.text === '_') {
            if (subscript) {
                throw new ParseError('Double subscript', this.lexer, this.pos);
            }
            subscript = this.handleSupSubscript('subscript');
        } else if (lex.text === '\'') {
            var prime = new ParseNode('textord', '\\prime', this.mode);
            var primes = [prime];
            this.consume();
            while (this.nextToken.text === '\'') {
                primes.push(prime);
                this.consume();
            }
            superscript = new ParseNode('ordgroup', primes, this.mode);
        } else {
            break;
        }
    }
    if (superscript || subscript) {
        return new ParseNode('supsub', {
            base: base,
            sup: superscript,
            sub: subscript
        }, this.mode);
    } else {
        return base;
    }
};
var sizeFuncs = [
    '\\tiny',
    '\\scriptsize',
    '\\footnotesize',
    '\\small',
    '\\normalsize',
    '\\large',
    '\\Large',
    '\\LARGE',
    '\\huge',
    '\\Huge'
];
var styleFuncs = [
    '\\displaystyle',
    '\\textstyle',
    '\\scriptstyle',
    '\\scriptscriptstyle'
];
Parser.prototype.parseImplicitGroup = function () {
    var start = this.parseSymbol();
    if (start == null) {
        return this.parseFunction();
    }
    var func = start.result;
    var body;
    if (func === '\\left') {
        var left = this.parseFunction(start);
        body = this.parseExpression(false);
        this.expect('\\right', false);
        var right = this.parseFunction();
        return new ParseNode('leftright', {
            body: body,
            left: left.value.value,
            right: right.value.value
        }, this.mode);
    } else if (func === '\\begin') {
        var begin = this.parseFunction(start);
        var envName = begin.value.name;
        if (!environments.hasOwnProperty(envName)) {
            throw new ParseError('No such environment: ' + envName, this.lexer, begin.value.namepos);
        }
        var env = environments[envName];
        var args = this.parseArguments('\\begin{' + envName + '}', env);
        var context = {
            mode: this.mode,
            envName: envName,
            parser: this,
            lexer: this.lexer,
            positions: args.pop()
        };
        var result = env.handler(context, args);
        this.expect('\\end', false);
        var end = this.parseFunction();
        if (end.value.name !== envName) {
            throw new ParseError('Mismatch: \\begin{' + envName + '} matched ' + 'by \\end{' + end.value.name + '}', this.lexer);
        }
        result.position = end.position;
        return result;
    } else if (utils.contains(sizeFuncs, func)) {
        body = this.parseExpression(false);
        return new ParseNode('sizing', {
            size: 'size' + (utils.indexOf(sizeFuncs, func) + 1),
            value: body
        }, this.mode);
    } else if (utils.contains(styleFuncs, func)) {
        body = this.parseExpression(true);
        return new ParseNode('styling', {
            style: func.slice(1, func.length - 5),
            value: body
        }, this.mode);
    } else {
        return this.parseFunction(start);
    }
};
Parser.prototype.parseFunction = function (baseGroup) {
    if (!baseGroup) {
        baseGroup = this.parseGroup();
    }
    if (baseGroup) {
        if (baseGroup.isFunction) {
            var func = baseGroup.result;
            var funcData = functions[func];
            if (this.mode === 'text' && !funcData.allowedInText) {
                throw new ParseError('Can\'t use function \'' + func + '\' in text mode', this.lexer, baseGroup.position);
            }
            var args = this.parseArguments(func, funcData);
            var result = this.callFunction(func, args, args.pop());
            return new ParseNode(result.type, result, this.mode);
        } else {
            return baseGroup.result;
        }
    } else {
        return null;
    }
};
Parser.prototype.callFunction = function (name, args, positions) {
    var context = {
        funcName: name,
        parser: this,
        lexer: this.lexer,
        positions: positions
    };
    return functions[name].handler(context, args);
};
Parser.prototype.parseArguments = function (func, funcData) {
    var totalArgs = funcData.numArgs + funcData.numOptionalArgs;
    if (totalArgs === 0) {
        return [[this.pos]];
    }
    var baseGreediness = funcData.greediness;
    var positions = [this.pos];
    var args = [];
    for (var i = 0; i < totalArgs; i++) {
        var argType = funcData.argTypes && funcData.argTypes[i];
        var arg;
        if (i < funcData.numOptionalArgs) {
            if (argType) {
                arg = this.parseSpecialGroup(argType, true);
            } else {
                arg = this.parseOptionalGroup();
            }
            if (!arg) {
                args.push(null);
                positions.push(this.pos);
                continue;
            }
        } else {
            if (argType) {
                arg = this.parseSpecialGroup(argType);
            } else {
                arg = this.parseGroup();
            }
            if (!arg) {
                if (!this.settings.throwOnError && this.nextToken.text[0] === '\\') {
                    arg = new ParseFuncOrArgument(this.handleUnsupportedCmd(this.nextToken.text), false);
                } else {
                    throw new ParseError('Expected group after \'' + func + '\'', this.lexer, this.pos);
                }
            }
        }
        var argNode;
        if (arg.isFunction) {
            var argGreediness = functions[arg.result].greediness;
            if (argGreediness > baseGreediness) {
                argNode = this.parseFunction(arg);
            } else {
                throw new ParseError('Got function \'' + arg.result + '\' as ' + 'argument to \'' + func + '\'', this.lexer, this.pos - 1);
            }
        } else {
            argNode = arg.result;
        }
        args.push(argNode);
        positions.push(this.pos);
    }
    args.push(positions);
    return args;
};
Parser.prototype.parseSpecialGroup = function (innerMode, optional) {
    var outerMode = this.mode;
    if (innerMode === 'original') {
        innerMode = outerMode;
    }
    if (innerMode === 'color' || innerMode === 'size') {
        var openBrace = this.nextToken;
        if (optional && openBrace.text !== '[') {
            return null;
        }
        this.mode = innerMode;
        this.expect(optional ? '[' : '{');
        var inner = this.nextToken;
        this.mode = outerMode;
        var data;
        if (innerMode === 'color') {
            data = inner.text;
        } else {
            data = inner.data;
        }
        this.consume();
        this.expect(optional ? ']' : '}');
        return new ParseFuncOrArgument(new ParseNode(innerMode, data, outerMode), false);
    } else if (innerMode === 'text') {
        var whitespace = this.lexer.lex(this.pos, 'whitespace');
        this.pos = whitespace.position;
    }
    this.mode = innerMode;
    this.nextToken = this.lexer.lex(this.pos, innerMode);
    var res;
    if (optional) {
        res = this.parseOptionalGroup();
    } else {
        res = this.parseGroup();
    }
    this.mode = outerMode;
    this.nextToken = this.lexer.lex(this.pos, outerMode);
    return res;
};
Parser.prototype.parseGroup = function () {
    if (this.nextToken.text === '{') {
        this.consume();
        var expression = this.parseExpression(false);
        this.expect('}');
        return new ParseFuncOrArgument(new ParseNode('ordgroup', expression, this.mode), false);
    } else {
        return this.parseSymbol();
    }
};
Parser.prototype.parseOptionalGroup = function () {
    if (this.nextToken.text === '[') {
        this.consume();
        var expression = this.parseExpression(false, ']');
        this.expect(']');
        return new ParseFuncOrArgument(new ParseNode('ordgroup', expression, this.mode), false);
    } else {
        return null;
    }
};
Parser.prototype.parseSymbol = function () {
    var nucleus = this.nextToken;
    if (functions[nucleus.text]) {
        this.consume();
        return new ParseFuncOrArgument(nucleus.text, true);
    } else if (symbols[this.mode][nucleus.text]) {
        this.consume();
        return new ParseFuncOrArgument(new ParseNode(symbols[this.mode][nucleus.text].group, nucleus.text, this.mode), false);
    } else {
        return null;
    }
};
Parser.prototype.ParseNode = ParseNode;
module.exports = Parser;
},{"./Lexer":16,"./ParseError":18,"./environments":28,"./functions":31,"./parseData":33,"./symbols":35,"./utils":36}],20:[function(require,module,exports){
function get(option, defaultValue) {
    return option === undefined ? defaultValue : option;
}
function Settings(options) {
    options = options || {};
    this.displayMode = get(options.displayMode, false);
    this.throwOnError = get(options.throwOnError, true);
    this.errorColor = get(options.errorColor, '#cc0000');
}
module.exports = Settings;
},{}],21:[function(require,module,exports){
function Style(id, size, multiplier, cramped) {
    this.id = id;
    this.size = size;
    this.cramped = cramped;
    this.sizeMultiplier = multiplier;
}
Style.prototype.sup = function () {
    return styles[sup[this.id]];
};
Style.prototype.sub = function () {
    return styles[sub[this.id]];
};
Style.prototype.fracNum = function () {
    return styles[fracNum[this.id]];
};
Style.prototype.fracDen = function () {
    return styles[fracDen[this.id]];
};
Style.prototype.cramp = function () {
    return styles[cramp[this.id]];
};
Style.prototype.cls = function () {
    return sizeNames[this.size] + (this.cramped ? ' cramped' : ' uncramped');
};
Style.prototype.reset = function () {
    return resetNames[this.size];
};
var D = 0;
var Dc = 1;
var T = 2;
var Tc = 3;
var S = 4;
var Sc = 5;
var SS = 6;
var SSc = 7;
var sizeNames = [
    'displaystyle textstyle',
    'textstyle',
    'scriptstyle',
    'scriptscriptstyle'
];
var resetNames = [
    'reset-textstyle',
    'reset-textstyle',
    'reset-scriptstyle',
    'reset-scriptscriptstyle'
];
var styles = [
    new Style(D, 0, 1, false),
    new Style(Dc, 0, 1, true),
    new Style(T, 1, 1, false),
    new Style(Tc, 1, 1, true),
    new Style(S, 2, 0.7, false),
    new Style(Sc, 2, 0.7, true),
    new Style(SS, 3, 0.5, false),
    new Style(SSc, 3, 0.5, true)
];
var sup = [
    S,
    Sc,
    S,
    Sc,
    SS,
    SSc,
    SS,
    SSc
];
var sub = [
    Sc,
    Sc,
    Sc,
    Sc,
    SSc,
    SSc,
    SSc,
    SSc
];
var fracNum = [
    T,
    Tc,
    S,
    Sc,
    SS,
    SSc,
    SS,
    SSc
];
var fracDen = [
    Tc,
    Tc,
    Sc,
    Sc,
    SSc,
    SSc,
    SSc,
    SSc
];
var cramp = [
    Dc,
    Dc,
    Tc,
    Tc,
    Sc,
    Sc,
    SSc,
    SSc
];
module.exports = {
    DISPLAY: styles[D],
    TEXT: styles[T],
    SCRIPT: styles[S],
    SCRIPTSCRIPT: styles[SS]
};
},{}],22:[function(require,module,exports){
var domTree = require('./domTree');
var fontMetrics = require('./fontMetrics');
var symbols = require('./symbols');
var utils = require('./utils');
var greekCapitals = [
    '\\Gamma',
    '\\Delta',
    '\\Theta',
    '\\Lambda',
    '\\Xi',
    '\\Pi',
    '\\Sigma',
    '\\Upsilon',
    '\\Phi',
    '\\Psi',
    '\\Omega'
];
var dotlessLetters = [
    'ı',
    'ȷ'
];
var makeSymbol = function (value, style, mode, color, classes) {
    if (symbols[mode][value] && symbols[mode][value].replace) {
        value = symbols[mode][value].replace;
    }
    var metrics = fontMetrics.getCharacterMetrics(value, style);
    var symbolNode;
    if (metrics) {
        symbolNode = new domTree.symbolNode(value, metrics.height, metrics.depth, metrics.italic, metrics.skew, classes);
    } else {
        typeof console !== 'undefined' && console.warn('No character metrics for \'' + value + '\' in style \'' + style + '\'');
        symbolNode = new domTree.symbolNode(value, 0, 0, 0, 0, classes);
    }
    if (color) {
        symbolNode.style.color = color;
    }
    return symbolNode;
};
var mathsym = function (value, mode, color, classes) {
    if (value === '\\' || symbols[mode][value].font === 'main') {
        return makeSymbol(value, 'Main-Regular', mode, color, classes);
    } else {
        return makeSymbol(value, 'AMS-Regular', mode, color, classes.concat(['amsrm']));
    }
};
var mathDefault = function (value, mode, color, classes, type) {
    if (type === 'mathord') {
        return mathit(value, mode, color, classes);
    } else if (type === 'textord') {
        return makeSymbol(value, 'Main-Regular', mode, color, classes.concat(['mathrm']));
    } else {
        throw new Error('unexpected type: ' + type + ' in mathDefault');
    }
};
var mathit = function (value, mode, color, classes) {
    if (/[0-9]/.test(value.charAt(0)) || utils.contains(dotlessLetters, value) || utils.contains(greekCapitals, value)) {
        return makeSymbol(value, 'Main-Italic', mode, color, classes.concat(['mainit']));
    } else {
        return makeSymbol(value, 'Math-Italic', mode, color, classes.concat(['mathit']));
    }
};
var makeOrd = function (group, options, type) {
    var mode = group.mode;
    var value = group.value;
    if (symbols[mode][value] && symbols[mode][value].replace) {
        value = symbols[mode][value].replace;
    }
    var classes = ['mord'];
    var color = options.getColor();
    var font = options.font;
    if (font) {
        if (font === 'mathit' || utils.contains(dotlessLetters, value)) {
            return mathit(value, mode, color, classes);
        } else {
            var fontName = fontMap[font].fontName;
            if (fontMetrics.getCharacterMetrics(value, fontName)) {
                return makeSymbol(value, fontName, mode, color, classes.concat([font]));
            } else {
                return mathDefault(value, mode, color, classes, type);
            }
        }
    } else {
        return mathDefault(value, mode, color, classes, type);
    }
};
var sizeElementFromChildren = function (elem) {
    var height = 0;
    var depth = 0;
    var maxFontSize = 0;
    if (elem.children) {
        for (var i = 0; i < elem.children.length; i++) {
            if (elem.children[i].height > height) {
                height = elem.children[i].height;
            }
            if (elem.children[i].depth > depth) {
                depth = elem.children[i].depth;
            }
            if (elem.children[i].maxFontSize > maxFontSize) {
                maxFontSize = elem.children[i].maxFontSize;
            }
        }
    }
    elem.height = height;
    elem.depth = depth;
    elem.maxFontSize = maxFontSize;
};
var makeSpan = function (classes, children, color) {
    var span = new domTree.span(classes, children);
    sizeElementFromChildren(span);
    if (color) {
        span.style.color = color;
    }
    return span;
};
var makeFragment = function (children) {
    var fragment = new domTree.documentFragment(children);
    sizeElementFromChildren(fragment);
    return fragment;
};
var makeFontSizer = function (options, fontSize) {
    var fontSizeInner = makeSpan([], [new domTree.symbolNode('\u200B')]);
    fontSizeInner.style.fontSize = fontSize / options.style.sizeMultiplier + 'em';
    var fontSizer = makeSpan([
        'fontsize-ensurer',
        'reset-' + options.size,
        'size5'
    ], [fontSizeInner]);
    return fontSizer;
};
var makeVList = function (children, positionType, positionData, options) {
    var depth;
    var currPos;
    var i;
    if (positionType === 'individualShift') {
        var oldChildren = children;
        children = [oldChildren[0]];
        depth = -oldChildren[0].shift - oldChildren[0].elem.depth;
        currPos = depth;
        for (i = 1; i < oldChildren.length; i++) {
            var diff = -oldChildren[i].shift - currPos - oldChildren[i].elem.depth;
            var size = diff - (oldChildren[i - 1].elem.height + oldChildren[i - 1].elem.depth);
            currPos = currPos + diff;
            children.push({
                type: 'kern',
                size: size
            });
            children.push(oldChildren[i]);
        }
    } else if (positionType === 'top') {
        var bottom = positionData;
        for (i = 0; i < children.length; i++) {
            if (children[i].type === 'kern') {
                bottom -= children[i].size;
            } else {
                bottom -= children[i].elem.height + children[i].elem.depth;
            }
        }
        depth = bottom;
    } else if (positionType === 'bottom') {
        depth = -positionData;
    } else if (positionType === 'shift') {
        depth = -children[0].elem.depth - positionData;
    } else if (positionType === 'firstBaseline') {
        depth = -children[0].elem.depth;
    } else {
        depth = 0;
    }
    var maxFontSize = 0;
    for (i = 0; i < children.length; i++) {
        if (children[i].type === 'elem') {
            maxFontSize = Math.max(maxFontSize, children[i].elem.maxFontSize);
        }
    }
    var fontSizer = makeFontSizer(options, maxFontSize);
    var realChildren = [];
    currPos = depth;
    for (i = 0; i < children.length; i++) {
        if (children[i].type === 'kern') {
            currPos += children[i].size;
        } else {
            var child = children[i].elem;
            var shift = -child.depth - currPos;
            currPos += child.height + child.depth;
            var childWrap = makeSpan([], [
                fontSizer,
                child
            ]);
            childWrap.height -= shift;
            childWrap.depth += shift;
            childWrap.style.top = shift + 'em';
            realChildren.push(childWrap);
        }
    }
    var baselineFix = makeSpan(['baseline-fix'], [
        fontSizer,
        new domTree.symbolNode('\u200B')
    ]);
    realChildren.push(baselineFix);
    var vlist = makeSpan(['vlist'], realChildren);
    vlist.height = Math.max(currPos, vlist.height);
    vlist.depth = Math.max(-depth, vlist.depth);
    return vlist;
};
var sizingMultiplier = {
    size1: 0.5,
    size2: 0.7,
    size3: 0.8,
    size4: 0.9,
    size5: 1,
    size6: 1.2,
    size7: 1.44,
    size8: 1.73,
    size9: 2.07,
    size10: 2.49
};
var spacingFunctions = {
    '\\qquad': {
        size: '2em',
        className: 'qquad'
    },
    '\\quad': {
        size: '1em',
        className: 'quad'
    },
    '\\enspace': {
        size: '0.5em',
        className: 'enspace'
    },
    '\\;': {
        size: '0.277778em',
        className: 'thickspace'
    },
    '\\:': {
        size: '0.22222em',
        className: 'mediumspace'
    },
    '\\,': {
        size: '0.16667em',
        className: 'thinspace'
    },
    '\\!': {
        size: '-0.16667em',
        className: 'negativethinspace'
    }
};
var fontMap = {
    'mathbf': {
        variant: 'bold',
        fontName: 'Main-Bold'
    },
    'mathrm': {
        variant: 'normal',
        fontName: 'Main-Regular'
    },
    'mathbb': {
        variant: 'double-struck',
        fontName: 'AMS-Regular'
    },
    'mathcal': {
        variant: 'script',
        fontName: 'Caligraphic-Regular'
    },
    'mathfrak': {
        variant: 'fraktur',
        fontName: 'Fraktur-Regular'
    },
    'mathscr': {
        variant: 'script',
        fontName: 'Script-Regular'
    },
    'mathsf': {
        variant: 'sans-serif',
        fontName: 'SansSerif-Regular'
    },
    'mathtt': {
        variant: 'monospace',
        fontName: 'Typewriter-Regular'
    }
};
module.exports = {
    fontMap: fontMap,
    makeSymbol: makeSymbol,
    mathsym: mathsym,
    makeSpan: makeSpan,
    makeFragment: makeFragment,
    makeVList: makeVList,
    makeOrd: makeOrd,
    sizingMultiplier: sizingMultiplier,
    spacingFunctions: spacingFunctions
};
},{"./domTree":27,"./fontMetrics":29,"./symbols":35,"./utils":36}],23:[function(require,module,exports){
var ParseError = require('./ParseError');
var Style = require('./Style');
var buildCommon = require('./buildCommon');
var delimiter = require('./delimiter');
var domTree = require('./domTree');
var fontMetrics = require('./fontMetrics');
var utils = require('./utils');
var makeSpan = buildCommon.makeSpan;
var buildExpression = function (expression, options, prev) {
    var groups = [];
    for (var i = 0; i < expression.length; i++) {
        var group = expression[i];
        groups.push(buildGroup(group, options, prev));
        prev = group;
    }
    return groups;
};
var groupToType = {
    mathord: 'mord',
    textord: 'mord',
    bin: 'mbin',
    rel: 'mrel',
    text: 'mord',
    open: 'mopen',
    close: 'mclose',
    inner: 'minner',
    genfrac: 'mord',
    array: 'mord',
    spacing: 'mord',
    punct: 'mpunct',
    ordgroup: 'mord',
    op: 'mop',
    katex: 'mord',
    overline: 'mord',
    underline: 'mord',
    rule: 'mord',
    leftright: 'minner',
    sqrt: 'mord',
    accent: 'mord'
};
var getTypeOfGroup = function (group) {
    if (group == null) {
        return groupToType.mathord;
    } else if (group.type === 'supsub') {
        return getTypeOfGroup(group.value.base);
    } else if (group.type === 'llap' || group.type === 'rlap') {
        return getTypeOfGroup(group.value);
    } else if (group.type === 'color') {
        return getTypeOfGroup(group.value.value);
    } else if (group.type === 'sizing') {
        return getTypeOfGroup(group.value.value);
    } else if (group.type === 'styling') {
        return getTypeOfGroup(group.value.value);
    } else if (group.type === 'delimsizing') {
        return groupToType[group.value.delimType];
    } else {
        return groupToType[group.type];
    }
};
var shouldHandleSupSub = function (group, options) {
    if (!group) {
        return false;
    } else if (group.type === 'op') {
        return group.value.limits && (options.style.size === Style.DISPLAY.size || group.value.alwaysHandleSupSub);
    } else if (group.type === 'accent') {
        return isCharacterBox(group.value.base);
    } else {
        return null;
    }
};
var getBaseElem = function (group) {
    if (!group) {
        return false;
    } else if (group.type === 'ordgroup') {
        if (group.value.length === 1) {
            return getBaseElem(group.value[0]);
        } else {
            return group;
        }
    } else if (group.type === 'color') {
        if (group.value.value.length === 1) {
            return getBaseElem(group.value.value[0]);
        } else {
            return group;
        }
    } else {
        return group;
    }
};
var isCharacterBox = function (group) {
    var baseElem = getBaseElem(group);
    return baseElem.type === 'mathord' || baseElem.type === 'textord' || baseElem.type === 'bin' || baseElem.type === 'rel' || baseElem.type === 'inner' || baseElem.type === 'open' || baseElem.type === 'close' || baseElem.type === 'punct';
};
var makeNullDelimiter = function (options) {
    return makeSpan([
        'sizing',
        'reset-' + options.size,
        'size5',
        options.style.reset(),
        Style.TEXT.cls(),
        'nulldelimiter'
    ]);
};
var groupTypes = {};
groupTypes.mathord = function (group, options, prev) {
    return buildCommon.makeOrd(group, options, 'mathord');
};
groupTypes.textord = function (group, options, prev) {
    return buildCommon.makeOrd(group, options, 'textord');
};
groupTypes.bin = function (group, options, prev) {
    var className = 'mbin';
    var prevAtom = prev;
    while (prevAtom && prevAtom.type === 'color') {
        var atoms = prevAtom.value.value;
        prevAtom = atoms[atoms.length - 1];
    }
    if (!prev || utils.contains([
            'mbin',
            'mopen',
            'mrel',
            'mop',
            'mpunct'
        ], getTypeOfGroup(prevAtom))) {
        group.type = 'textord';
        className = 'mord';
    }
    return buildCommon.mathsym(group.value, group.mode, options.getColor(), [className]);
};
groupTypes.rel = function (group, options, prev) {
    return buildCommon.mathsym(group.value, group.mode, options.getColor(), ['mrel']);
};
groupTypes.open = function (group, options, prev) {
    return buildCommon.mathsym(group.value, group.mode, options.getColor(), ['mopen']);
};
groupTypes.close = function (group, options, prev) {
    return buildCommon.mathsym(group.value, group.mode, options.getColor(), ['mclose']);
};
groupTypes.inner = function (group, options, prev) {
    return buildCommon.mathsym(group.value, group.mode, options.getColor(), ['minner']);
};
groupTypes.punct = function (group, options, prev) {
    return buildCommon.mathsym(group.value, group.mode, options.getColor(), ['mpunct']);
};
groupTypes.ordgroup = function (group, options, prev) {
    return makeSpan([
        'mord',
        options.style.cls()
    ], buildExpression(group.value, options.reset()));
};
groupTypes.text = function (group, options, prev) {
    return makeSpan([
        'text',
        'mord',
        options.style.cls()
    ], buildExpression(group.value.body, options.reset()));
};
groupTypes.color = function (group, options, prev) {
    var elements = buildExpression(group.value.value, options.withColor(group.value.color), prev);
    return new buildCommon.makeFragment(elements);
};
groupTypes.supsub = function (group, options, prev) {
    if (shouldHandleSupSub(group.value.base, options)) {
        return groupTypes[group.value.base.type](group, options, prev);
    }
    var base = buildGroup(group.value.base, options.reset());
    var supmid;
    var submid;
    var sup;
    var sub;
    if (group.value.sup) {
        sup = buildGroup(group.value.sup, options.withStyle(options.style.sup()));
        supmid = makeSpan([
            options.style.reset(),
            options.style.sup().cls()
        ], [sup]);
    }
    if (group.value.sub) {
        sub = buildGroup(group.value.sub, options.withStyle(options.style.sub()));
        submid = makeSpan([
            options.style.reset(),
            options.style.sub().cls()
        ], [sub]);
    }
    var supShift;
    var subShift;
    if (isCharacterBox(group.value.base)) {
        supShift = 0;
        subShift = 0;
    } else {
        supShift = base.height - fontMetrics.metrics.supDrop;
        subShift = base.depth + fontMetrics.metrics.subDrop;
    }
    var minSupShift;
    if (options.style === Style.DISPLAY) {
        minSupShift = fontMetrics.metrics.sup1;
    } else if (options.style.cramped) {
        minSupShift = fontMetrics.metrics.sup3;
    } else {
        minSupShift = fontMetrics.metrics.sup2;
    }
    var multiplier = Style.TEXT.sizeMultiplier * options.style.sizeMultiplier;
    var scriptspace = 0.5 / fontMetrics.metrics.ptPerEm / multiplier + 'em';
    var supsub;
    if (!group.value.sup) {
        subShift = Math.max(subShift, fontMetrics.metrics.sub1, sub.height - 0.8 * fontMetrics.metrics.xHeight);
        supsub = buildCommon.makeVList([{
                type: 'elem',
                elem: submid
            }], 'shift', subShift, options);
        supsub.children[0].style.marginRight = scriptspace;
        if (base instanceof domTree.symbolNode) {
            supsub.children[0].style.marginLeft = -base.italic + 'em';
        }
    } else if (!group.value.sub) {
        supShift = Math.max(supShift, minSupShift, sup.depth + 0.25 * fontMetrics.metrics.xHeight);
        supsub = buildCommon.makeVList([{
                type: 'elem',
                elem: supmid
            }], 'shift', -supShift, options);
        supsub.children[0].style.marginRight = scriptspace;
    } else {
        supShift = Math.max(supShift, minSupShift, sup.depth + 0.25 * fontMetrics.metrics.xHeight);
        subShift = Math.max(subShift, fontMetrics.metrics.sub2);
        var ruleWidth = fontMetrics.metrics.defaultRuleThickness;
        if (supShift - sup.depth - (sub.height - subShift) < 4 * ruleWidth) {
            subShift = 4 * ruleWidth - (supShift - sup.depth) + sub.height;
            var psi = 0.8 * fontMetrics.metrics.xHeight - (supShift - sup.depth);
            if (psi > 0) {
                supShift += psi;
                subShift -= psi;
            }
        }
        supsub = buildCommon.makeVList([
            {
                type: 'elem',
                elem: submid,
                shift: subShift
            },
            {
                type: 'elem',
                elem: supmid,
                shift: -supShift
            }
        ], 'individualShift', null, options);
        if (base instanceof domTree.symbolNode) {
            supsub.children[0].style.marginLeft = -base.italic + 'em';
        }
        supsub.children[0].style.marginRight = scriptspace;
        supsub.children[1].style.marginRight = scriptspace;
    }
    return makeSpan([getTypeOfGroup(group.value.base)], [
        base,
        supsub
    ]);
};
groupTypes.genfrac = function (group, options, prev) {
    var fstyle = options.style;
    if (group.value.size === 'display') {
        fstyle = Style.DISPLAY;
    } else if (group.value.size === 'text') {
        fstyle = Style.TEXT;
    }
    var nstyle = fstyle.fracNum();
    var dstyle = fstyle.fracDen();
    var numer = buildGroup(group.value.numer, options.withStyle(nstyle));
    var numerreset = makeSpan([
        fstyle.reset(),
        nstyle.cls()
    ], [numer]);
    var denom = buildGroup(group.value.denom, options.withStyle(dstyle));
    var denomreset = makeSpan([
        fstyle.reset(),
        dstyle.cls()
    ], [denom]);
    var ruleWidth;
    if (group.value.hasBarLine) {
        ruleWidth = fontMetrics.metrics.defaultRuleThickness / options.style.sizeMultiplier;
    } else {
        ruleWidth = 0;
    }
    var numShift;
    var clearance;
    var denomShift;
    if (fstyle.size === Style.DISPLAY.size) {
        numShift = fontMetrics.metrics.num1;
        if (ruleWidth > 0) {
            clearance = 3 * ruleWidth;
        } else {
            clearance = 7 * fontMetrics.metrics.defaultRuleThickness;
        }
        denomShift = fontMetrics.metrics.denom1;
    } else {
        if (ruleWidth > 0) {
            numShift = fontMetrics.metrics.num2;
            clearance = ruleWidth;
        } else {
            numShift = fontMetrics.metrics.num3;
            clearance = 3 * fontMetrics.metrics.defaultRuleThickness;
        }
        denomShift = fontMetrics.metrics.denom2;
    }
    var frac;
    if (ruleWidth === 0) {
        var candiateClearance = numShift - numer.depth - (denom.height - denomShift);
        if (candiateClearance < clearance) {
            numShift += 0.5 * (clearance - candiateClearance);
            denomShift += 0.5 * (clearance - candiateClearance);
        }
        frac = buildCommon.makeVList([
            {
                type: 'elem',
                elem: denomreset,
                shift: denomShift
            },
            {
                type: 'elem',
                elem: numerreset,
                shift: -numShift
            }
        ], 'individualShift', null, options);
    } else {
        var axisHeight = fontMetrics.metrics.axisHeight;
        if (numShift - numer.depth - (axisHeight + 0.5 * ruleWidth) < clearance) {
            numShift += clearance - (numShift - numer.depth - (axisHeight + 0.5 * ruleWidth));
        }
        if (axisHeight - 0.5 * ruleWidth - (denom.height - denomShift) < clearance) {
            denomShift += clearance - (axisHeight - 0.5 * ruleWidth - (denom.height - denomShift));
        }
        var mid = makeSpan([
            options.style.reset(),
            Style.TEXT.cls(),
            'frac-line'
        ]);
        mid.height = ruleWidth;
        var midShift = -(axisHeight - 0.5 * ruleWidth);
        frac = buildCommon.makeVList([
            {
                type: 'elem',
                elem: denomreset,
                shift: denomShift
            },
            {
                type: 'elem',
                elem: mid,
                shift: midShift
            },
            {
                type: 'elem',
                elem: numerreset,
                shift: -numShift
            }
        ], 'individualShift', null, options);
    }
    frac.height *= fstyle.sizeMultiplier / options.style.sizeMultiplier;
    frac.depth *= fstyle.sizeMultiplier / options.style.sizeMultiplier;
    var delimSize;
    if (fstyle.size === Style.DISPLAY.size) {
        delimSize = fontMetrics.metrics.delim1;
    } else {
        delimSize = fontMetrics.metrics.getDelim2(fstyle);
    }
    var leftDelim;
    var rightDelim;
    if (group.value.leftDelim == null) {
        leftDelim = makeNullDelimiter(options);
    } else {
        leftDelim = delimiter.customSizedDelim(group.value.leftDelim, delimSize, true, options.withStyle(fstyle), group.mode);
    }
    if (group.value.rightDelim == null) {
        rightDelim = makeNullDelimiter(options);
    } else {
        rightDelim = delimiter.customSizedDelim(group.value.rightDelim, delimSize, true, options.withStyle(fstyle), group.mode);
    }
    return makeSpan([
        'mord',
        options.style.reset(),
        fstyle.cls()
    ], [
        leftDelim,
        makeSpan(['mfrac'], [frac]),
        rightDelim
    ], options.getColor());
};
groupTypes.array = function (group, options, prev) {
    var r;
    var c;
    var nr = group.value.body.length;
    var nc = 0;
    var body = new Array(nr);
    var pt = 1 / fontMetrics.metrics.ptPerEm;
    var arraycolsep = 5 * pt;
    var baselineskip = 12 * pt;
    var arraystretch = utils.deflt(group.value.arraystretch, 1);
    var arrayskip = arraystretch * baselineskip;
    var arstrutHeight = 0.7 * arrayskip;
    var arstrutDepth = 0.3 * arrayskip;
    var totalHeight = 0;
    for (r = 0; r < group.value.body.length; ++r) {
        var inrow = group.value.body[r];
        var height = arstrutHeight;
        var depth = arstrutDepth;
        if (nc < inrow.length) {
            nc = inrow.length;
        }
        var outrow = new Array(inrow.length);
        for (c = 0; c < inrow.length; ++c) {
            var elt = buildGroup(inrow[c], options);
            if (depth < elt.depth) {
                depth = elt.depth;
            }
            if (height < elt.height) {
                height = elt.height;
            }
            outrow[c] = elt;
        }
        var gap = 0;
        if (group.value.rowGaps[r]) {
            gap = group.value.rowGaps[r].value;
            switch (gap.unit) {
            case 'em':
                gap = gap.number;
                break;
            case 'ex':
                gap = gap.number * fontMetrics.metrics.emPerEx;
                break;
            default:
                console.error('Can\'t handle unit ' + gap.unit);
                gap = 0;
            }
            if (gap > 0) {
                gap += arstrutDepth;
                if (depth < gap) {
                    depth = gap;
                }
                gap = 0;
            }
        }
        outrow.height = height;
        outrow.depth = depth;
        totalHeight += height;
        outrow.pos = totalHeight;
        totalHeight += depth + gap;
        body[r] = outrow;
    }
    var offset = totalHeight / 2 + fontMetrics.metrics.axisHeight;
    var colDescriptions = group.value.cols || [];
    var cols = [];
    var colSep;
    var colDescrNum;
    for (c = 0, colDescrNum = 0; c < nc || colDescrNum < colDescriptions.length; ++c, ++colDescrNum) {
        var colDescr = colDescriptions[colDescrNum] || {};
        var firstSeparator = true;
        while (colDescr.type === 'separator') {
            if (!firstSeparator) {
                colSep = makeSpan(['arraycolsep'], []);
                colSep.style.width = fontMetrics.metrics.doubleRuleSep + 'em';
                cols.push(colSep);
            }
            if (colDescr.separator === '|') {
                var separator = makeSpan(['vertical-separator'], []);
                separator.style.height = totalHeight + 'em';
                separator.style.verticalAlign = -(totalHeight - offset) + 'em';
                cols.push(separator);
            } else {
                throw new ParseError('Invalid separator type: ' + colDescr.separator);
            }
            colDescrNum++;
            colDescr = colDescriptions[colDescrNum] || {};
            firstSeparator = false;
        }
        if (c >= nc) {
            continue;
        }
        var sepwidth;
        if (c > 0 || group.value.hskipBeforeAndAfter) {
            sepwidth = utils.deflt(colDescr.pregap, arraycolsep);
            if (sepwidth !== 0) {
                colSep = makeSpan(['arraycolsep'], []);
                colSep.style.width = sepwidth + 'em';
                cols.push(colSep);
            }
        }
        var col = [];
        for (r = 0; r < nr; ++r) {
            var row = body[r];
            var elem = row[c];
            if (!elem) {
                continue;
            }
            var shift = row.pos - offset;
            elem.depth = row.depth;
            elem.height = row.height;
            col.push({
                type: 'elem',
                elem: elem,
                shift: shift
            });
        }
        col = buildCommon.makeVList(col, 'individualShift', null, options);
        col = makeSpan(['col-align-' + (colDescr.align || 'c')], [col]);
        cols.push(col);
        if (c < nc - 1 || group.value.hskipBeforeAndAfter) {
            sepwidth = utils.deflt(colDescr.postgap, arraycolsep);
            if (sepwidth !== 0) {
                colSep = makeSpan(['arraycolsep'], []);
                colSep.style.width = sepwidth + 'em';
                cols.push(colSep);
            }
        }
    }
    body = makeSpan(['mtable'], cols);
    return makeSpan(['mord'], [body], options.getColor());
};
groupTypes.spacing = function (group, options, prev) {
    if (group.value === '\\ ' || group.value === '\\space' || group.value === ' ' || group.value === '~') {
        return makeSpan([
            'mord',
            'mspace'
        ], [buildCommon.mathsym(group.value, group.mode)]);
    } else {
        return makeSpan([
            'mord',
            'mspace',
            buildCommon.spacingFunctions[group.value].className
        ]);
    }
};
groupTypes.llap = function (group, options, prev) {
    var inner = makeSpan(['inner'], [buildGroup(group.value.body, options.reset())]);
    var fix = makeSpan(['fix'], []);
    return makeSpan([
        'llap',
        options.style.cls()
    ], [
        inner,
        fix
    ]);
};
groupTypes.rlap = function (group, options, prev) {
    var inner = makeSpan(['inner'], [buildGroup(group.value.body, options.reset())]);
    var fix = makeSpan(['fix'], []);
    return makeSpan([
        'rlap',
        options.style.cls()
    ], [
        inner,
        fix
    ]);
};
groupTypes.op = function (group, options, prev) {
    var supGroup;
    var subGroup;
    var hasLimits = false;
    if (group.type === 'supsub') {
        supGroup = group.value.sup;
        subGroup = group.value.sub;
        group = group.value.base;
        hasLimits = true;
    }
    var noSuccessor = ['\\smallint'];
    var large = false;
    if (options.style.size === Style.DISPLAY.size && group.value.symbol && !utils.contains(noSuccessor, group.value.body)) {
        large = true;
    }
    var base;
    var baseShift = 0;
    var slant = 0;
    if (group.value.symbol) {
        var style = large ? 'Size2-Regular' : 'Size1-Regular';
        base = buildCommon.makeSymbol(group.value.body, style, 'math', options.getColor(), [
            'op-symbol',
            large ? 'large-op' : 'small-op',
            'mop'
        ]);
        baseShift = (base.height - base.depth) / 2 - fontMetrics.metrics.axisHeight * options.style.sizeMultiplier;
        slant = base.italic;
    } else {
        var output = [];
        for (var i = 1; i < group.value.body.length; i++) {
            output.push(buildCommon.mathsym(group.value.body[i], group.mode));
        }
        base = makeSpan(['mop'], output, options.getColor());
    }
    if (hasLimits) {
        base = makeSpan([], [base]);
        var supmid;
        var supKern;
        var submid;
        var subKern;
        if (supGroup) {
            var sup = buildGroup(supGroup, options.withStyle(options.style.sup()));
            supmid = makeSpan([
                options.style.reset(),
                options.style.sup().cls()
            ], [sup]);
            supKern = Math.max(fontMetrics.metrics.bigOpSpacing1, fontMetrics.metrics.bigOpSpacing3 - sup.depth);
        }
        if (subGroup) {
            var sub = buildGroup(subGroup, options.withStyle(options.style.sub()));
            submid = makeSpan([
                options.style.reset(),
                options.style.sub().cls()
            ], [sub]);
            subKern = Math.max(fontMetrics.metrics.bigOpSpacing2, fontMetrics.metrics.bigOpSpacing4 - sub.height);
        }
        var finalGroup;
        var top;
        var bottom;
        if (!supGroup) {
            top = base.height - baseShift;
            finalGroup = buildCommon.makeVList([
                {
                    type: 'kern',
                    size: fontMetrics.metrics.bigOpSpacing5
                },
                {
                    type: 'elem',
                    elem: submid
                },
                {
                    type: 'kern',
                    size: subKern
                },
                {
                    type: 'elem',
                    elem: base
                }
            ], 'top', top, options);
            finalGroup.children[0].style.marginLeft = -slant + 'em';
        } else if (!subGroup) {
            bottom = base.depth + baseShift;
            finalGroup = buildCommon.makeVList([
                {
                    type: 'elem',
                    elem: base
                },
                {
                    type: 'kern',
                    size: supKern
                },
                {
                    type: 'elem',
                    elem: supmid
                },
                {
                    type: 'kern',
                    size: fontMetrics.metrics.bigOpSpacing5
                }
            ], 'bottom', bottom, options);
            finalGroup.children[1].style.marginLeft = slant + 'em';
        } else if (!supGroup && !subGroup) {
            return base;
        } else {
            bottom = fontMetrics.metrics.bigOpSpacing5 + submid.height + submid.depth + subKern + base.depth + baseShift;
            finalGroup = buildCommon.makeVList([
                {
                    type: 'kern',
                    size: fontMetrics.metrics.bigOpSpacing5
                },
                {
                    type: 'elem',
                    elem: submid
                },
                {
                    type: 'kern',
                    size: subKern
                },
                {
                    type: 'elem',
                    elem: base
                },
                {
                    type: 'kern',
                    size: supKern
                },
                {
                    type: 'elem',
                    elem: supmid
                },
                {
                    type: 'kern',
                    size: fontMetrics.metrics.bigOpSpacing5
                }
            ], 'bottom', bottom, options);
            finalGroup.children[0].style.marginLeft = -slant + 'em';
            finalGroup.children[2].style.marginLeft = slant + 'em';
        }
        return makeSpan([
            'mop',
            'op-limits'
        ], [finalGroup]);
    } else {
        if (group.value.symbol) {
            base.style.top = baseShift + 'em';
        }
        return base;
    }
};
groupTypes.katex = function (group, options, prev) {
    var k = makeSpan(['k'], [buildCommon.mathsym('K', group.mode)]);
    var a = makeSpan(['a'], [buildCommon.mathsym('A', group.mode)]);
    a.height = (a.height + 0.2) * 0.75;
    a.depth = (a.height - 0.2) * 0.75;
    var t = makeSpan(['t'], [buildCommon.mathsym('T', group.mode)]);
    var e = makeSpan(['e'], [buildCommon.mathsym('E', group.mode)]);
    e.height = e.height - 0.2155;
    e.depth = e.depth + 0.2155;
    var x = makeSpan(['x'], [buildCommon.mathsym('X', group.mode)]);
    return makeSpan([
        'katex-logo',
        'mord'
    ], [
        k,
        a,
        t,
        e,
        x
    ], options.getColor());
};
groupTypes.overline = function (group, options, prev) {
    var innerGroup = buildGroup(group.value.body, options.withStyle(options.style.cramp()));
    var ruleWidth = fontMetrics.metrics.defaultRuleThickness / options.style.sizeMultiplier;
    var line = makeSpan([
        options.style.reset(),
        Style.TEXT.cls(),
        'overline-line'
    ]);
    line.height = ruleWidth;
    line.maxFontSize = 1;
    var vlist = buildCommon.makeVList([
        {
            type: 'elem',
            elem: innerGroup
        },
        {
            type: 'kern',
            size: 3 * ruleWidth
        },
        {
            type: 'elem',
            elem: line
        },
        {
            type: 'kern',
            size: ruleWidth
        }
    ], 'firstBaseline', null, options);
    return makeSpan([
        'overline',
        'mord'
    ], [vlist], options.getColor());
};
groupTypes.underline = function (group, options, prev) {
    var innerGroup = buildGroup(group.value.body, options);
    var ruleWidth = fontMetrics.metrics.defaultRuleThickness / options.style.sizeMultiplier;
    var line = makeSpan([
        options.style.reset(),
        Style.TEXT.cls(),
        'underline-line'
    ]);
    line.height = ruleWidth;
    line.maxFontSize = 1;
    var vlist = buildCommon.makeVList([
        {
            type: 'kern',
            size: ruleWidth
        },
        {
            type: 'elem',
            elem: line
        },
        {
            type: 'kern',
            size: 3 * ruleWidth
        },
        {
            type: 'elem',
            elem: innerGroup
        }
    ], 'top', innerGroup.height, options);
    return makeSpan([
        'underline',
        'mord'
    ], [vlist], options.getColor());
};
groupTypes.sqrt = function (group, options, prev) {
    var inner = buildGroup(group.value.body, options.withStyle(options.style.cramp()));
    var ruleWidth = fontMetrics.metrics.defaultRuleThickness / options.style.sizeMultiplier;
    var line = makeSpan([
        options.style.reset(),
        Style.TEXT.cls(),
        'sqrt-line'
    ], [], options.getColor());
    line.height = ruleWidth;
    line.maxFontSize = 1;
    var phi = ruleWidth;
    if (options.style.id < Style.TEXT.id) {
        phi = fontMetrics.metrics.xHeight;
    }
    var lineClearance = ruleWidth + phi / 4;
    var innerHeight = (inner.height + inner.depth) * options.style.sizeMultiplier;
    var minDelimiterHeight = innerHeight + lineClearance + ruleWidth;
    var delim = makeSpan(['sqrt-sign'], [delimiter.customSizedDelim('\\surd', minDelimiterHeight, false, options, group.mode)], options.getColor());
    var delimDepth = delim.height + delim.depth - ruleWidth;
    if (delimDepth > inner.height + inner.depth + lineClearance) {
        lineClearance = (lineClearance + delimDepth - inner.height - inner.depth) / 2;
    }
    var delimShift = -(inner.height + lineClearance + ruleWidth) + delim.height;
    delim.style.top = delimShift + 'em';
    delim.height -= delimShift;
    delim.depth += delimShift;
    var body;
    if (inner.height === 0 && inner.depth === 0) {
        body = makeSpan();
    } else {
        body = buildCommon.makeVList([
            {
                type: 'elem',
                elem: inner
            },
            {
                type: 'kern',
                size: lineClearance
            },
            {
                type: 'elem',
                elem: line
            },
            {
                type: 'kern',
                size: ruleWidth
            }
        ], 'firstBaseline', null, options);
    }
    if (!group.value.index) {
        return makeSpan([
            'sqrt',
            'mord'
        ], [
            delim,
            body
        ]);
    } else {
        var root = buildGroup(group.value.index, options.withStyle(Style.SCRIPTSCRIPT));
        var rootWrap = makeSpan([
            options.style.reset(),
            Style.SCRIPTSCRIPT.cls()
        ], [root]);
        var innerRootHeight = Math.max(delim.height, body.height);
        var innerRootDepth = Math.max(delim.depth, body.depth);
        var toShift = 0.6 * (innerRootHeight - innerRootDepth);
        var rootVList = buildCommon.makeVList([{
                type: 'elem',
                elem: rootWrap
            }], 'shift', -toShift, options);
        var rootVListWrap = makeSpan(['root'], [rootVList]);
        return makeSpan([
            'sqrt',
            'mord'
        ], [
            rootVListWrap,
            delim,
            body
        ]);
    }
};
groupTypes.sizing = function (group, options, prev) {
    var inner = buildExpression(group.value.value, options.withSize(group.value.size), prev);
    var span = makeSpan(['mord'], [makeSpan([
            'sizing',
            'reset-' + options.size,
            group.value.size,
            options.style.cls()
        ], inner)]);
    var fontSize = buildCommon.sizingMultiplier[group.value.size];
    span.maxFontSize = fontSize * options.style.sizeMultiplier;
    return span;
};
groupTypes.styling = function (group, options, prev) {
    var style = {
        'display': Style.DISPLAY,
        'text': Style.TEXT,
        'script': Style.SCRIPT,
        'scriptscript': Style.SCRIPTSCRIPT
    };
    var newStyle = style[group.value.style];
    var inner = buildExpression(group.value.value, options.withStyle(newStyle), prev);
    return makeSpan([
        options.style.reset(),
        newStyle.cls()
    ], inner);
};
groupTypes.font = function (group, options, prev) {
    var font = group.value.font;
    return buildGroup(group.value.body, options.withFont(font), prev);
};
groupTypes.delimsizing = function (group, options, prev) {
    var delim = group.value.value;
    if (delim === '.') {
        return makeSpan([groupToType[group.value.delimType]]);
    }
    return makeSpan([groupToType[group.value.delimType]], [delimiter.sizedDelim(delim, group.value.size, options, group.mode)]);
};
groupTypes.leftright = function (group, options, prev) {
    var inner = buildExpression(group.value.body, options.reset());
    var innerHeight = 0;
    var innerDepth = 0;
    for (var i = 0; i < inner.length; i++) {
        innerHeight = Math.max(inner[i].height, innerHeight);
        innerDepth = Math.max(inner[i].depth, innerDepth);
    }
    innerHeight *= options.style.sizeMultiplier;
    innerDepth *= options.style.sizeMultiplier;
    var leftDelim;
    if (group.value.left === '.') {
        leftDelim = makeNullDelimiter(options);
    } else {
        leftDelim = delimiter.leftRightDelim(group.value.left, innerHeight, innerDepth, options, group.mode);
    }
    inner.unshift(leftDelim);
    var rightDelim;
    if (group.value.right === '.') {
        rightDelim = makeNullDelimiter(options);
    } else {
        rightDelim = delimiter.leftRightDelim(group.value.right, innerHeight, innerDepth, options, group.mode);
    }
    inner.push(rightDelim);
    return makeSpan([
        'minner',
        options.style.cls()
    ], inner, options.getColor());
};
groupTypes.rule = function (group, options, prev) {
    var rule = makeSpan([
        'mord',
        'rule'
    ], [], options.getColor());
    var shift = 0;
    if (group.value.shift) {
        shift = group.value.shift.number;
        if (group.value.shift.unit === 'ex') {
            shift *= fontMetrics.metrics.xHeight;
        }
    }
    var width = group.value.width.number;
    if (group.value.width.unit === 'ex') {
        width *= fontMetrics.metrics.xHeight;
    }
    var height = group.value.height.number;
    if (group.value.height.unit === 'ex') {
        height *= fontMetrics.metrics.xHeight;
    }
    shift /= options.style.sizeMultiplier;
    width /= options.style.sizeMultiplier;
    height /= options.style.sizeMultiplier;
    rule.style.borderRightWidth = width + 'em';
    rule.style.borderTopWidth = height + 'em';
    rule.style.bottom = shift + 'em';
    rule.width = width;
    rule.height = height + shift;
    rule.depth = -shift;
    return rule;
};
groupTypes.accent = function (group, options, prev) {
    var base = group.value.base;
    var supsubGroup;
    if (group.type === 'supsub') {
        var supsub = group;
        group = supsub.value.base;
        base = group.value.base;
        supsub.value.base = base;
        supsubGroup = buildGroup(supsub, options.reset(), prev);
    }
    var body = buildGroup(base, options.withStyle(options.style.cramp()));
    var skew;
    if (isCharacterBox(base)) {
        var baseChar = getBaseElem(base);
        var baseGroup = buildGroup(baseChar, options.withStyle(options.style.cramp()));
        skew = baseGroup.skew;
    } else {
        skew = 0;
    }
    var clearance = Math.min(body.height, fontMetrics.metrics.xHeight);
    var accent = buildCommon.makeSymbol(group.value.accent, 'Main-Regular', 'math', options.getColor());
    accent.italic = 0;
    var vecClass = group.value.accent === '\\vec' ? 'accent-vec' : null;
    var accentBody = makeSpan([
        'accent-body',
        vecClass
    ], [makeSpan([], [accent])]);
    accentBody = buildCommon.makeVList([
        {
            type: 'elem',
            elem: body
        },
        {
            type: 'kern',
            size: -clearance
        },
        {
            type: 'elem',
            elem: accentBody
        }
    ], 'firstBaseline', null, options);
    accentBody.children[1].style.marginLeft = 2 * skew + 'em';
    var accentWrap = makeSpan([
        'mord',
        'accent'
    ], [accentBody]);
    if (supsubGroup) {
        supsubGroup.children[0] = accentWrap;
        supsubGroup.height = Math.max(accentWrap.height, supsubGroup.height);
        supsubGroup.classes[0] = 'mord';
        return supsubGroup;
    } else {
        return accentWrap;
    }
};
groupTypes.phantom = function (group, options, prev) {
    var elements = buildExpression(group.value.value, options.withPhantom(), prev);
    return new buildCommon.makeFragment(elements);
};
var buildGroup = function (group, options, prev) {
    if (!group) {
        return makeSpan();
    }
    if (groupTypes[group.type]) {
        var groupNode = groupTypes[group.type](group, options, prev);
        var multiplier;
        if (options.style !== options.parentStyle) {
            multiplier = options.style.sizeMultiplier / options.parentStyle.sizeMultiplier;
            groupNode.height *= multiplier;
            groupNode.depth *= multiplier;
        }
        if (options.size !== options.parentSize) {
            multiplier = buildCommon.sizingMultiplier[options.size] / buildCommon.sizingMultiplier[options.parentSize];
            groupNode.height *= multiplier;
            groupNode.depth *= multiplier;
        }
        return groupNode;
    } else {
        throw new ParseError('Got group of unknown type: \'' + group.type + '\'');
    }
};
var buildHTML = function (tree, options) {
    tree = JSON.parse(JSON.stringify(tree));
    var expression = buildExpression(tree, options);
    var body = makeSpan([
        'base',
        options.style.cls()
    ], expression);
    var topStrut = makeSpan(['strut']);
    var bottomStrut = makeSpan([
        'strut',
        'bottom'
    ]);
    topStrut.style.height = body.height + 'em';
    bottomStrut.style.height = body.height + body.depth + 'em';
    bottomStrut.style.verticalAlign = -body.depth + 'em';
    var htmlNode = makeSpan(['katex-html'], [
        topStrut,
        bottomStrut,
        body
    ]);
    htmlNode.setAttribute('aria-hidden', 'true');
    return htmlNode;
};
module.exports = buildHTML;
},{"./ParseError":18,"./Style":21,"./buildCommon":22,"./delimiter":26,"./domTree":27,"./fontMetrics":29,"./utils":36}],24:[function(require,module,exports){
var buildCommon = require('./buildCommon');
var fontMetrics = require('./fontMetrics');
var mathMLTree = require('./mathMLTree');
var ParseError = require('./ParseError');
var symbols = require('./symbols');
var utils = require('./utils');
var makeSpan = buildCommon.makeSpan;
var fontMap = buildCommon.fontMap;
var makeText = function (text, mode) {
    if (symbols[mode][text] && symbols[mode][text].replace) {
        text = symbols[mode][text].replace;
    }
    return new mathMLTree.TextNode(text);
};
var getVariant = function (group, options) {
    var font = options.font;
    if (!font) {
        return null;
    }
    var mode = group.mode;
    if (font === 'mathit') {
        return 'italic';
    }
    var value = group.value;
    if (utils.contains([
            '\\imath',
            '\\jmath'
        ], value)) {
        return null;
    }
    if (symbols[mode][value] && symbols[mode][value].replace) {
        value = symbols[mode][value].replace;
    }
    var fontName = fontMap[font].fontName;
    if (fontMetrics.getCharacterMetrics(value, fontName)) {
        return fontMap[options.font].variant;
    }
    return null;
};
var groupTypes = {};
groupTypes.mathord = function (group, options) {
    var node = new mathMLTree.MathNode('mi', [makeText(group.value, group.mode)]);
    var variant = getVariant(group, options);
    if (variant) {
        node.setAttribute('mathvariant', variant);
    }
    return node;
};
groupTypes.textord = function (group, options) {
    var text = makeText(group.value, group.mode);
    var variant = getVariant(group, options) || 'normal';
    var node;
    if (/[0-9]/.test(group.value)) {
        node = new mathMLTree.MathNode('mn', [text]);
        if (options.font) {
            node.setAttribute('mathvariant', variant);
        }
    } else {
        node = new mathMLTree.MathNode('mi', [text]);
        node.setAttribute('mathvariant', variant);
    }
    return node;
};
groupTypes.bin = function (group) {
    var node = new mathMLTree.MathNode('mo', [makeText(group.value, group.mode)]);
    return node;
};
groupTypes.rel = function (group) {
    var node = new mathMLTree.MathNode('mo', [makeText(group.value, group.mode)]);
    return node;
};
groupTypes.open = function (group) {
    var node = new mathMLTree.MathNode('mo', [makeText(group.value, group.mode)]);
    return node;
};
groupTypes.close = function (group) {
    var node = new mathMLTree.MathNode('mo', [makeText(group.value, group.mode)]);
    return node;
};
groupTypes.inner = function (group) {
    var node = new mathMLTree.MathNode('mo', [makeText(group.value, group.mode)]);
    return node;
};
groupTypes.punct = function (group) {
    var node = new mathMLTree.MathNode('mo', [makeText(group.value, group.mode)]);
    node.setAttribute('separator', 'true');
    return node;
};
groupTypes.ordgroup = function (group, options) {
    var inner = buildExpression(group.value, options);
    var node = new mathMLTree.MathNode('mrow', inner);
    return node;
};
groupTypes.text = function (group, options) {
    var inner = buildExpression(group.value.body, options);
    var node = new mathMLTree.MathNode('mtext', inner);
    return node;
};
groupTypes.color = function (group, options) {
    var inner = buildExpression(group.value.value, options);
    var node = new mathMLTree.MathNode('mstyle', inner);
    node.setAttribute('mathcolor', group.value.color);
    return node;
};
groupTypes.supsub = function (group, options) {
    var children = [buildGroup(group.value.base, options)];
    if (group.value.sub) {
        children.push(buildGroup(group.value.sub, options));
    }
    if (group.value.sup) {
        children.push(buildGroup(group.value.sup, options));
    }
    var nodeType;
    if (!group.value.sub) {
        nodeType = 'msup';
    } else if (!group.value.sup) {
        nodeType = 'msub';
    } else {
        nodeType = 'msubsup';
    }
    var node = new mathMLTree.MathNode(nodeType, children);
    return node;
};
groupTypes.genfrac = function (group, options) {
    var node = new mathMLTree.MathNode('mfrac', [
        buildGroup(group.value.numer, options),
        buildGroup(group.value.denom, options)
    ]);
    if (!group.value.hasBarLine) {
        node.setAttribute('linethickness', '0px');
    }
    if (group.value.leftDelim != null || group.value.rightDelim != null) {
        var withDelims = [];
        if (group.value.leftDelim != null) {
            var leftOp = new mathMLTree.MathNode('mo', [new mathMLTree.TextNode(group.value.leftDelim)]);
            leftOp.setAttribute('fence', 'true');
            withDelims.push(leftOp);
        }
        withDelims.push(node);
        if (group.value.rightDelim != null) {
            var rightOp = new mathMLTree.MathNode('mo', [new mathMLTree.TextNode(group.value.rightDelim)]);
            rightOp.setAttribute('fence', 'true');
            withDelims.push(rightOp);
        }
        var outerNode = new mathMLTree.MathNode('mrow', withDelims);
        return outerNode;
    }
    return node;
};
groupTypes.array = function (group, options) {
    return new mathMLTree.MathNode('mtable', group.value.body.map(function (row) {
        return new mathMLTree.MathNode('mtr', row.map(function (cell) {
            return new mathMLTree.MathNode('mtd', [buildGroup(cell, options)]);
        }));
    }));
};
groupTypes.sqrt = function (group, options) {
    var node;
    if (group.value.index) {
        node = new mathMLTree.MathNode('mroot', [
            buildGroup(group.value.body, options),
            buildGroup(group.value.index, options)
        ]);
    } else {
        node = new mathMLTree.MathNode('msqrt', [buildGroup(group.value.body, options)]);
    }
    return node;
};
groupTypes.leftright = function (group, options) {
    var inner = buildExpression(group.value.body, options);
    if (group.value.left !== '.') {
        var leftNode = new mathMLTree.MathNode('mo', [makeText(group.value.left, group.mode)]);
        leftNode.setAttribute('fence', 'true');
        inner.unshift(leftNode);
    }
    if (group.value.right !== '.') {
        var rightNode = new mathMLTree.MathNode('mo', [makeText(group.value.right, group.mode)]);
        rightNode.setAttribute('fence', 'true');
        inner.push(rightNode);
    }
    var outerNode = new mathMLTree.MathNode('mrow', inner);
    return outerNode;
};
groupTypes.accent = function (group, options) {
    var accentNode = new mathMLTree.MathNode('mo', [makeText(group.value.accent, group.mode)]);
    var node = new mathMLTree.MathNode('mover', [
        buildGroup(group.value.base, options),
        accentNode
    ]);
    node.setAttribute('accent', 'true');
    return node;
};
groupTypes.spacing = function (group) {
    var node;
    if (group.value === '\\ ' || group.value === '\\space' || group.value === ' ' || group.value === '~') {
        node = new mathMLTree.MathNode('mtext', [new mathMLTree.TextNode('\xA0')]);
    } else {
        node = new mathMLTree.MathNode('mspace');
        node.setAttribute('width', buildCommon.spacingFunctions[group.value].size);
    }
    return node;
};
groupTypes.op = function (group) {
    var node;
    if (group.value.symbol) {
        node = new mathMLTree.MathNode('mo', [makeText(group.value.body, group.mode)]);
    } else {
        node = new mathMLTree.MathNode('mi', [new mathMLTree.TextNode(group.value.body.slice(1))]);
    }
    return node;
};
groupTypes.katex = function (group) {
    var node = new mathMLTree.MathNode('mtext', [new mathMLTree.TextNode('KaTeX')]);
    return node;
};
groupTypes.font = function (group, options) {
    var font = group.value.font;
    return buildGroup(group.value.body, options.withFont(font));
};
groupTypes.delimsizing = function (group) {
    var children = [];
    if (group.value.value !== '.') {
        children.push(makeText(group.value.value, group.mode));
    }
    var node = new mathMLTree.MathNode('mo', children);
    if (group.value.delimType === 'open' || group.value.delimType === 'close') {
        node.setAttribute('fence', 'true');
    } else {
        node.setAttribute('fence', 'false');
    }
    return node;
};
groupTypes.styling = function (group, options) {
    var inner = buildExpression(group.value.value, options);
    var node = new mathMLTree.MathNode('mstyle', inner);
    var styleAttributes = {
        'display': [
            '0',
            'true'
        ],
        'text': [
            '0',
            'false'
        ],
        'script': [
            '1',
            'false'
        ],
        'scriptscript': [
            '2',
            'false'
        ]
    };
    var attr = styleAttributes[group.value.style];
    node.setAttribute('scriptlevel', attr[0]);
    node.setAttribute('displaystyle', attr[1]);
    return node;
};
groupTypes.sizing = function (group, options) {
    var inner = buildExpression(group.value.value, options);
    var node = new mathMLTree.MathNode('mstyle', inner);
    node.setAttribute('mathsize', buildCommon.sizingMultiplier[group.value.size] + 'em');
    return node;
};
groupTypes.overline = function (group, options) {
    var operator = new mathMLTree.MathNode('mo', [new mathMLTree.TextNode('\u203E')]);
    operator.setAttribute('stretchy', 'true');
    var node = new mathMLTree.MathNode('mover', [
        buildGroup(group.value.body, options),
        operator
    ]);
    node.setAttribute('accent', 'true');
    return node;
};
groupTypes.underline = function (group, options) {
    var operator = new mathMLTree.MathNode('mo', [new mathMLTree.TextNode('\u203E')]);
    operator.setAttribute('stretchy', 'true');
    var node = new mathMLTree.MathNode('munder', [
        buildGroup(group.value.body, options),
        operator
    ]);
    node.setAttribute('accentunder', 'true');
    return node;
};
groupTypes.rule = function (group) {
    var node = new mathMLTree.MathNode('mrow');
    return node;
};
groupTypes.llap = function (group, options) {
    var node = new mathMLTree.MathNode('mpadded', [buildGroup(group.value.body, options)]);
    node.setAttribute('lspace', '-1width');
    node.setAttribute('width', '0px');
    return node;
};
groupTypes.rlap = function (group, options) {
    var node = new mathMLTree.MathNode('mpadded', [buildGroup(group.value.body, options)]);
    node.setAttribute('width', '0px');
    return node;
};
groupTypes.phantom = function (group, options, prev) {
    var inner = buildExpression(group.value.value, options);
    return new mathMLTree.MathNode('mphantom', inner);
};
var buildExpression = function (expression, options) {
    var groups = [];
    for (var i = 0; i < expression.length; i++) {
        var group = expression[i];
        groups.push(buildGroup(group, options));
    }
    return groups;
};
var buildGroup = function (group, options) {
    if (!group) {
        return new mathMLTree.MathNode('mrow');
    }
    if (groupTypes[group.type]) {
        return groupTypes[group.type](group, options);
    } else {
        throw new ParseError('Got group of unknown type: \'' + group.type + '\'');
    }
};
var buildMathML = function (tree, texExpression, options) {
    var expression = buildExpression(tree, options);
    var wrapper = new mathMLTree.MathNode('mrow', expression);
    var annotation = new mathMLTree.MathNode('annotation', [new mathMLTree.TextNode(texExpression)]);
    annotation.setAttribute('encoding', 'application/x-tex');
    var semantics = new mathMLTree.MathNode('semantics', [
        wrapper,
        annotation
    ]);
    var math = new mathMLTree.MathNode('math', [semantics]);
    return makeSpan(['katex-mathml'], [math]);
};
module.exports = buildMathML;
},{"./ParseError":18,"./buildCommon":22,"./fontMetrics":29,"./mathMLTree":32,"./symbols":35,"./utils":36}],25:[function(require,module,exports){
var buildHTML = require('./buildHTML');
var buildMathML = require('./buildMathML');
var buildCommon = require('./buildCommon');
var Options = require('./Options');
var Settings = require('./Settings');
var Style = require('./Style');
var makeSpan = buildCommon.makeSpan;
var buildTree = function (tree, expression, settings) {
    settings = settings || new Settings({});
    var startStyle = Style.TEXT;
    if (settings.displayMode) {
        startStyle = Style.DISPLAY;
    }
    var options = new Options({
        style: startStyle,
        size: 'size5'
    });
    var mathMLNode = buildMathML(tree, expression, options);
    var htmlNode = buildHTML(tree, options);
    var katexNode = makeSpan(['katex'], [
        mathMLNode,
        htmlNode
    ]);
    if (settings.displayMode) {
        return makeSpan(['katex-display'], [katexNode]);
    } else {
        return katexNode;
    }
};
module.exports = buildTree;
},{"./Options":17,"./Settings":20,"./Style":21,"./buildCommon":22,"./buildHTML":23,"./buildMathML":24}],26:[function(require,module,exports){
var ParseError = require('./ParseError');
var Style = require('./Style');
var buildCommon = require('./buildCommon');
var fontMetrics = require('./fontMetrics');
var symbols = require('./symbols');
var utils = require('./utils');
var makeSpan = buildCommon.makeSpan;
var getMetrics = function (symbol, font) {
    if (symbols.math[symbol] && symbols.math[symbol].replace) {
        return fontMetrics.getCharacterMetrics(symbols.math[symbol].replace, font);
    } else {
        return fontMetrics.getCharacterMetrics(symbol, font);
    }
};
var mathrmSize = function (value, size, mode) {
    return buildCommon.makeSymbol(value, 'Size' + size + '-Regular', mode);
};
var styleWrap = function (delim, toStyle, options) {
    var span = makeSpan([
        'style-wrap',
        options.style.reset(),
        toStyle.cls()
    ], [delim]);
    var multiplier = toStyle.sizeMultiplier / options.style.sizeMultiplier;
    span.height *= multiplier;
    span.depth *= multiplier;
    span.maxFontSize = toStyle.sizeMultiplier;
    return span;
};
var makeSmallDelim = function (delim, style, center, options, mode) {
    var text = buildCommon.makeSymbol(delim, 'Main-Regular', mode);
    var span = styleWrap(text, style, options);
    if (center) {
        var shift = (1 - options.style.sizeMultiplier / style.sizeMultiplier) * fontMetrics.metrics.axisHeight;
        span.style.top = shift + 'em';
        span.height -= shift;
        span.depth += shift;
    }
    return span;
};
var makeLargeDelim = function (delim, size, center, options, mode) {
    var inner = mathrmSize(delim, size, mode);
    var span = styleWrap(makeSpan([
        'delimsizing',
        'size' + size
    ], [inner], options.getColor()), Style.TEXT, options);
    if (center) {
        var shift = (1 - options.style.sizeMultiplier) * fontMetrics.metrics.axisHeight;
        span.style.top = shift + 'em';
        span.height -= shift;
        span.depth += shift;
    }
    return span;
};
var makeInner = function (symbol, font, mode) {
    var sizeClass;
    if (font === 'Size1-Regular') {
        sizeClass = 'delim-size1';
    } else if (font === 'Size4-Regular') {
        sizeClass = 'delim-size4';
    }
    var inner = makeSpan([
        'delimsizinginner',
        sizeClass
    ], [makeSpan([], [buildCommon.makeSymbol(symbol, font, mode)])]);
    return {
        type: 'elem',
        elem: inner
    };
};
var makeStackedDelim = function (delim, heightTotal, center, options, mode) {
    var top;
    var middle;
    var repeat;
    var bottom;
    top = repeat = bottom = delim;
    middle = null;
    var font = 'Size1-Regular';
    if (delim === '\\uparrow') {
        repeat = bottom = '\u23D0';
    } else if (delim === '\\Uparrow') {
        repeat = bottom = '\u2016';
    } else if (delim === '\\downarrow') {
        top = repeat = '\u23D0';
    } else if (delim === '\\Downarrow') {
        top = repeat = '\u2016';
    } else if (delim === '\\updownarrow') {
        top = '\\uparrow';
        repeat = '\u23D0';
        bottom = '\\downarrow';
    } else if (delim === '\\Updownarrow') {
        top = '\\Uparrow';
        repeat = '\u2016';
        bottom = '\\Downarrow';
    } else if (delim === '[' || delim === '\\lbrack') {
        top = '\u23A1';
        repeat = '\u23A2';
        bottom = '\u23A3';
        font = 'Size4-Regular';
    } else if (delim === ']' || delim === '\\rbrack') {
        top = '\u23A4';
        repeat = '\u23A5';
        bottom = '\u23A6';
        font = 'Size4-Regular';
    } else if (delim === '\\lfloor') {
        repeat = top = '\u23A2';
        bottom = '\u23A3';
        font = 'Size4-Regular';
    } else if (delim === '\\lceil') {
        top = '\u23A1';
        repeat = bottom = '\u23A2';
        font = 'Size4-Regular';
    } else if (delim === '\\rfloor') {
        repeat = top = '\u23A5';
        bottom = '\u23A6';
        font = 'Size4-Regular';
    } else if (delim === '\\rceil') {
        top = '\u23A4';
        repeat = bottom = '\u23A5';
        font = 'Size4-Regular';
    } else if (delim === '(') {
        top = '\u239B';
        repeat = '\u239C';
        bottom = '\u239D';
        font = 'Size4-Regular';
    } else if (delim === ')') {
        top = '\u239E';
        repeat = '\u239F';
        bottom = '\u23A0';
        font = 'Size4-Regular';
    } else if (delim === '\\{' || delim === '\\lbrace') {
        top = '\u23A7';
        middle = '\u23A8';
        bottom = '\u23A9';
        repeat = '\u23AA';
        font = 'Size4-Regular';
    } else if (delim === '\\}' || delim === '\\rbrace') {
        top = '\u23AB';
        middle = '\u23AC';
        bottom = '\u23AD';
        repeat = '\u23AA';
        font = 'Size4-Regular';
    } else if (delim === '\\lgroup') {
        top = '\u23A7';
        bottom = '\u23A9';
        repeat = '\u23AA';
        font = 'Size4-Regular';
    } else if (delim === '\\rgroup') {
        top = '\u23AB';
        bottom = '\u23AD';
        repeat = '\u23AA';
        font = 'Size4-Regular';
    } else if (delim === '\\lmoustache') {
        top = '\u23A7';
        bottom = '\u23AD';
        repeat = '\u23AA';
        font = 'Size4-Regular';
    } else if (delim === '\\rmoustache') {
        top = '\u23AB';
        bottom = '\u23A9';
        repeat = '\u23AA';
        font = 'Size4-Regular';
    } else if (delim === '\\surd') {
        top = '\uE001';
        bottom = '\u23B7';
        repeat = '\uE000';
        font = 'Size4-Regular';
    }
    var topMetrics = getMetrics(top, font);
    var topHeightTotal = topMetrics.height + topMetrics.depth;
    var repeatMetrics = getMetrics(repeat, font);
    var repeatHeightTotal = repeatMetrics.height + repeatMetrics.depth;
    var bottomMetrics = getMetrics(bottom, font);
    var bottomHeightTotal = bottomMetrics.height + bottomMetrics.depth;
    var middleHeightTotal = 0;
    var middleFactor = 1;
    if (middle !== null) {
        var middleMetrics = getMetrics(middle, font);
        middleHeightTotal = middleMetrics.height + middleMetrics.depth;
        middleFactor = 2;
    }
    var minHeight = topHeightTotal + bottomHeightTotal + middleHeightTotal;
    var repeatCount = Math.ceil((heightTotal - minHeight) / (middleFactor * repeatHeightTotal));
    var realHeightTotal = minHeight + repeatCount * middleFactor * repeatHeightTotal;
    var axisHeight = fontMetrics.metrics.axisHeight;
    if (center) {
        axisHeight *= options.style.sizeMultiplier;
    }
    var depth = realHeightTotal / 2 - axisHeight;
    var inners = [];
    inners.push(makeInner(bottom, font, mode));
    var i;
    if (middle === null) {
        for (i = 0; i < repeatCount; i++) {
            inners.push(makeInner(repeat, font, mode));
        }
    } else {
        for (i = 0; i < repeatCount; i++) {
            inners.push(makeInner(repeat, font, mode));
        }
        inners.push(makeInner(middle, font, mode));
        for (i = 0; i < repeatCount; i++) {
            inners.push(makeInner(repeat, font, mode));
        }
    }
    inners.push(makeInner(top, font, mode));
    var inner = buildCommon.makeVList(inners, 'bottom', depth, options);
    return styleWrap(makeSpan([
        'delimsizing',
        'mult'
    ], [inner], options.getColor()), Style.TEXT, options);
};
var stackLargeDelimiters = [
    '(',
    ')',
    '[',
    '\\lbrack',
    ']',
    '\\rbrack',
    '\\{',
    '\\lbrace',
    '\\}',
    '\\rbrace',
    '\\lfloor',
    '\\rfloor',
    '\\lceil',
    '\\rceil',
    '\\surd'
];
var stackAlwaysDelimiters = [
    '\\uparrow',
    '\\downarrow',
    '\\updownarrow',
    '\\Uparrow',
    '\\Downarrow',
    '\\Updownarrow',
    '|',
    '\\|',
    '\\vert',
    '\\Vert',
    '\\lvert',
    '\\rvert',
    '\\lVert',
    '\\rVert',
    '\\lgroup',
    '\\rgroup',
    '\\lmoustache',
    '\\rmoustache'
];
var stackNeverDelimiters = [
    '<',
    '>',
    '\\langle',
    '\\rangle',
    '/',
    '\\backslash',
    '\\lt',
    '\\gt'
];
var sizeToMaxHeight = [
    0,
    1.2,
    1.8,
    2.4,
    3
];
var makeSizedDelim = function (delim, size, options, mode) {
    if (delim === '<' || delim === '\\lt') {
        delim = '\\langle';
    } else if (delim === '>' || delim === '\\gt') {
        delim = '\\rangle';
    }
    if (utils.contains(stackLargeDelimiters, delim) || utils.contains(stackNeverDelimiters, delim)) {
        return makeLargeDelim(delim, size, false, options, mode);
    } else if (utils.contains(stackAlwaysDelimiters, delim)) {
        return makeStackedDelim(delim, sizeToMaxHeight[size], false, options, mode);
    } else {
        throw new ParseError('Illegal delimiter: \'' + delim + '\'');
    }
};
var stackNeverDelimiterSequence = [
    {
        type: 'small',
        style: Style.SCRIPTSCRIPT
    },
    {
        type: 'small',
        style: Style.SCRIPT
    },
    {
        type: 'small',
        style: Style.TEXT
    },
    {
        type: 'large',
        size: 1
    },
    {
        type: 'large',
        size: 2
    },
    {
        type: 'large',
        size: 3
    },
    {
        type: 'large',
        size: 4
    }
];
var stackAlwaysDelimiterSequence = [
    {
        type: 'small',
        style: Style.SCRIPTSCRIPT
    },
    {
        type: 'small',
        style: Style.SCRIPT
    },
    {
        type: 'small',
        style: Style.TEXT
    },
    { type: 'stack' }
];
var stackLargeDelimiterSequence = [
    {
        type: 'small',
        style: Style.SCRIPTSCRIPT
    },
    {
        type: 'small',
        style: Style.SCRIPT
    },
    {
        type: 'small',
        style: Style.TEXT
    },
    {
        type: 'large',
        size: 1
    },
    {
        type: 'large',
        size: 2
    },
    {
        type: 'large',
        size: 3
    },
    {
        type: 'large',
        size: 4
    },
    { type: 'stack' }
];
var delimTypeToFont = function (type) {
    if (type.type === 'small') {
        return 'Main-Regular';
    } else if (type.type === 'large') {
        return 'Size' + type.size + '-Regular';
    } else if (type.type === 'stack') {
        return 'Size4-Regular';
    }
};
var traverseSequence = function (delim, height, sequence, options) {
    var start = Math.min(2, 3 - options.style.size);
    for (var i = start; i < sequence.length; i++) {
        if (sequence[i].type === 'stack') {
            break;
        }
        var metrics = getMetrics(delim, delimTypeToFont(sequence[i]));
        var heightDepth = metrics.height + metrics.depth;
        if (sequence[i].type === 'small') {
            heightDepth *= sequence[i].style.sizeMultiplier;
        }
        if (heightDepth > height) {
            return sequence[i];
        }
    }
    return sequence[sequence.length - 1];
};
var makeCustomSizedDelim = function (delim, height, center, options, mode) {
    if (delim === '<' || delim === '\\lt') {
        delim = '\\langle';
    } else if (delim === '>' || delim === '\\gt') {
        delim = '\\rangle';
    }
    var sequence;
    if (utils.contains(stackNeverDelimiters, delim)) {
        sequence = stackNeverDelimiterSequence;
    } else if (utils.contains(stackLargeDelimiters, delim)) {
        sequence = stackLargeDelimiterSequence;
    } else {
        sequence = stackAlwaysDelimiterSequence;
    }
    var delimType = traverseSequence(delim, height, sequence, options);
    if (delimType.type === 'small') {
        return makeSmallDelim(delim, delimType.style, center, options, mode);
    } else if (delimType.type === 'large') {
        return makeLargeDelim(delim, delimType.size, center, options, mode);
    } else if (delimType.type === 'stack') {
        return makeStackedDelim(delim, height, center, options, mode);
    }
};
var makeLeftRightDelim = function (delim, height, depth, options, mode) {
    var axisHeight = fontMetrics.metrics.axisHeight * options.style.sizeMultiplier;
    var delimiterFactor = 901;
    var delimiterExtend = 5 / fontMetrics.metrics.ptPerEm;
    var maxDistFromAxis = Math.max(height - axisHeight, depth + axisHeight);
    var totalHeight = Math.max(maxDistFromAxis / 500 * delimiterFactor, 2 * maxDistFromAxis - delimiterExtend);
    return makeCustomSizedDelim(delim, totalHeight, true, options, mode);
};
module.exports = {
    sizedDelim: makeSizedDelim,
    customSizedDelim: makeCustomSizedDelim,
    leftRightDelim: makeLeftRightDelim
};
},{"./ParseError":18,"./Style":21,"./buildCommon":22,"./fontMetrics":29,"./symbols":35,"./utils":36}],27:[function(require,module,exports){
var utils = require('./utils');
var createClass = function (classes) {
    classes = classes.slice();
    for (var i = classes.length - 1; i >= 0; i--) {
        if (!classes[i]) {
            classes.splice(i, 1);
        }
    }
    return classes.join(' ');
};
function span(classes, children, height, depth, maxFontSize, style) {
    this.classes = classes || [];
    this.children = children || [];
    this.height = height || 0;
    this.depth = depth || 0;
    this.maxFontSize = maxFontSize || 0;
    this.style = style || {};
    this.attributes = {};
}
span.prototype.setAttribute = function (attribute, value) {
    this.attributes[attribute] = value;
};
span.prototype.toNode = function () {
    var span = document.createElement('span');
    span.className = createClass(this.classes);
    for (var style in this.style) {
        if (Object.prototype.hasOwnProperty.call(this.style, style)) {
            span.style[style] = this.style[style];
        }
    }
    for (var attr in this.attributes) {
        if (Object.prototype.hasOwnProperty.call(this.attributes, attr)) {
            span.setAttribute(attr, this.attributes[attr]);
        }
    }
    for (var i = 0; i < this.children.length; i++) {
        span.appendChild(this.children[i].toNode());
    }
    return span;
};
span.prototype.toMarkup = function () {
    var markup = '<span';
    if (this.classes.length) {
        markup += ' class="';
        markup += utils.escape(createClass(this.classes));
        markup += '"';
    }
    var styles = '';
    for (var style in this.style) {
        if (this.style.hasOwnProperty(style)) {
            styles += utils.hyphenate(style) + ':' + this.style[style] + ';';
        }
    }
    if (styles) {
        markup += ' style="' + utils.escape(styles) + '"';
    }
    for (var attr in this.attributes) {
        if (Object.prototype.hasOwnProperty.call(this.attributes, attr)) {
            markup += ' ' + attr + '="';
            markup += utils.escape(this.attributes[attr]);
            markup += '"';
        }
    }
    markup += '>';
    for (var i = 0; i < this.children.length; i++) {
        markup += this.children[i].toMarkup();
    }
    markup += '</span>';
    return markup;
};
function documentFragment(children, height, depth, maxFontSize) {
    this.children = children || [];
    this.height = height || 0;
    this.depth = depth || 0;
    this.maxFontSize = maxFontSize || 0;
}
documentFragment.prototype.toNode = function () {
    var frag = document.createDocumentFragment();
    for (var i = 0; i < this.children.length; i++) {
        frag.appendChild(this.children[i].toNode());
    }
    return frag;
};
documentFragment.prototype.toMarkup = function () {
    var markup = '';
    for (var i = 0; i < this.children.length; i++) {
        markup += this.children[i].toMarkup();
    }
    return markup;
};
function symbolNode(value, height, depth, italic, skew, classes, style) {
    this.value = value || '';
    this.height = height || 0;
    this.depth = depth || 0;
    this.italic = italic || 0;
    this.skew = skew || 0;
    this.classes = classes || [];
    this.style = style || {};
    this.maxFontSize = 0;
}
symbolNode.prototype.toNode = function () {
    var node = document.createTextNode(this.value);
    var span = null;
    if (this.italic > 0) {
        span = document.createElement('span');
        span.style.marginRight = this.italic + 'em';
    }
    if (this.classes.length > 0) {
        span = span || document.createElement('span');
        span.className = createClass(this.classes);
    }
    for (var style in this.style) {
        if (this.style.hasOwnProperty(style)) {
            span = span || document.createElement('span');
            span.style[style] = this.style[style];
        }
    }
    if (span) {
        span.appendChild(node);
        return span;
    } else {
        return node;
    }
};
symbolNode.prototype.toMarkup = function () {
    var needsSpan = false;
    var markup = '<span';
    if (this.classes.length) {
        needsSpan = true;
        markup += ' class="';
        markup += utils.escape(createClass(this.classes));
        markup += '"';
    }
    var styles = '';
    if (this.italic > 0) {
        styles += 'margin-right:' + this.italic + 'em;';
    }
    for (var style in this.style) {
        if (this.style.hasOwnProperty(style)) {
            styles += utils.hyphenate(style) + ':' + this.style[style] + ';';
        }
    }
    if (styles) {
        needsSpan = true;
        markup += ' style="' + utils.escape(styles) + '"';
    }
    var escaped = utils.escape(this.value);
    if (needsSpan) {
        markup += '>';
        markup += escaped;
        markup += '</span>';
        return markup;
    } else {
        return escaped;
    }
};
module.exports = {
    span: span,
    documentFragment: documentFragment,
    symbolNode: symbolNode
};
},{"./utils":36}],28:[function(require,module,exports){
var fontMetrics = require('./fontMetrics');
var parseData = require('./parseData');
var ParseError = require('./ParseError');
var ParseNode = parseData.ParseNode;
function parseArray(parser, result) {
    var row = [];
    var body = [row];
    var rowGaps = [];
    while (true) {
        var cell = parser.parseExpression(false, null);
        row.push(new ParseNode('ordgroup', cell, parser.mode));
        var next = parser.nextToken.text;
        if (next === '&') {
            parser.consume();
        } else if (next === '\\end') {
            break;
        } else if (next === '\\\\' || next === '\\cr') {
            var cr = parser.parseFunction();
            rowGaps.push(cr.value.size);
            row = [];
            body.push(row);
        } else {
            var pos = Math.min(parser.pos + 1, parser.lexer._input.length);
            throw new ParseError('Expected & or \\\\ or \\end', parser.lexer, pos);
        }
    }
    result.body = body;
    result.rowGaps = rowGaps;
    return new ParseNode(result.type, result, parser.mode);
}
function defineEnvironment(names, props, handler) {
    if (typeof names === 'string') {
        names = [names];
    }
    if (typeof props === 'number') {
        props = { numArgs: props };
    }
    var data = {
        numArgs: props.numArgs || 0,
        argTypes: props.argTypes,
        greediness: 1,
        allowedInText: !!props.allowedInText,
        numOptionalArgs: props.numOptionalArgs || 0,
        handler: handler
    };
    for (var i = 0; i < names.length; ++i) {
        module.exports[names[i]] = data;
    }
}
defineEnvironment('array', { numArgs: 1 }, function (context, args) {
    var colalign = args[0];
    colalign = colalign.value.map ? colalign.value : [colalign];
    var cols = colalign.map(function (node) {
        var ca = node.value;
        if ('lcr'.indexOf(ca) !== -1) {
            return {
                type: 'align',
                align: ca
            };
        } else if (ca === '|') {
            return {
                type: 'separator',
                separator: '|'
            };
        }
        throw new ParseError('Unknown column alignment: ' + node.value, context.lexer, context.positions[1]);
    });
    var res = {
        type: 'array',
        cols: cols,
        hskipBeforeAndAfter: true
    };
    res = parseArray(context.parser, res);
    return res;
});
defineEnvironment([
    'matrix',
    'pmatrix',
    'bmatrix',
    'Bmatrix',
    'vmatrix',
    'Vmatrix'
], {}, function (context) {
    var delimiters = {
        'matrix': null,
        'pmatrix': [
            '(',
            ')'
        ],
        'bmatrix': [
            '[',
            ']'
        ],
        'Bmatrix': [
            '\\{',
            '\\}'
        ],
        'vmatrix': [
            '|',
            '|'
        ],
        'Vmatrix': [
            '\\Vert',
            '\\Vert'
        ]
    }[context.envName];
    var res = {
        type: 'array',
        hskipBeforeAndAfter: false
    };
    res = parseArray(context.parser, res);
    if (delimiters) {
        res = new ParseNode('leftright', {
            body: [res],
            left: delimiters[0],
            right: delimiters[1]
        }, context.mode);
    }
    return res;
});
defineEnvironment('cases', {}, function (context) {
    var res = {
        type: 'array',
        arraystretch: 1.2,
        cols: [
            {
                type: 'align',
                align: 'l',
                pregap: 0,
                postgap: fontMetrics.metrics.quad
            },
            {
                type: 'align',
                align: 'l',
                pregap: 0,
                postgap: 0
            }
        ]
    };
    res = parseArray(context.parser, res);
    res = new ParseNode('leftright', {
        body: [res],
        left: '\\{',
        right: '.'
    }, context.mode);
    return res;
});
defineEnvironment('aligned', {}, function (context) {
    var res = {
        type: 'array',
        cols: []
    };
    res = parseArray(context.parser, res);
    var emptyGroup = new ParseNode('ordgroup', [], context.mode);
    var numCols = 0;
    res.value.body.forEach(function (row) {
        var i;
        for (i = 1; i < row.length; i += 2) {
            row[i].value.unshift(emptyGroup);
        }
        if (numCols < row.length) {
            numCols = row.length;
        }
    });
    for (var i = 0; i < numCols; ++i) {
        var align = 'r';
        var pregap = 0;
        if (i % 2 === 1) {
            align = 'l';
        } else if (i > 0) {
            pregap = 2;
        }
        res.value.cols[i] = {
            type: 'align',
            align: align,
            pregap: pregap,
            postgap: 0
        };
    }
    return res;
});
},{"./ParseError":18,"./fontMetrics":29,"./parseData":33}],29:[function(require,module,exports){
var Style = require('./Style');
var sigma1 = 0.025;
var sigma2 = 0;
var sigma3 = 0;
var sigma4 = 0;
var sigma5 = 0.431;
var sigma6 = 1;
var sigma7 = 0;
var sigma8 = 0.677;
var sigma9 = 0.394;
var sigma10 = 0.444;
var sigma11 = 0.686;
var sigma12 = 0.345;
var sigma13 = 0.413;
var sigma14 = 0.363;
var sigma15 = 0.289;
var sigma16 = 0.15;
var sigma17 = 0.247;
var sigma18 = 0.386;
var sigma19 = 0.05;
var sigma20 = 2.39;
var sigma21 = 1.01;
var sigma21Script = 0.81;
var sigma21ScriptScript = 0.71;
var sigma22 = 0.25;
var xi1 = 0;
var xi2 = 0;
var xi3 = 0;
var xi4 = 0;
var xi5 = 0.431;
var xi6 = 1;
var xi7 = 0;
var xi8 = 0.04;
var xi9 = 0.111;
var xi10 = 0.166;
var xi11 = 0.2;
var xi12 = 0.6;
var xi13 = 0.1;
var ptPerEm = 10;
var doubleRuleSep = 2 / ptPerEm;
var metrics = {
    xHeight: sigma5,
    quad: sigma6,
    num1: sigma8,
    num2: sigma9,
    num3: sigma10,
    denom1: sigma11,
    denom2: sigma12,
    sup1: sigma13,
    sup2: sigma14,
    sup3: sigma15,
    sub1: sigma16,
    sub2: sigma17,
    supDrop: sigma18,
    subDrop: sigma19,
    axisHeight: sigma22,
    defaultRuleThickness: xi8,
    bigOpSpacing1: xi9,
    bigOpSpacing2: xi10,
    bigOpSpacing3: xi11,
    bigOpSpacing4: xi12,
    bigOpSpacing5: xi13,
    ptPerEm: ptPerEm,
    emPerEx: sigma5 / sigma6,
    doubleRuleSep: doubleRuleSep,
    delim1: sigma20,
    getDelim2: function (style) {
        if (style.size === Style.TEXT.size) {
            return sigma21;
        } else if (style.size === Style.SCRIPT.size) {
            return sigma21Script;
        } else if (style.size === Style.SCRIPTSCRIPT.size) {
            return sigma21ScriptScript;
        }
        throw new Error('Unexpected style size: ' + style.size);
    }
};
var metricMap = require('./fontMetricsData');
var getCharacterMetrics = function (character, style) {
    var metrics = metricMap[style][character.charCodeAt(0)];
    if (metrics) {
        return {
            depth: metrics[0],
            height: metrics[1],
            italic: metrics[2],
            skew: metrics[3],
            width: metrics[4]
        };
    }
};
module.exports = {
    metrics: metrics,
    getCharacterMetrics: getCharacterMetrics
};
},{"./Style":21,"./fontMetricsData":30}],30:[function(require,module,exports){
module.exports = {
    'AMS-Regular': {
        '65': [
            0,
            0.68889,
            0,
            0
        ],
        '66': [
            0,
            0.68889,
            0,
            0
        ],
        '67': [
            0,
            0.68889,
            0,
            0
        ],
        '68': [
            0,
            0.68889,
            0,
            0
        ],
        '69': [
            0,
            0.68889,
            0,
            0
        ],
        '70': [
            0,
            0.68889,
            0,
            0
        ],
        '71': [
            0,
            0.68889,
            0,
            0
        ],
        '72': [
            0,
            0.68889,
            0,
            0
        ],
        '73': [
            0,
            0.68889,
            0,
            0
        ],
        '74': [
            0.16667,
            0.68889,
            0,
            0
        ],
        '75': [
            0,
            0.68889,
            0,
            0
        ],
        '76': [
            0,
            0.68889,
            0,
            0
        ],
        '77': [
            0,
            0.68889,
            0,
            0
        ],
        '78': [
            0,
            0.68889,
            0,
            0
        ],
        '79': [
            0.16667,
            0.68889,
            0,
            0
        ],
        '80': [
            0,
            0.68889,
            0,
            0
        ],
        '81': [
            0.16667,
            0.68889,
            0,
            0
        ],
        '82': [
            0,
            0.68889,
            0,
            0
        ],
        '83': [
            0,
            0.68889,
            0,
            0
        ],
        '84': [
            0,
            0.68889,
            0,
            0
        ],
        '85': [
            0,
            0.68889,
            0,
            0
        ],
        '86': [
            0,
            0.68889,
            0,
            0
        ],
        '87': [
            0,
            0.68889,
            0,
            0
        ],
        '88': [
            0,
            0.68889,
            0,
            0
        ],
        '89': [
            0,
            0.68889,
            0,
            0
        ],
        '90': [
            0,
            0.68889,
            0,
            0
        ],
        '107': [
            0,
            0.68889,
            0,
            0
        ],
        '165': [
            0,
            0.675,
            0.025,
            0
        ],
        '174': [
            0.15559,
            0.69224,
            0,
            0
        ],
        '240': [
            0,
            0.68889,
            0,
            0
        ],
        '295': [
            0,
            0.68889,
            0,
            0
        ],
        '710': [
            0,
            0.825,
            0,
            0
        ],
        '732': [
            0,
            0.9,
            0,
            0
        ],
        '770': [
            0,
            0.825,
            0,
            0
        ],
        '771': [
            0,
            0.9,
            0,
            0
        ],
        '989': [
            0.08167,
            0.58167,
            0,
            0
        ],
        '1008': [
            0,
            0.43056,
            0.04028,
            0
        ],
        '8245': [
            0,
            0.54986,
            0,
            0
        ],
        '8463': [
            0,
            0.68889,
            0,
            0
        ],
        '8487': [
            0,
            0.68889,
            0,
            0
        ],
        '8498': [
            0,
            0.68889,
            0,
            0
        ],
        '8502': [
            0,
            0.68889,
            0,
            0
        ],
        '8503': [
            0,
            0.68889,
            0,
            0
        ],
        '8504': [
            0,
            0.68889,
            0,
            0
        ],
        '8513': [
            0,
            0.68889,
            0,
            0
        ],
        '8592': [
            -0.03598,
            0.46402,
            0,
            0
        ],
        '8594': [
            -0.03598,
            0.46402,
            0,
            0
        ],
        '8602': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8603': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8606': [
            0.01354,
            0.52239,
            0,
            0
        ],
        '8608': [
            0.01354,
            0.52239,
            0,
            0
        ],
        '8610': [
            0.01354,
            0.52239,
            0,
            0
        ],
        '8611': [
            0.01354,
            0.52239,
            0,
            0
        ],
        '8619': [
            0,
            0.54986,
            0,
            0
        ],
        '8620': [
            0,
            0.54986,
            0,
            0
        ],
        '8621': [
            -0.13313,
            0.37788,
            0,
            0
        ],
        '8622': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8624': [
            0,
            0.69224,
            0,
            0
        ],
        '8625': [
            0,
            0.69224,
            0,
            0
        ],
        '8630': [
            0,
            0.43056,
            0,
            0
        ],
        '8631': [
            0,
            0.43056,
            0,
            0
        ],
        '8634': [
            0.08198,
            0.58198,
            0,
            0
        ],
        '8635': [
            0.08198,
            0.58198,
            0,
            0
        ],
        '8638': [
            0.19444,
            0.69224,
            0,
            0
        ],
        '8639': [
            0.19444,
            0.69224,
            0,
            0
        ],
        '8642': [
            0.19444,
            0.69224,
            0,
            0
        ],
        '8643': [
            0.19444,
            0.69224,
            0,
            0
        ],
        '8644': [
            0.1808,
            0.675,
            0,
            0
        ],
        '8646': [
            0.1808,
            0.675,
            0,
            0
        ],
        '8647': [
            0.1808,
            0.675,
            0,
            0
        ],
        '8648': [
            0.19444,
            0.69224,
            0,
            0
        ],
        '8649': [
            0.1808,
            0.675,
            0,
            0
        ],
        '8650': [
            0.19444,
            0.69224,
            0,
            0
        ],
        '8651': [
            0.01354,
            0.52239,
            0,
            0
        ],
        '8652': [
            0.01354,
            0.52239,
            0,
            0
        ],
        '8653': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8654': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8655': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8666': [
            0.13667,
            0.63667,
            0,
            0
        ],
        '8667': [
            0.13667,
            0.63667,
            0,
            0
        ],
        '8669': [
            -0.13313,
            0.37788,
            0,
            0
        ],
        '8672': [
            -0.064,
            0.437,
            0,
            0
        ],
        '8674': [
            -0.064,
            0.437,
            0,
            0
        ],
        '8705': [
            0,
            0.825,
            0,
            0
        ],
        '8708': [
            0,
            0.68889,
            0,
            0
        ],
        '8709': [
            0.08167,
            0.58167,
            0,
            0
        ],
        '8717': [
            0,
            0.43056,
            0,
            0
        ],
        '8722': [
            -0.03598,
            0.46402,
            0,
            0
        ],
        '8724': [
            0.08198,
            0.69224,
            0,
            0
        ],
        '8726': [
            0.08167,
            0.58167,
            0,
            0
        ],
        '8733': [
            0,
            0.69224,
            0,
            0
        ],
        '8736': [
            0,
            0.69224,
            0,
            0
        ],
        '8737': [
            0,
            0.69224,
            0,
            0
        ],
        '8738': [
            0.03517,
            0.52239,
            0,
            0
        ],
        '8739': [
            0.08167,
            0.58167,
            0,
            0
        ],
        '8740': [
            0.25142,
            0.74111,
            0,
            0
        ],
        '8741': [
            0.08167,
            0.58167,
            0,
            0
        ],
        '8742': [
            0.25142,
            0.74111,
            0,
            0
        ],
        '8756': [
            0,
            0.69224,
            0,
            0
        ],
        '8757': [
            0,
            0.69224,
            0,
            0
        ],
        '8764': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8765': [
            -0.13313,
            0.37788,
            0,
            0
        ],
        '8769': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8770': [
            -0.03625,
            0.46375,
            0,
            0
        ],
        '8774': [
            0.30274,
            0.79383,
            0,
            0
        ],
        '8776': [
            -0.01688,
            0.48312,
            0,
            0
        ],
        '8778': [
            0.08167,
            0.58167,
            0,
            0
        ],
        '8782': [
            0.06062,
            0.54986,
            0,
            0
        ],
        '8783': [
            0.06062,
            0.54986,
            0,
            0
        ],
        '8785': [
            0.08198,
            0.58198,
            0,
            0
        ],
        '8786': [
            0.08198,
            0.58198,
            0,
            0
        ],
        '8787': [
            0.08198,
            0.58198,
            0,
            0
        ],
        '8790': [
            0,
            0.69224,
            0,
            0
        ],
        '8791': [
            0.22958,
            0.72958,
            0,
            0
        ],
        '8796': [
            0.08198,
            0.91667,
            0,
            0
        ],
        '8806': [
            0.25583,
            0.75583,
            0,
            0
        ],
        '8807': [
            0.25583,
            0.75583,
            0,
            0
        ],
        '8808': [
            0.25142,
            0.75726,
            0,
            0
        ],
        '8809': [
            0.25142,
            0.75726,
            0,
            0
        ],
        '8812': [
            0.25583,
            0.75583,
            0,
            0
        ],
        '8814': [
            0.20576,
            0.70576,
            0,
            0
        ],
        '8815': [
            0.20576,
            0.70576,
            0,
            0
        ],
        '8816': [
            0.30274,
            0.79383,
            0,
            0
        ],
        '8817': [
            0.30274,
            0.79383,
            0,
            0
        ],
        '8818': [
            0.22958,
            0.72958,
            0,
            0
        ],
        '8819': [
            0.22958,
            0.72958,
            0,
            0
        ],
        '8822': [
            0.1808,
            0.675,
            0,
            0
        ],
        '8823': [
            0.1808,
            0.675,
            0,
            0
        ],
        '8828': [
            0.13667,
            0.63667,
            0,
            0
        ],
        '8829': [
            0.13667,
            0.63667,
            0,
            0
        ],
        '8830': [
            0.22958,
            0.72958,
            0,
            0
        ],
        '8831': [
            0.22958,
            0.72958,
            0,
            0
        ],
        '8832': [
            0.20576,
            0.70576,
            0,
            0
        ],
        '8833': [
            0.20576,
            0.70576,
            0,
            0
        ],
        '8840': [
            0.30274,
            0.79383,
            0,
            0
        ],
        '8841': [
            0.30274,
            0.79383,
            0,
            0
        ],
        '8842': [
            0.13597,
            0.63597,
            0,
            0
        ],
        '8843': [
            0.13597,
            0.63597,
            0,
            0
        ],
        '8847': [
            0.03517,
            0.54986,
            0,
            0
        ],
        '8848': [
            0.03517,
            0.54986,
            0,
            0
        ],
        '8858': [
            0.08198,
            0.58198,
            0,
            0
        ],
        '8859': [
            0.08198,
            0.58198,
            0,
            0
        ],
        '8861': [
            0.08198,
            0.58198,
            0,
            0
        ],
        '8862': [
            0,
            0.675,
            0,
            0
        ],
        '8863': [
            0,
            0.675,
            0,
            0
        ],
        '8864': [
            0,
            0.675,
            0,
            0
        ],
        '8865': [
            0,
            0.675,
            0,
            0
        ],
        '8872': [
            0,
            0.69224,
            0,
            0
        ],
        '8873': [
            0,
            0.69224,
            0,
            0
        ],
        '8874': [
            0,
            0.69224,
            0,
            0
        ],
        '8876': [
            0,
            0.68889,
            0,
            0
        ],
        '8877': [
            0,
            0.68889,
            0,
            0
        ],
        '8878': [
            0,
            0.68889,
            0,
            0
        ],
        '8879': [
            0,
            0.68889,
            0,
            0
        ],
        '8882': [
            0.03517,
            0.54986,
            0,
            0
        ],
        '8883': [
            0.03517,
            0.54986,
            0,
            0
        ],
        '8884': [
            0.13667,
            0.63667,
            0,
            0
        ],
        '8885': [
            0.13667,
            0.63667,
            0,
            0
        ],
        '8888': [
            0,
            0.54986,
            0,
            0
        ],
        '8890': [
            0.19444,
            0.43056,
            0,
            0
        ],
        '8891': [
            0.19444,
            0.69224,
            0,
            0
        ],
        '8892': [
            0.19444,
            0.69224,
            0,
            0
        ],
        '8901': [
            0,
            0.54986,
            0,
            0
        ],
        '8903': [
            0.08167,
            0.58167,
            0,
            0
        ],
        '8905': [
            0.08167,
            0.58167,
            0,
            0
        ],
        '8906': [
            0.08167,
            0.58167,
            0,
            0
        ],
        '8907': [
            0,
            0.69224,
            0,
            0
        ],
        '8908': [
            0,
            0.69224,
            0,
            0
        ],
        '8909': [
            -0.03598,
            0.46402,
            0,
            0
        ],
        '8910': [
            0,
            0.54986,
            0,
            0
        ],
        '8911': [
            0,
            0.54986,
            0,
            0
        ],
        '8912': [
            0.03517,
            0.54986,
            0,
            0
        ],
        '8913': [
            0.03517,
            0.54986,
            0,
            0
        ],
        '8914': [
            0,
            0.54986,
            0,
            0
        ],
        '8915': [
            0,
            0.54986,
            0,
            0
        ],
        '8916': [
            0,
            0.69224,
            0,
            0
        ],
        '8918': [
            0.0391,
            0.5391,
            0,
            0
        ],
        '8919': [
            0.0391,
            0.5391,
            0,
            0
        ],
        '8920': [
            0.03517,
            0.54986,
            0,
            0
        ],
        '8921': [
            0.03517,
            0.54986,
            0,
            0
        ],
        '8922': [
            0.38569,
            0.88569,
            0,
            0
        ],
        '8923': [
            0.38569,
            0.88569,
            0,
            0
        ],
        '8926': [
            0.13667,
            0.63667,
            0,
            0
        ],
        '8927': [
            0.13667,
            0.63667,
            0,
            0
        ],
        '8928': [
            0.30274,
            0.79383,
            0,
            0
        ],
        '8929': [
            0.30274,
            0.79383,
            0,
            0
        ],
        '8934': [
            0.23222,
            0.74111,
            0,
            0
        ],
        '8935': [
            0.23222,
            0.74111,
            0,
            0
        ],
        '8936': [
            0.23222,
            0.74111,
            0,
            0
        ],
        '8937': [
            0.23222,
            0.74111,
            0,
            0
        ],
        '8938': [
            0.20576,
            0.70576,
            0,
            0
        ],
        '8939': [
            0.20576,
            0.70576,
            0,
            0
        ],
        '8940': [
            0.30274,
            0.79383,
            0,
            0
        ],
        '8941': [
            0.30274,
            0.79383,
            0,
            0
        ],
        '8994': [
            0.19444,
            0.69224,
            0,
            0
        ],
        '8995': [
            0.19444,
            0.69224,
            0,
            0
        ],
        '9416': [
            0.15559,
            0.69224,
            0,
            0
        ],
        '9484': [
            0,
            0.69224,
            0,
            0
        ],
        '9488': [
            0,
            0.69224,
            0,
            0
        ],
        '9492': [
            0,
            0.37788,
            0,
            0
        ],
        '9496': [
            0,
            0.37788,
            0,
            0
        ],
        '9585': [
            0.19444,
            0.68889,
            0,
            0
        ],
        '9586': [
            0.19444,
            0.74111,
            0,
            0
        ],
        '9632': [
            0,
            0.675,
            0,
            0
        ],
        '9633': [
            0,
            0.675,
            0,
            0
        ],
        '9650': [
            0,
            0.54986,
            0,
            0
        ],
        '9651': [
            0,
            0.54986,
            0,
            0
        ],
        '9654': [
            0.03517,
            0.54986,
            0,
            0
        ],
        '9660': [
            0,
            0.54986,
            0,
            0
        ],
        '9661': [
            0,
            0.54986,
            0,
            0
        ],
        '9664': [
            0.03517,
            0.54986,
            0,
            0
        ],
        '9674': [
            0.11111,
            0.69224,
            0,
            0
        ],
        '9733': [
            0.19444,
            0.69224,
            0,
            0
        ],
        '10003': [
            0,
            0.69224,
            0,
            0
        ],
        '10016': [
            0,
            0.69224,
            0,
            0
        ],
        '10731': [
            0.11111,
            0.69224,
            0,
            0
        ],
        '10846': [
            0.19444,
            0.75583,
            0,
            0
        ],
        '10877': [
            0.13667,
            0.63667,
            0,
            0
        ],
        '10878': [
            0.13667,
            0.63667,
            0,
            0
        ],
        '10885': [
            0.25583,
            0.75583,
            0,
            0
        ],
        '10886': [
            0.25583,
            0.75583,
            0,
            0
        ],
        '10887': [
            0.13597,
            0.63597,
            0,
            0
        ],
        '10888': [
            0.13597,
            0.63597,
            0,
            0
        ],
        '10889': [
            0.26167,
            0.75726,
            0,
            0
        ],
        '10890': [
            0.26167,
            0.75726,
            0,
            0
        ],
        '10891': [
            0.48256,
            0.98256,
            0,
            0
        ],
        '10892': [
            0.48256,
            0.98256,
            0,
            0
        ],
        '10901': [
            0.13667,
            0.63667,
            0,
            0
        ],
        '10902': [
            0.13667,
            0.63667,
            0,
            0
        ],
        '10933': [
            0.25142,
            0.75726,
            0,
            0
        ],
        '10934': [
            0.25142,
            0.75726,
            0,
            0
        ],
        '10935': [
            0.26167,
            0.75726,
            0,
            0
        ],
        '10936': [
            0.26167,
            0.75726,
            0,
            0
        ],
        '10937': [
            0.26167,
            0.75726,
            0,
            0
        ],
        '10938': [
            0.26167,
            0.75726,
            0,
            0
        ],
        '10949': [
            0.25583,
            0.75583,
            0,
            0
        ],
        '10950': [
            0.25583,
            0.75583,
            0,
            0
        ],
        '10955': [
            0.28481,
            0.79383,
            0,
            0
        ],
        '10956': [
            0.28481,
            0.79383,
            0,
            0
        ],
        '57350': [
            0.08167,
            0.58167,
            0,
            0
        ],
        '57351': [
            0.08167,
            0.58167,
            0,
            0
        ],
        '57352': [
            0.08167,
            0.58167,
            0,
            0
        ],
        '57353': [
            0,
            0.43056,
            0.04028,
            0
        ],
        '57356': [
            0.25142,
            0.75726,
            0,
            0
        ],
        '57357': [
            0.25142,
            0.75726,
            0,
            0
        ],
        '57358': [
            0.41951,
            0.91951,
            0,
            0
        ],
        '57359': [
            0.30274,
            0.79383,
            0,
            0
        ],
        '57360': [
            0.30274,
            0.79383,
            0,
            0
        ],
        '57361': [
            0.41951,
            0.91951,
            0,
            0
        ],
        '57366': [
            0.25142,
            0.75726,
            0,
            0
        ],
        '57367': [
            0.25142,
            0.75726,
            0,
            0
        ],
        '57368': [
            0.25142,
            0.75726,
            0,
            0
        ],
        '57369': [
            0.25142,
            0.75726,
            0,
            0
        ],
        '57370': [
            0.13597,
            0.63597,
            0,
            0
        ],
        '57371': [
            0.13597,
            0.63597,
            0,
            0
        ]
    },
    'Caligraphic-Regular': {
        '48': [
            0,
            0.43056,
            0,
            0
        ],
        '49': [
            0,
            0.43056,
            0,
            0
        ],
        '50': [
            0,
            0.43056,
            0,
            0
        ],
        '51': [
            0.19444,
            0.43056,
            0,
            0
        ],
        '52': [
            0.19444,
            0.43056,
            0,
            0
        ],
        '53': [
            0.19444,
            0.43056,
            0,
            0
        ],
        '54': [
            0,
            0.64444,
            0,
            0
        ],
        '55': [
            0.19444,
            0.43056,
            0,
            0
        ],
        '56': [
            0,
            0.64444,
            0,
            0
        ],
        '57': [
            0.19444,
            0.43056,
            0,
            0
        ],
        '65': [
            0,
            0.68333,
            0,
            0.19445
        ],
        '66': [
            0,
            0.68333,
            0.03041,
            0.13889
        ],
        '67': [
            0,
            0.68333,
            0.05834,
            0.13889
        ],
        '68': [
            0,
            0.68333,
            0.02778,
            0.08334
        ],
        '69': [
            0,
            0.68333,
            0.08944,
            0.11111
        ],
        '70': [
            0,
            0.68333,
            0.09931,
            0.11111
        ],
        '71': [
            0.09722,
            0.68333,
            0.0593,
            0.11111
        ],
        '72': [
            0,
            0.68333,
            0.00965,
            0.11111
        ],
        '73': [
            0,
            0.68333,
            0.07382,
            0
        ],
        '74': [
            0.09722,
            0.68333,
            0.18472,
            0.16667
        ],
        '75': [
            0,
            0.68333,
            0.01445,
            0.05556
        ],
        '76': [
            0,
            0.68333,
            0,
            0.13889
        ],
        '77': [
            0,
            0.68333,
            0,
            0.13889
        ],
        '78': [
            0,
            0.68333,
            0.14736,
            0.08334
        ],
        '79': [
            0,
            0.68333,
            0.02778,
            0.11111
        ],
        '80': [
            0,
            0.68333,
            0.08222,
            0.08334
        ],
        '81': [
            0.09722,
            0.68333,
            0,
            0.11111
        ],
        '82': [
            0,
            0.68333,
            0,
            0.08334
        ],
        '83': [
            0,
            0.68333,
            0.075,
            0.13889
        ],
        '84': [
            0,
            0.68333,
            0.25417,
            0
        ],
        '85': [
            0,
            0.68333,
            0.09931,
            0.08334
        ],
        '86': [
            0,
            0.68333,
            0.08222,
            0
        ],
        '87': [
            0,
            0.68333,
            0.08222,
            0.08334
        ],
        '88': [
            0,
            0.68333,
            0.14643,
            0.13889
        ],
        '89': [
            0.09722,
            0.68333,
            0.08222,
            0.08334
        ],
        '90': [
            0,
            0.68333,
            0.07944,
            0.13889
        ]
    },
    'Fraktur-Regular': {
        '33': [
            0,
            0.69141,
            0,
            0
        ],
        '34': [
            0,
            0.69141,
            0,
            0
        ],
        '38': [
            0,
            0.69141,
            0,
            0
        ],
        '39': [
            0,
            0.69141,
            0,
            0
        ],
        '40': [
            0.24982,
            0.74947,
            0,
            0
        ],
        '41': [
            0.24982,
            0.74947,
            0,
            0
        ],
        '42': [
            0,
            0.62119,
            0,
            0
        ],
        '43': [
            0.08319,
            0.58283,
            0,
            0
        ],
        '44': [
            0,
            0.10803,
            0,
            0
        ],
        '45': [
            0.08319,
            0.58283,
            0,
            0
        ],
        '46': [
            0,
            0.10803,
            0,
            0
        ],
        '47': [
            0.24982,
            0.74947,
            0,
            0
        ],
        '48': [
            0,
            0.47534,
            0,
            0
        ],
        '49': [
            0,
            0.47534,
            0,
            0
        ],
        '50': [
            0,
            0.47534,
            0,
            0
        ],
        '51': [
            0.18906,
            0.47534,
            0,
            0
        ],
        '52': [
            0.18906,
            0.47534,
            0,
            0
        ],
        '53': [
            0.18906,
            0.47534,
            0,
            0
        ],
        '54': [
            0,
            0.69141,
            0,
            0
        ],
        '55': [
            0.18906,
            0.47534,
            0,
            0
        ],
        '56': [
            0,
            0.69141,
            0,
            0
        ],
        '57': [
            0.18906,
            0.47534,
            0,
            0
        ],
        '58': [
            0,
            0.47534,
            0,
            0
        ],
        '59': [
            0.12604,
            0.47534,
            0,
            0
        ],
        '61': [
            -0.13099,
            0.36866,
            0,
            0
        ],
        '63': [
            0,
            0.69141,
            0,
            0
        ],
        '65': [
            0,
            0.69141,
            0,
            0
        ],
        '66': [
            0,
            0.69141,
            0,
            0
        ],
        '67': [
            0,
            0.69141,
            0,
            0
        ],
        '68': [
            0,
            0.69141,
            0,
            0
        ],
        '69': [
            0,
            0.69141,
            0,
            0
        ],
        '70': [
            0.12604,
            0.69141,
            0,
            0
        ],
        '71': [
            0,
            0.69141,
            0,
            0
        ],
        '72': [
            0.06302,
            0.69141,
            0,
            0
        ],
        '73': [
            0,
            0.69141,
            0,
            0
        ],
        '74': [
            0.12604,
            0.69141,
            0,
            0
        ],
        '75': [
            0,
            0.69141,
            0,
            0
        ],
        '76': [
            0,
            0.69141,
            0,
            0
        ],
        '77': [
            0,
            0.69141,
            0,
            0
        ],
        '78': [
            0,
            0.69141,
            0,
            0
        ],
        '79': [
            0,
            0.69141,
            0,
            0
        ],
        '80': [
            0.18906,
            0.69141,
            0,
            0
        ],
        '81': [
            0.03781,
            0.69141,
            0,
            0
        ],
        '82': [
            0,
            0.69141,
            0,
            0
        ],
        '83': [
            0,
            0.69141,
            0,
            0
        ],
        '84': [
            0,
            0.69141,
            0,
            0
        ],
        '85': [
            0,
            0.69141,
            0,
            0
        ],
        '86': [
            0,
            0.69141,
            0,
            0
        ],
        '87': [
            0,
            0.69141,
            0,
            0
        ],
        '88': [
            0,
            0.69141,
            0,
            0
        ],
        '89': [
            0.18906,
            0.69141,
            0,
            0
        ],
        '90': [
            0.12604,
            0.69141,
            0,
            0
        ],
        '91': [
            0.24982,
            0.74947,
            0,
            0
        ],
        '93': [
            0.24982,
            0.74947,
            0,
            0
        ],
        '94': [
            0,
            0.69141,
            0,
            0
        ],
        '97': [
            0,
            0.47534,
            0,
            0
        ],
        '98': [
            0,
            0.69141,
            0,
            0
        ],
        '99': [
            0,
            0.47534,
            0,
            0
        ],
        '100': [
            0,
            0.62119,
            0,
            0
        ],
        '101': [
            0,
            0.47534,
            0,
            0
        ],
        '102': [
            0.18906,
            0.69141,
            0,
            0
        ],
        '103': [
            0.18906,
            0.47534,
            0,
            0
        ],
        '104': [
            0.18906,
            0.69141,
            0,
            0
        ],
        '105': [
            0,
            0.69141,
            0,
            0
        ],
        '106': [
            0,
            0.69141,
            0,
            0
        ],
        '107': [
            0,
            0.69141,
            0,
            0
        ],
        '108': [
            0,
            0.69141,
            0,
            0
        ],
        '109': [
            0,
            0.47534,
            0,
            0
        ],
        '110': [
            0,
            0.47534,
            0,
            0
        ],
        '111': [
            0,
            0.47534,
            0,
            0
        ],
        '112': [
            0.18906,
            0.52396,
            0,
            0
        ],
        '113': [
            0.18906,
            0.47534,
            0,
            0
        ],
        '114': [
            0,
            0.47534,
            0,
            0
        ],
        '115': [
            0,
            0.47534,
            0,
            0
        ],
        '116': [
            0,
            0.62119,
            0,
            0
        ],
        '117': [
            0,
            0.47534,
            0,
            0
        ],
        '118': [
            0,
            0.52396,
            0,
            0
        ],
        '119': [
            0,
            0.52396,
            0,
            0
        ],
        '120': [
            0.18906,
            0.47534,
            0,
            0
        ],
        '121': [
            0.18906,
            0.47534,
            0,
            0
        ],
        '122': [
            0.18906,
            0.47534,
            0,
            0
        ],
        '8216': [
            0,
            0.69141,
            0,
            0
        ],
        '8217': [
            0,
            0.69141,
            0,
            0
        ],
        '58112': [
            0,
            0.62119,
            0,
            0
        ],
        '58113': [
            0,
            0.62119,
            0,
            0
        ],
        '58114': [
            0.18906,
            0.69141,
            0,
            0
        ],
        '58115': [
            0.18906,
            0.69141,
            0,
            0
        ],
        '58116': [
            0.18906,
            0.47534,
            0,
            0
        ],
        '58117': [
            0,
            0.69141,
            0,
            0
        ],
        '58118': [
            0,
            0.62119,
            0,
            0
        ],
        '58119': [
            0,
            0.47534,
            0,
            0
        ]
    },
    'Main-Bold': {
        '33': [
            0,
            0.69444,
            0,
            0
        ],
        '34': [
            0,
            0.69444,
            0,
            0
        ],
        '35': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '36': [
            0.05556,
            0.75,
            0,
            0
        ],
        '37': [
            0.05556,
            0.75,
            0,
            0
        ],
        '38': [
            0,
            0.69444,
            0,
            0
        ],
        '39': [
            0,
            0.69444,
            0,
            0
        ],
        '40': [
            0.25,
            0.75,
            0,
            0
        ],
        '41': [
            0.25,
            0.75,
            0,
            0
        ],
        '42': [
            0,
            0.75,
            0,
            0
        ],
        '43': [
            0.13333,
            0.63333,
            0,
            0
        ],
        '44': [
            0.19444,
            0.15556,
            0,
            0
        ],
        '45': [
            0,
            0.44444,
            0,
            0
        ],
        '46': [
            0,
            0.15556,
            0,
            0
        ],
        '47': [
            0.25,
            0.75,
            0,
            0
        ],
        '48': [
            0,
            0.64444,
            0,
            0
        ],
        '49': [
            0,
            0.64444,
            0,
            0
        ],
        '50': [
            0,
            0.64444,
            0,
            0
        ],
        '51': [
            0,
            0.64444,
            0,
            0
        ],
        '52': [
            0,
            0.64444,
            0,
            0
        ],
        '53': [
            0,
            0.64444,
            0,
            0
        ],
        '54': [
            0,
            0.64444,
            0,
            0
        ],
        '55': [
            0,
            0.64444,
            0,
            0
        ],
        '56': [
            0,
            0.64444,
            0,
            0
        ],
        '57': [
            0,
            0.64444,
            0,
            0
        ],
        '58': [
            0,
            0.44444,
            0,
            0
        ],
        '59': [
            0.19444,
            0.44444,
            0,
            0
        ],
        '60': [
            0.08556,
            0.58556,
            0,
            0
        ],
        '61': [
            -0.10889,
            0.39111,
            0,
            0
        ],
        '62': [
            0.08556,
            0.58556,
            0,
            0
        ],
        '63': [
            0,
            0.69444,
            0,
            0
        ],
        '64': [
            0,
            0.69444,
            0,
            0
        ],
        '65': [
            0,
            0.68611,
            0,
            0
        ],
        '66': [
            0,
            0.68611,
            0,
            0
        ],
        '67': [
            0,
            0.68611,
            0,
            0
        ],
        '68': [
            0,
            0.68611,
            0,
            0
        ],
        '69': [
            0,
            0.68611,
            0,
            0
        ],
        '70': [
            0,
            0.68611,
            0,
            0
        ],
        '71': [
            0,
            0.68611,
            0,
            0
        ],
        '72': [
            0,
            0.68611,
            0,
            0
        ],
        '73': [
            0,
            0.68611,
            0,
            0
        ],
        '74': [
            0,
            0.68611,
            0,
            0
        ],
        '75': [
            0,
            0.68611,
            0,
            0
        ],
        '76': [
            0,
            0.68611,
            0,
            0
        ],
        '77': [
            0,
            0.68611,
            0,
            0
        ],
        '78': [
            0,
            0.68611,
            0,
            0
        ],
        '79': [
            0,
            0.68611,
            0,
            0
        ],
        '80': [
            0,
            0.68611,
            0,
            0
        ],
        '81': [
            0.19444,
            0.68611,
            0,
            0
        ],
        '82': [
            0,
            0.68611,
            0,
            0
        ],
        '83': [
            0,
            0.68611,
            0,
            0
        ],
        '84': [
            0,
            0.68611,
            0,
            0
        ],
        '85': [
            0,
            0.68611,
            0,
            0
        ],
        '86': [
            0,
            0.68611,
            0.01597,
            0
        ],
        '87': [
            0,
            0.68611,
            0.01597,
            0
        ],
        '88': [
            0,
            0.68611,
            0,
            0
        ],
        '89': [
            0,
            0.68611,
            0.02875,
            0
        ],
        '90': [
            0,
            0.68611,
            0,
            0
        ],
        '91': [
            0.25,
            0.75,
            0,
            0
        ],
        '92': [
            0.25,
            0.75,
            0,
            0
        ],
        '93': [
            0.25,
            0.75,
            0,
            0
        ],
        '94': [
            0,
            0.69444,
            0,
            0
        ],
        '95': [
            0.31,
            0.13444,
            0.03194,
            0
        ],
        '96': [
            0,
            0.69444,
            0,
            0
        ],
        '97': [
            0,
            0.44444,
            0,
            0
        ],
        '98': [
            0,
            0.69444,
            0,
            0
        ],
        '99': [
            0,
            0.44444,
            0,
            0
        ],
        '100': [
            0,
            0.69444,
            0,
            0
        ],
        '101': [
            0,
            0.44444,
            0,
            0
        ],
        '102': [
            0,
            0.69444,
            0.10903,
            0
        ],
        '103': [
            0.19444,
            0.44444,
            0.01597,
            0
        ],
        '104': [
            0,
            0.69444,
            0,
            0
        ],
        '105': [
            0,
            0.69444,
            0,
            0
        ],
        '106': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '107': [
            0,
            0.69444,
            0,
            0
        ],
        '108': [
            0,
            0.69444,
            0,
            0
        ],
        '109': [
            0,
            0.44444,
            0,
            0
        ],
        '110': [
            0,
            0.44444,
            0,
            0
        ],
        '111': [
            0,
            0.44444,
            0,
            0
        ],
        '112': [
            0.19444,
            0.44444,
            0,
            0
        ],
        '113': [
            0.19444,
            0.44444,
            0,
            0
        ],
        '114': [
            0,
            0.44444,
            0,
            0
        ],
        '115': [
            0,
            0.44444,
            0,
            0
        ],
        '116': [
            0,
            0.63492,
            0,
            0
        ],
        '117': [
            0,
            0.44444,
            0,
            0
        ],
        '118': [
            0,
            0.44444,
            0.01597,
            0
        ],
        '119': [
            0,
            0.44444,
            0.01597,
            0
        ],
        '120': [
            0,
            0.44444,
            0,
            0
        ],
        '121': [
            0.19444,
            0.44444,
            0.01597,
            0
        ],
        '122': [
            0,
            0.44444,
            0,
            0
        ],
        '123': [
            0.25,
            0.75,
            0,
            0
        ],
        '124': [
            0.25,
            0.75,
            0,
            0
        ],
        '125': [
            0.25,
            0.75,
            0,
            0
        ],
        '126': [
            0.35,
            0.34444,
            0,
            0
        ],
        '168': [
            0,
            0.69444,
            0,
            0
        ],
        '172': [
            0,
            0.44444,
            0,
            0
        ],
        '175': [
            0,
            0.59611,
            0,
            0
        ],
        '176': [
            0,
            0.69444,
            0,
            0
        ],
        '177': [
            0.13333,
            0.63333,
            0,
            0
        ],
        '180': [
            0,
            0.69444,
            0,
            0
        ],
        '215': [
            0.13333,
            0.63333,
            0,
            0
        ],
        '247': [
            0.13333,
            0.63333,
            0,
            0
        ],
        '305': [
            0,
            0.44444,
            0,
            0
        ],
        '567': [
            0.19444,
            0.44444,
            0,
            0
        ],
        '710': [
            0,
            0.69444,
            0,
            0
        ],
        '711': [
            0,
            0.63194,
            0,
            0
        ],
        '713': [
            0,
            0.59611,
            0,
            0
        ],
        '714': [
            0,
            0.69444,
            0,
            0
        ],
        '715': [
            0,
            0.69444,
            0,
            0
        ],
        '728': [
            0,
            0.69444,
            0,
            0
        ],
        '729': [
            0,
            0.69444,
            0,
            0
        ],
        '730': [
            0,
            0.69444,
            0,
            0
        ],
        '732': [
            0,
            0.69444,
            0,
            0
        ],
        '768': [
            0,
            0.69444,
            0,
            0
        ],
        '769': [
            0,
            0.69444,
            0,
            0
        ],
        '770': [
            0,
            0.69444,
            0,
            0
        ],
        '771': [
            0,
            0.69444,
            0,
            0
        ],
        '772': [
            0,
            0.59611,
            0,
            0
        ],
        '774': [
            0,
            0.69444,
            0,
            0
        ],
        '775': [
            0,
            0.69444,
            0,
            0
        ],
        '776': [
            0,
            0.69444,
            0,
            0
        ],
        '778': [
            0,
            0.69444,
            0,
            0
        ],
        '779': [
            0,
            0.69444,
            0,
            0
        ],
        '780': [
            0,
            0.63194,
            0,
            0
        ],
        '824': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '915': [
            0,
            0.68611,
            0,
            0
        ],
        '916': [
            0,
            0.68611,
            0,
            0
        ],
        '920': [
            0,
            0.68611,
            0,
            0
        ],
        '923': [
            0,
            0.68611,
            0,
            0
        ],
        '926': [
            0,
            0.68611,
            0,
            0
        ],
        '928': [
            0,
            0.68611,
            0,
            0
        ],
        '931': [
            0,
            0.68611,
            0,
            0
        ],
        '933': [
            0,
            0.68611,
            0,
            0
        ],
        '934': [
            0,
            0.68611,
            0,
            0
        ],
        '936': [
            0,
            0.68611,
            0,
            0
        ],
        '937': [
            0,
            0.68611,
            0,
            0
        ],
        '8211': [
            0,
            0.44444,
            0.03194,
            0
        ],
        '8212': [
            0,
            0.44444,
            0.03194,
            0
        ],
        '8216': [
            0,
            0.69444,
            0,
            0
        ],
        '8217': [
            0,
            0.69444,
            0,
            0
        ],
        '8220': [
            0,
            0.69444,
            0,
            0
        ],
        '8221': [
            0,
            0.69444,
            0,
            0
        ],
        '8224': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8225': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8242': [
            0,
            0.55556,
            0,
            0
        ],
        '8407': [
            0,
            0.72444,
            0.15486,
            0
        ],
        '8463': [
            0,
            0.69444,
            0,
            0
        ],
        '8465': [
            0,
            0.69444,
            0,
            0
        ],
        '8467': [
            0,
            0.69444,
            0,
            0
        ],
        '8472': [
            0.19444,
            0.44444,
            0,
            0
        ],
        '8476': [
            0,
            0.69444,
            0,
            0
        ],
        '8501': [
            0,
            0.69444,
            0,
            0
        ],
        '8592': [
            -0.10889,
            0.39111,
            0,
            0
        ],
        '8593': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8594': [
            -0.10889,
            0.39111,
            0,
            0
        ],
        '8595': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8596': [
            -0.10889,
            0.39111,
            0,
            0
        ],
        '8597': [
            0.25,
            0.75,
            0,
            0
        ],
        '8598': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8599': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8600': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8601': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8636': [
            -0.10889,
            0.39111,
            0,
            0
        ],
        '8637': [
            -0.10889,
            0.39111,
            0,
            0
        ],
        '8640': [
            -0.10889,
            0.39111,
            0,
            0
        ],
        '8641': [
            -0.10889,
            0.39111,
            0,
            0
        ],
        '8656': [
            -0.10889,
            0.39111,
            0,
            0
        ],
        '8657': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8658': [
            -0.10889,
            0.39111,
            0,
            0
        ],
        '8659': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8660': [
            -0.10889,
            0.39111,
            0,
            0
        ],
        '8661': [
            0.25,
            0.75,
            0,
            0
        ],
        '8704': [
            0,
            0.69444,
            0,
            0
        ],
        '8706': [
            0,
            0.69444,
            0.06389,
            0
        ],
        '8707': [
            0,
            0.69444,
            0,
            0
        ],
        '8709': [
            0.05556,
            0.75,
            0,
            0
        ],
        '8711': [
            0,
            0.68611,
            0,
            0
        ],
        '8712': [
            0.08556,
            0.58556,
            0,
            0
        ],
        '8715': [
            0.08556,
            0.58556,
            0,
            0
        ],
        '8722': [
            0.13333,
            0.63333,
            0,
            0
        ],
        '8723': [
            0.13333,
            0.63333,
            0,
            0
        ],
        '8725': [
            0.25,
            0.75,
            0,
            0
        ],
        '8726': [
            0.25,
            0.75,
            0,
            0
        ],
        '8727': [
            -0.02778,
            0.47222,
            0,
            0
        ],
        '8728': [
            -0.02639,
            0.47361,
            0,
            0
        ],
        '8729': [
            -0.02639,
            0.47361,
            0,
            0
        ],
        '8730': [
            0.18,
            0.82,
            0,
            0
        ],
        '8733': [
            0,
            0.44444,
            0,
            0
        ],
        '8734': [
            0,
            0.44444,
            0,
            0
        ],
        '8736': [
            0,
            0.69224,
            0,
            0
        ],
        '8739': [
            0.25,
            0.75,
            0,
            0
        ],
        '8741': [
            0.25,
            0.75,
            0,
            0
        ],
        '8743': [
            0,
            0.55556,
            0,
            0
        ],
        '8744': [
            0,
            0.55556,
            0,
            0
        ],
        '8745': [
            0,
            0.55556,
            0,
            0
        ],
        '8746': [
            0,
            0.55556,
            0,
            0
        ],
        '8747': [
            0.19444,
            0.69444,
            0.12778,
            0
        ],
        '8764': [
            -0.10889,
            0.39111,
            0,
            0
        ],
        '8768': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8771': [
            0.00222,
            0.50222,
            0,
            0
        ],
        '8776': [
            0.02444,
            0.52444,
            0,
            0
        ],
        '8781': [
            0.00222,
            0.50222,
            0,
            0
        ],
        '8801': [
            0.00222,
            0.50222,
            0,
            0
        ],
        '8804': [
            0.19667,
            0.69667,
            0,
            0
        ],
        '8805': [
            0.19667,
            0.69667,
            0,
            0
        ],
        '8810': [
            0.08556,
            0.58556,
            0,
            0
        ],
        '8811': [
            0.08556,
            0.58556,
            0,
            0
        ],
        '8826': [
            0.08556,
            0.58556,
            0,
            0
        ],
        '8827': [
            0.08556,
            0.58556,
            0,
            0
        ],
        '8834': [
            0.08556,
            0.58556,
            0,
            0
        ],
        '8835': [
            0.08556,
            0.58556,
            0,
            0
        ],
        '8838': [
            0.19667,
            0.69667,
            0,
            0
        ],
        '8839': [
            0.19667,
            0.69667,
            0,
            0
        ],
        '8846': [
            0,
            0.55556,
            0,
            0
        ],
        '8849': [
            0.19667,
            0.69667,
            0,
            0
        ],
        '8850': [
            0.19667,
            0.69667,
            0,
            0
        ],
        '8851': [
            0,
            0.55556,
            0,
            0
        ],
        '8852': [
            0,
            0.55556,
            0,
            0
        ],
        '8853': [
            0.13333,
            0.63333,
            0,
            0
        ],
        '8854': [
            0.13333,
            0.63333,
            0,
            0
        ],
        '8855': [
            0.13333,
            0.63333,
            0,
            0
        ],
        '8856': [
            0.13333,
            0.63333,
            0,
            0
        ],
        '8857': [
            0.13333,
            0.63333,
            0,
            0
        ],
        '8866': [
            0,
            0.69444,
            0,
            0
        ],
        '8867': [
            0,
            0.69444,
            0,
            0
        ],
        '8868': [
            0,
            0.69444,
            0,
            0
        ],
        '8869': [
            0,
            0.69444,
            0,
            0
        ],
        '8900': [
            -0.02639,
            0.47361,
            0,
            0
        ],
        '8901': [
            -0.02639,
            0.47361,
            0,
            0
        ],
        '8902': [
            -0.02778,
            0.47222,
            0,
            0
        ],
        '8968': [
            0.25,
            0.75,
            0,
            0
        ],
        '8969': [
            0.25,
            0.75,
            0,
            0
        ],
        '8970': [
            0.25,
            0.75,
            0,
            0
        ],
        '8971': [
            0.25,
            0.75,
            0,
            0
        ],
        '8994': [
            -0.13889,
            0.36111,
            0,
            0
        ],
        '8995': [
            -0.13889,
            0.36111,
            0,
            0
        ],
        '9651': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '9657': [
            -0.02778,
            0.47222,
            0,
            0
        ],
        '9661': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '9667': [
            -0.02778,
            0.47222,
            0,
            0
        ],
        '9711': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '9824': [
            0.12963,
            0.69444,
            0,
            0
        ],
        '9825': [
            0.12963,
            0.69444,
            0,
            0
        ],
        '9826': [
            0.12963,
            0.69444,
            0,
            0
        ],
        '9827': [
            0.12963,
            0.69444,
            0,
            0
        ],
        '9837': [
            0,
            0.75,
            0,
            0
        ],
        '9838': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '9839': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '10216': [
            0.25,
            0.75,
            0,
            0
        ],
        '10217': [
            0.25,
            0.75,
            0,
            0
        ],
        '10815': [
            0,
            0.68611,
            0,
            0
        ],
        '10927': [
            0.19667,
            0.69667,
            0,
            0
        ],
        '10928': [
            0.19667,
            0.69667,
            0,
            0
        ]
    },
    'Main-Italic': {
        '33': [
            0,
            0.69444,
            0.12417,
            0
        ],
        '34': [
            0,
            0.69444,
            0.06961,
            0
        ],
        '35': [
            0.19444,
            0.69444,
            0.06616,
            0
        ],
        '37': [
            0.05556,
            0.75,
            0.13639,
            0
        ],
        '38': [
            0,
            0.69444,
            0.09694,
            0
        ],
        '39': [
            0,
            0.69444,
            0.12417,
            0
        ],
        '40': [
            0.25,
            0.75,
            0.16194,
            0
        ],
        '41': [
            0.25,
            0.75,
            0.03694,
            0
        ],
        '42': [
            0,
            0.75,
            0.14917,
            0
        ],
        '43': [
            0.05667,
            0.56167,
            0.03694,
            0
        ],
        '44': [
            0.19444,
            0.10556,
            0,
            0
        ],
        '45': [
            0,
            0.43056,
            0.02826,
            0
        ],
        '46': [
            0,
            0.10556,
            0,
            0
        ],
        '47': [
            0.25,
            0.75,
            0.16194,
            0
        ],
        '48': [
            0,
            0.64444,
            0.13556,
            0
        ],
        '49': [
            0,
            0.64444,
            0.13556,
            0
        ],
        '50': [
            0,
            0.64444,
            0.13556,
            0
        ],
        '51': [
            0,
            0.64444,
            0.13556,
            0
        ],
        '52': [
            0.19444,
            0.64444,
            0.13556,
            0
        ],
        '53': [
            0,
            0.64444,
            0.13556,
            0
        ],
        '54': [
            0,
            0.64444,
            0.13556,
            0
        ],
        '55': [
            0.19444,
            0.64444,
            0.13556,
            0
        ],
        '56': [
            0,
            0.64444,
            0.13556,
            0
        ],
        '57': [
            0,
            0.64444,
            0.13556,
            0
        ],
        '58': [
            0,
            0.43056,
            0.0582,
            0
        ],
        '59': [
            0.19444,
            0.43056,
            0.0582,
            0
        ],
        '61': [
            -0.13313,
            0.36687,
            0.06616,
            0
        ],
        '63': [
            0,
            0.69444,
            0.1225,
            0
        ],
        '64': [
            0,
            0.69444,
            0.09597,
            0
        ],
        '65': [
            0,
            0.68333,
            0,
            0
        ],
        '66': [
            0,
            0.68333,
            0.10257,
            0
        ],
        '67': [
            0,
            0.68333,
            0.14528,
            0
        ],
        '68': [
            0,
            0.68333,
            0.09403,
            0
        ],
        '69': [
            0,
            0.68333,
            0.12028,
            0
        ],
        '70': [
            0,
            0.68333,
            0.13305,
            0
        ],
        '71': [
            0,
            0.68333,
            0.08722,
            0
        ],
        '72': [
            0,
            0.68333,
            0.16389,
            0
        ],
        '73': [
            0,
            0.68333,
            0.15806,
            0
        ],
        '74': [
            0,
            0.68333,
            0.14028,
            0
        ],
        '75': [
            0,
            0.68333,
            0.14528,
            0
        ],
        '76': [
            0,
            0.68333,
            0,
            0
        ],
        '77': [
            0,
            0.68333,
            0.16389,
            0
        ],
        '78': [
            0,
            0.68333,
            0.16389,
            0
        ],
        '79': [
            0,
            0.68333,
            0.09403,
            0
        ],
        '80': [
            0,
            0.68333,
            0.10257,
            0
        ],
        '81': [
            0.19444,
            0.68333,
            0.09403,
            0
        ],
        '82': [
            0,
            0.68333,
            0.03868,
            0
        ],
        '83': [
            0,
            0.68333,
            0.11972,
            0
        ],
        '84': [
            0,
            0.68333,
            0.13305,
            0
        ],
        '85': [
            0,
            0.68333,
            0.16389,
            0
        ],
        '86': [
            0,
            0.68333,
            0.18361,
            0
        ],
        '87': [
            0,
            0.68333,
            0.18361,
            0
        ],
        '88': [
            0,
            0.68333,
            0.15806,
            0
        ],
        '89': [
            0,
            0.68333,
            0.19383,
            0
        ],
        '90': [
            0,
            0.68333,
            0.14528,
            0
        ],
        '91': [
            0.25,
            0.75,
            0.1875,
            0
        ],
        '93': [
            0.25,
            0.75,
            0.10528,
            0
        ],
        '94': [
            0,
            0.69444,
            0.06646,
            0
        ],
        '95': [
            0.31,
            0.12056,
            0.09208,
            0
        ],
        '97': [
            0,
            0.43056,
            0.07671,
            0
        ],
        '98': [
            0,
            0.69444,
            0.06312,
            0
        ],
        '99': [
            0,
            0.43056,
            0.05653,
            0
        ],
        '100': [
            0,
            0.69444,
            0.10333,
            0
        ],
        '101': [
            0,
            0.43056,
            0.07514,
            0
        ],
        '102': [
            0.19444,
            0.69444,
            0.21194,
            0
        ],
        '103': [
            0.19444,
            0.43056,
            0.08847,
            0
        ],
        '104': [
            0,
            0.69444,
            0.07671,
            0
        ],
        '105': [
            0,
            0.65536,
            0.1019,
            0
        ],
        '106': [
            0.19444,
            0.65536,
            0.14467,
            0
        ],
        '107': [
            0,
            0.69444,
            0.10764,
            0
        ],
        '108': [
            0,
            0.69444,
            0.10333,
            0
        ],
        '109': [
            0,
            0.43056,
            0.07671,
            0
        ],
        '110': [
            0,
            0.43056,
            0.07671,
            0
        ],
        '111': [
            0,
            0.43056,
            0.06312,
            0
        ],
        '112': [
            0.19444,
            0.43056,
            0.06312,
            0
        ],
        '113': [
            0.19444,
            0.43056,
            0.08847,
            0
        ],
        '114': [
            0,
            0.43056,
            0.10764,
            0
        ],
        '115': [
            0,
            0.43056,
            0.08208,
            0
        ],
        '116': [
            0,
            0.61508,
            0.09486,
            0
        ],
        '117': [
            0,
            0.43056,
            0.07671,
            0
        ],
        '118': [
            0,
            0.43056,
            0.10764,
            0
        ],
        '119': [
            0,
            0.43056,
            0.10764,
            0
        ],
        '120': [
            0,
            0.43056,
            0.12042,
            0
        ],
        '121': [
            0.19444,
            0.43056,
            0.08847,
            0
        ],
        '122': [
            0,
            0.43056,
            0.12292,
            0
        ],
        '126': [
            0.35,
            0.31786,
            0.11585,
            0
        ],
        '163': [
            0,
            0.69444,
            0,
            0
        ],
        '305': [
            0,
            0.43056,
            0,
            0.02778
        ],
        '567': [
            0.19444,
            0.43056,
            0,
            0.08334
        ],
        '768': [
            0,
            0.69444,
            0,
            0
        ],
        '769': [
            0,
            0.69444,
            0.09694,
            0
        ],
        '770': [
            0,
            0.69444,
            0.06646,
            0
        ],
        '771': [
            0,
            0.66786,
            0.11585,
            0
        ],
        '772': [
            0,
            0.56167,
            0.10333,
            0
        ],
        '774': [
            0,
            0.69444,
            0.10806,
            0
        ],
        '775': [
            0,
            0.66786,
            0.11752,
            0
        ],
        '776': [
            0,
            0.66786,
            0.10474,
            0
        ],
        '778': [
            0,
            0.69444,
            0,
            0
        ],
        '779': [
            0,
            0.69444,
            0.1225,
            0
        ],
        '780': [
            0,
            0.62847,
            0.08295,
            0
        ],
        '915': [
            0,
            0.68333,
            0.13305,
            0
        ],
        '916': [
            0,
            0.68333,
            0,
            0
        ],
        '920': [
            0,
            0.68333,
            0.09403,
            0
        ],
        '923': [
            0,
            0.68333,
            0,
            0
        ],
        '926': [
            0,
            0.68333,
            0.15294,
            0
        ],
        '928': [
            0,
            0.68333,
            0.16389,
            0
        ],
        '931': [
            0,
            0.68333,
            0.12028,
            0
        ],
        '933': [
            0,
            0.68333,
            0.11111,
            0
        ],
        '934': [
            0,
            0.68333,
            0.05986,
            0
        ],
        '936': [
            0,
            0.68333,
            0.11111,
            0
        ],
        '937': [
            0,
            0.68333,
            0.10257,
            0
        ],
        '8211': [
            0,
            0.43056,
            0.09208,
            0
        ],
        '8212': [
            0,
            0.43056,
            0.09208,
            0
        ],
        '8216': [
            0,
            0.69444,
            0.12417,
            0
        ],
        '8217': [
            0,
            0.69444,
            0.12417,
            0
        ],
        '8220': [
            0,
            0.69444,
            0.1685,
            0
        ],
        '8221': [
            0,
            0.69444,
            0.06961,
            0
        ],
        '8463': [
            0,
            0.68889,
            0,
            0
        ]
    },
    'Main-Regular': {
        '32': [
            0,
            0,
            0,
            0
        ],
        '33': [
            0,
            0.69444,
            0,
            0
        ],
        '34': [
            0,
            0.69444,
            0,
            0
        ],
        '35': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '36': [
            0.05556,
            0.75,
            0,
            0
        ],
        '37': [
            0.05556,
            0.75,
            0,
            0
        ],
        '38': [
            0,
            0.69444,
            0,
            0
        ],
        '39': [
            0,
            0.69444,
            0,
            0
        ],
        '40': [
            0.25,
            0.75,
            0,
            0
        ],
        '41': [
            0.25,
            0.75,
            0,
            0
        ],
        '42': [
            0,
            0.75,
            0,
            0
        ],
        '43': [
            0.08333,
            0.58333,
            0,
            0
        ],
        '44': [
            0.19444,
            0.10556,
            0,
            0
        ],
        '45': [
            0,
            0.43056,
            0,
            0
        ],
        '46': [
            0,
            0.10556,
            0,
            0
        ],
        '47': [
            0.25,
            0.75,
            0,
            0
        ],
        '48': [
            0,
            0.64444,
            0,
            0
        ],
        '49': [
            0,
            0.64444,
            0,
            0
        ],
        '50': [
            0,
            0.64444,
            0,
            0
        ],
        '51': [
            0,
            0.64444,
            0,
            0
        ],
        '52': [
            0,
            0.64444,
            0,
            0
        ],
        '53': [
            0,
            0.64444,
            0,
            0
        ],
        '54': [
            0,
            0.64444,
            0,
            0
        ],
        '55': [
            0,
            0.64444,
            0,
            0
        ],
        '56': [
            0,
            0.64444,
            0,
            0
        ],
        '57': [
            0,
            0.64444,
            0,
            0
        ],
        '58': [
            0,
            0.43056,
            0,
            0
        ],
        '59': [
            0.19444,
            0.43056,
            0,
            0
        ],
        '60': [
            0.0391,
            0.5391,
            0,
            0
        ],
        '61': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '62': [
            0.0391,
            0.5391,
            0,
            0
        ],
        '63': [
            0,
            0.69444,
            0,
            0
        ],
        '64': [
            0,
            0.69444,
            0,
            0
        ],
        '65': [
            0,
            0.68333,
            0,
            0
        ],
        '66': [
            0,
            0.68333,
            0,
            0
        ],
        '67': [
            0,
            0.68333,
            0,
            0
        ],
        '68': [
            0,
            0.68333,
            0,
            0
        ],
        '69': [
            0,
            0.68333,
            0,
            0
        ],
        '70': [
            0,
            0.68333,
            0,
            0
        ],
        '71': [
            0,
            0.68333,
            0,
            0
        ],
        '72': [
            0,
            0.68333,
            0,
            0
        ],
        '73': [
            0,
            0.68333,
            0,
            0
        ],
        '74': [
            0,
            0.68333,
            0,
            0
        ],
        '75': [
            0,
            0.68333,
            0,
            0
        ],
        '76': [
            0,
            0.68333,
            0,
            0
        ],
        '77': [
            0,
            0.68333,
            0,
            0
        ],
        '78': [
            0,
            0.68333,
            0,
            0
        ],
        '79': [
            0,
            0.68333,
            0,
            0
        ],
        '80': [
            0,
            0.68333,
            0,
            0
        ],
        '81': [
            0.19444,
            0.68333,
            0,
            0
        ],
        '82': [
            0,
            0.68333,
            0,
            0
        ],
        '83': [
            0,
            0.68333,
            0,
            0
        ],
        '84': [
            0,
            0.68333,
            0,
            0
        ],
        '85': [
            0,
            0.68333,
            0,
            0
        ],
        '86': [
            0,
            0.68333,
            0.01389,
            0
        ],
        '87': [
            0,
            0.68333,
            0.01389,
            0
        ],
        '88': [
            0,
            0.68333,
            0,
            0
        ],
        '89': [
            0,
            0.68333,
            0.025,
            0
        ],
        '90': [
            0,
            0.68333,
            0,
            0
        ],
        '91': [
            0.25,
            0.75,
            0,
            0
        ],
        '92': [
            0.25,
            0.75,
            0,
            0
        ],
        '93': [
            0.25,
            0.75,
            0,
            0
        ],
        '94': [
            0,
            0.69444,
            0,
            0
        ],
        '95': [
            0.31,
            0.12056,
            0.02778,
            0
        ],
        '96': [
            0,
            0.69444,
            0,
            0
        ],
        '97': [
            0,
            0.43056,
            0,
            0
        ],
        '98': [
            0,
            0.69444,
            0,
            0
        ],
        '99': [
            0,
            0.43056,
            0,
            0
        ],
        '100': [
            0,
            0.69444,
            0,
            0
        ],
        '101': [
            0,
            0.43056,
            0,
            0
        ],
        '102': [
            0,
            0.69444,
            0.07778,
            0
        ],
        '103': [
            0.19444,
            0.43056,
            0.01389,
            0
        ],
        '104': [
            0,
            0.69444,
            0,
            0
        ],
        '105': [
            0,
            0.66786,
            0,
            0
        ],
        '106': [
            0.19444,
            0.66786,
            0,
            0
        ],
        '107': [
            0,
            0.69444,
            0,
            0
        ],
        '108': [
            0,
            0.69444,
            0,
            0
        ],
        '109': [
            0,
            0.43056,
            0,
            0
        ],
        '110': [
            0,
            0.43056,
            0,
            0
        ],
        '111': [
            0,
            0.43056,
            0,
            0
        ],
        '112': [
            0.19444,
            0.43056,
            0,
            0
        ],
        '113': [
            0.19444,
            0.43056,
            0,
            0
        ],
        '114': [
            0,
            0.43056,
            0,
            0
        ],
        '115': [
            0,
            0.43056,
            0,
            0
        ],
        '116': [
            0,
            0.61508,
            0,
            0
        ],
        '117': [
            0,
            0.43056,
            0,
            0
        ],
        '118': [
            0,
            0.43056,
            0.01389,
            0
        ],
        '119': [
            0,
            0.43056,
            0.01389,
            0
        ],
        '120': [
            0,
            0.43056,
            0,
            0
        ],
        '121': [
            0.19444,
            0.43056,
            0.01389,
            0
        ],
        '122': [
            0,
            0.43056,
            0,
            0
        ],
        '123': [
            0.25,
            0.75,
            0,
            0
        ],
        '124': [
            0.25,
            0.75,
            0,
            0
        ],
        '125': [
            0.25,
            0.75,
            0,
            0
        ],
        '126': [
            0.35,
            0.31786,
            0,
            0
        ],
        '160': [
            0,
            0,
            0,
            0
        ],
        '168': [
            0,
            0.66786,
            0,
            0
        ],
        '172': [
            0,
            0.43056,
            0,
            0
        ],
        '175': [
            0,
            0.56778,
            0,
            0
        ],
        '176': [
            0,
            0.69444,
            0,
            0
        ],
        '177': [
            0.08333,
            0.58333,
            0,
            0
        ],
        '180': [
            0,
            0.69444,
            0,
            0
        ],
        '215': [
            0.08333,
            0.58333,
            0,
            0
        ],
        '247': [
            0.08333,
            0.58333,
            0,
            0
        ],
        '305': [
            0,
            0.43056,
            0,
            0
        ],
        '567': [
            0.19444,
            0.43056,
            0,
            0
        ],
        '710': [
            0,
            0.69444,
            0,
            0
        ],
        '711': [
            0,
            0.62847,
            0,
            0
        ],
        '713': [
            0,
            0.56778,
            0,
            0
        ],
        '714': [
            0,
            0.69444,
            0,
            0
        ],
        '715': [
            0,
            0.69444,
            0,
            0
        ],
        '728': [
            0,
            0.69444,
            0,
            0
        ],
        '729': [
            0,
            0.66786,
            0,
            0
        ],
        '730': [
            0,
            0.69444,
            0,
            0
        ],
        '732': [
            0,
            0.66786,
            0,
            0
        ],
        '768': [
            0,
            0.69444,
            0,
            0
        ],
        '769': [
            0,
            0.69444,
            0,
            0
        ],
        '770': [
            0,
            0.69444,
            0,
            0
        ],
        '771': [
            0,
            0.66786,
            0,
            0
        ],
        '772': [
            0,
            0.56778,
            0,
            0
        ],
        '774': [
            0,
            0.69444,
            0,
            0
        ],
        '775': [
            0,
            0.66786,
            0,
            0
        ],
        '776': [
            0,
            0.66786,
            0,
            0
        ],
        '778': [
            0,
            0.69444,
            0,
            0
        ],
        '779': [
            0,
            0.69444,
            0,
            0
        ],
        '780': [
            0,
            0.62847,
            0,
            0
        ],
        '824': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '915': [
            0,
            0.68333,
            0,
            0
        ],
        '916': [
            0,
            0.68333,
            0,
            0
        ],
        '920': [
            0,
            0.68333,
            0,
            0
        ],
        '923': [
            0,
            0.68333,
            0,
            0
        ],
        '926': [
            0,
            0.68333,
            0,
            0
        ],
        '928': [
            0,
            0.68333,
            0,
            0
        ],
        '931': [
            0,
            0.68333,
            0,
            0
        ],
        '933': [
            0,
            0.68333,
            0,
            0
        ],
        '934': [
            0,
            0.68333,
            0,
            0
        ],
        '936': [
            0,
            0.68333,
            0,
            0
        ],
        '937': [
            0,
            0.68333,
            0,
            0
        ],
        '8211': [
            0,
            0.43056,
            0.02778,
            0
        ],
        '8212': [
            0,
            0.43056,
            0.02778,
            0
        ],
        '8216': [
            0,
            0.69444,
            0,
            0
        ],
        '8217': [
            0,
            0.69444,
            0,
            0
        ],
        '8220': [
            0,
            0.69444,
            0,
            0
        ],
        '8221': [
            0,
            0.69444,
            0,
            0
        ],
        '8224': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8225': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8230': [
            0,
            0.12,
            0,
            0
        ],
        '8242': [
            0,
            0.55556,
            0,
            0
        ],
        '8407': [
            0,
            0.71444,
            0.15382,
            0
        ],
        '8463': [
            0,
            0.68889,
            0,
            0
        ],
        '8465': [
            0,
            0.69444,
            0,
            0
        ],
        '8467': [
            0,
            0.69444,
            0,
            0.11111
        ],
        '8472': [
            0.19444,
            0.43056,
            0,
            0.11111
        ],
        '8476': [
            0,
            0.69444,
            0,
            0
        ],
        '8501': [
            0,
            0.69444,
            0,
            0
        ],
        '8592': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8593': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8594': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8595': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8596': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8597': [
            0.25,
            0.75,
            0,
            0
        ],
        '8598': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8599': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8600': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8601': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8614': [
            0.011,
            0.511,
            0,
            0
        ],
        '8617': [
            0.011,
            0.511,
            0,
            0
        ],
        '8618': [
            0.011,
            0.511,
            0,
            0
        ],
        '8636': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8637': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8640': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8641': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8652': [
            0.011,
            0.671,
            0,
            0
        ],
        '8656': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8657': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8658': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8659': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8660': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8661': [
            0.25,
            0.75,
            0,
            0
        ],
        '8704': [
            0,
            0.69444,
            0,
            0
        ],
        '8706': [
            0,
            0.69444,
            0.05556,
            0.08334
        ],
        '8707': [
            0,
            0.69444,
            0,
            0
        ],
        '8709': [
            0.05556,
            0.75,
            0,
            0
        ],
        '8711': [
            0,
            0.68333,
            0,
            0
        ],
        '8712': [
            0.0391,
            0.5391,
            0,
            0
        ],
        '8715': [
            0.0391,
            0.5391,
            0,
            0
        ],
        '8722': [
            0.08333,
            0.58333,
            0,
            0
        ],
        '8723': [
            0.08333,
            0.58333,
            0,
            0
        ],
        '8725': [
            0.25,
            0.75,
            0,
            0
        ],
        '8726': [
            0.25,
            0.75,
            0,
            0
        ],
        '8727': [
            -0.03472,
            0.46528,
            0,
            0
        ],
        '8728': [
            -0.05555,
            0.44445,
            0,
            0
        ],
        '8729': [
            -0.05555,
            0.44445,
            0,
            0
        ],
        '8730': [
            0.2,
            0.8,
            0,
            0
        ],
        '8733': [
            0,
            0.43056,
            0,
            0
        ],
        '8734': [
            0,
            0.43056,
            0,
            0
        ],
        '8736': [
            0,
            0.69224,
            0,
            0
        ],
        '8739': [
            0.25,
            0.75,
            0,
            0
        ],
        '8741': [
            0.25,
            0.75,
            0,
            0
        ],
        '8743': [
            0,
            0.55556,
            0,
            0
        ],
        '8744': [
            0,
            0.55556,
            0,
            0
        ],
        '8745': [
            0,
            0.55556,
            0,
            0
        ],
        '8746': [
            0,
            0.55556,
            0,
            0
        ],
        '8747': [
            0.19444,
            0.69444,
            0.11111,
            0
        ],
        '8764': [
            -0.13313,
            0.36687,
            0,
            0
        ],
        '8768': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '8771': [
            -0.03625,
            0.46375,
            0,
            0
        ],
        '8773': [
            -0.022,
            0.589,
            0,
            0
        ],
        '8776': [
            -0.01688,
            0.48312,
            0,
            0
        ],
        '8781': [
            -0.03625,
            0.46375,
            0,
            0
        ],
        '8784': [
            -0.133,
            0.67,
            0,
            0
        ],
        '8800': [
            0.215,
            0.716,
            0,
            0
        ],
        '8801': [
            -0.03625,
            0.46375,
            0,
            0
        ],
        '8804': [
            0.13597,
            0.63597,
            0,
            0
        ],
        '8805': [
            0.13597,
            0.63597,
            0,
            0
        ],
        '8810': [
            0.0391,
            0.5391,
            0,
            0
        ],
        '8811': [
            0.0391,
            0.5391,
            0,
            0
        ],
        '8826': [
            0.0391,
            0.5391,
            0,
            0
        ],
        '8827': [
            0.0391,
            0.5391,
            0,
            0
        ],
        '8834': [
            0.0391,
            0.5391,
            0,
            0
        ],
        '8835': [
            0.0391,
            0.5391,
            0,
            0
        ],
        '8838': [
            0.13597,
            0.63597,
            0,
            0
        ],
        '8839': [
            0.13597,
            0.63597,
            0,
            0
        ],
        '8846': [
            0,
            0.55556,
            0,
            0
        ],
        '8849': [
            0.13597,
            0.63597,
            0,
            0
        ],
        '8850': [
            0.13597,
            0.63597,
            0,
            0
        ],
        '8851': [
            0,
            0.55556,
            0,
            0
        ],
        '8852': [
            0,
            0.55556,
            0,
            0
        ],
        '8853': [
            0.08333,
            0.58333,
            0,
            0
        ],
        '8854': [
            0.08333,
            0.58333,
            0,
            0
        ],
        '8855': [
            0.08333,
            0.58333,
            0,
            0
        ],
        '8856': [
            0.08333,
            0.58333,
            0,
            0
        ],
        '8857': [
            0.08333,
            0.58333,
            0,
            0
        ],
        '8866': [
            0,
            0.69444,
            0,
            0
        ],
        '8867': [
            0,
            0.69444,
            0,
            0
        ],
        '8868': [
            0,
            0.69444,
            0,
            0
        ],
        '8869': [
            0,
            0.69444,
            0,
            0
        ],
        '8872': [
            0.249,
            0.75,
            0,
            0
        ],
        '8900': [
            -0.05555,
            0.44445,
            0,
            0
        ],
        '8901': [
            -0.05555,
            0.44445,
            0,
            0
        ],
        '8902': [
            -0.03472,
            0.46528,
            0,
            0
        ],
        '8904': [
            0.005,
            0.505,
            0,
            0
        ],
        '8942': [
            0.03,
            0.9,
            0,
            0
        ],
        '8943': [
            -0.19,
            0.31,
            0,
            0
        ],
        '8945': [
            -0.1,
            0.82,
            0,
            0
        ],
        '8968': [
            0.25,
            0.75,
            0,
            0
        ],
        '8969': [
            0.25,
            0.75,
            0,
            0
        ],
        '8970': [
            0.25,
            0.75,
            0,
            0
        ],
        '8971': [
            0.25,
            0.75,
            0,
            0
        ],
        '8994': [
            -0.14236,
            0.35764,
            0,
            0
        ],
        '8995': [
            -0.14236,
            0.35764,
            0,
            0
        ],
        '9136': [
            0.244,
            0.744,
            0,
            0
        ],
        '9137': [
            0.244,
            0.744,
            0,
            0
        ],
        '9651': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '9657': [
            -0.03472,
            0.46528,
            0,
            0
        ],
        '9661': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '9667': [
            -0.03472,
            0.46528,
            0,
            0
        ],
        '9711': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '9824': [
            0.12963,
            0.69444,
            0,
            0
        ],
        '9825': [
            0.12963,
            0.69444,
            0,
            0
        ],
        '9826': [
            0.12963,
            0.69444,
            0,
            0
        ],
        '9827': [
            0.12963,
            0.69444,
            0,
            0
        ],
        '9837': [
            0,
            0.75,
            0,
            0
        ],
        '9838': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '9839': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '10216': [
            0.25,
            0.75,
            0,
            0
        ],
        '10217': [
            0.25,
            0.75,
            0,
            0
        ],
        '10222': [
            0.244,
            0.744,
            0,
            0
        ],
        '10223': [
            0.244,
            0.744,
            0,
            0
        ],
        '10229': [
            0.011,
            0.511,
            0,
            0
        ],
        '10230': [
            0.011,
            0.511,
            0,
            0
        ],
        '10231': [
            0.011,
            0.511,
            0,
            0
        ],
        '10232': [
            0.024,
            0.525,
            0,
            0
        ],
        '10233': [
            0.024,
            0.525,
            0,
            0
        ],
        '10234': [
            0.024,
            0.525,
            0,
            0
        ],
        '10236': [
            0.011,
            0.511,
            0,
            0
        ],
        '10815': [
            0,
            0.68333,
            0,
            0
        ],
        '10927': [
            0.13597,
            0.63597,
            0,
            0
        ],
        '10928': [
            0.13597,
            0.63597,
            0,
            0
        ]
    },
    'Math-BoldItalic': {
        '47': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '65': [
            0,
            0.68611,
            0,
            0
        ],
        '66': [
            0,
            0.68611,
            0.04835,
            0
        ],
        '67': [
            0,
            0.68611,
            0.06979,
            0
        ],
        '68': [
            0,
            0.68611,
            0.03194,
            0
        ],
        '69': [
            0,
            0.68611,
            0.05451,
            0
        ],
        '70': [
            0,
            0.68611,
            0.15972,
            0
        ],
        '71': [
            0,
            0.68611,
            0,
            0
        ],
        '72': [
            0,
            0.68611,
            0.08229,
            0
        ],
        '73': [
            0,
            0.68611,
            0.07778,
            0
        ],
        '74': [
            0,
            0.68611,
            0.10069,
            0
        ],
        '75': [
            0,
            0.68611,
            0.06979,
            0
        ],
        '76': [
            0,
            0.68611,
            0,
            0
        ],
        '77': [
            0,
            0.68611,
            0.11424,
            0
        ],
        '78': [
            0,
            0.68611,
            0.11424,
            0
        ],
        '79': [
            0,
            0.68611,
            0.03194,
            0
        ],
        '80': [
            0,
            0.68611,
            0.15972,
            0
        ],
        '81': [
            0.19444,
            0.68611,
            0,
            0
        ],
        '82': [
            0,
            0.68611,
            0.00421,
            0
        ],
        '83': [
            0,
            0.68611,
            0.05382,
            0
        ],
        '84': [
            0,
            0.68611,
            0.15972,
            0
        ],
        '85': [
            0,
            0.68611,
            0.11424,
            0
        ],
        '86': [
            0,
            0.68611,
            0.25555,
            0
        ],
        '87': [
            0,
            0.68611,
            0.15972,
            0
        ],
        '88': [
            0,
            0.68611,
            0.07778,
            0
        ],
        '89': [
            0,
            0.68611,
            0.25555,
            0
        ],
        '90': [
            0,
            0.68611,
            0.06979,
            0
        ],
        '97': [
            0,
            0.44444,
            0,
            0
        ],
        '98': [
            0,
            0.69444,
            0,
            0
        ],
        '99': [
            0,
            0.44444,
            0,
            0
        ],
        '100': [
            0,
            0.69444,
            0,
            0
        ],
        '101': [
            0,
            0.44444,
            0,
            0
        ],
        '102': [
            0.19444,
            0.69444,
            0.11042,
            0
        ],
        '103': [
            0.19444,
            0.44444,
            0.03704,
            0
        ],
        '104': [
            0,
            0.69444,
            0,
            0
        ],
        '105': [
            0,
            0.69326,
            0,
            0
        ],
        '106': [
            0.19444,
            0.69326,
            0.0622,
            0
        ],
        '107': [
            0,
            0.69444,
            0.01852,
            0
        ],
        '108': [
            0,
            0.69444,
            0.0088,
            0
        ],
        '109': [
            0,
            0.44444,
            0,
            0
        ],
        '110': [
            0,
            0.44444,
            0,
            0
        ],
        '111': [
            0,
            0.44444,
            0,
            0
        ],
        '112': [
            0.19444,
            0.44444,
            0,
            0
        ],
        '113': [
            0.19444,
            0.44444,
            0.03704,
            0
        ],
        '114': [
            0,
            0.44444,
            0.03194,
            0
        ],
        '115': [
            0,
            0.44444,
            0,
            0
        ],
        '116': [
            0,
            0.63492,
            0,
            0
        ],
        '117': [
            0,
            0.44444,
            0,
            0
        ],
        '118': [
            0,
            0.44444,
            0.03704,
            0
        ],
        '119': [
            0,
            0.44444,
            0.02778,
            0
        ],
        '120': [
            0,
            0.44444,
            0,
            0
        ],
        '121': [
            0.19444,
            0.44444,
            0.03704,
            0
        ],
        '122': [
            0,
            0.44444,
            0.04213,
            0
        ],
        '915': [
            0,
            0.68611,
            0.15972,
            0
        ],
        '916': [
            0,
            0.68611,
            0,
            0
        ],
        '920': [
            0,
            0.68611,
            0.03194,
            0
        ],
        '923': [
            0,
            0.68611,
            0,
            0
        ],
        '926': [
            0,
            0.68611,
            0.07458,
            0
        ],
        '928': [
            0,
            0.68611,
            0.08229,
            0
        ],
        '931': [
            0,
            0.68611,
            0.05451,
            0
        ],
        '933': [
            0,
            0.68611,
            0.15972,
            0
        ],
        '934': [
            0,
            0.68611,
            0,
            0
        ],
        '936': [
            0,
            0.68611,
            0.11653,
            0
        ],
        '937': [
            0,
            0.68611,
            0.04835,
            0
        ],
        '945': [
            0,
            0.44444,
            0,
            0
        ],
        '946': [
            0.19444,
            0.69444,
            0.03403,
            0
        ],
        '947': [
            0.19444,
            0.44444,
            0.06389,
            0
        ],
        '948': [
            0,
            0.69444,
            0.03819,
            0
        ],
        '949': [
            0,
            0.44444,
            0,
            0
        ],
        '950': [
            0.19444,
            0.69444,
            0.06215,
            0
        ],
        '951': [
            0.19444,
            0.44444,
            0.03704,
            0
        ],
        '952': [
            0,
            0.69444,
            0.03194,
            0
        ],
        '953': [
            0,
            0.44444,
            0,
            0
        ],
        '954': [
            0,
            0.44444,
            0,
            0
        ],
        '955': [
            0,
            0.69444,
            0,
            0
        ],
        '956': [
            0.19444,
            0.44444,
            0,
            0
        ],
        '957': [
            0,
            0.44444,
            0.06898,
            0
        ],
        '958': [
            0.19444,
            0.69444,
            0.03021,
            0
        ],
        '959': [
            0,
            0.44444,
            0,
            0
        ],
        '960': [
            0,
            0.44444,
            0.03704,
            0
        ],
        '961': [
            0.19444,
            0.44444,
            0,
            0
        ],
        '962': [
            0.09722,
            0.44444,
            0.07917,
            0
        ],
        '963': [
            0,
            0.44444,
            0.03704,
            0
        ],
        '964': [
            0,
            0.44444,
            0.13472,
            0
        ],
        '965': [
            0,
            0.44444,
            0.03704,
            0
        ],
        '966': [
            0.19444,
            0.44444,
            0,
            0
        ],
        '967': [
            0.19444,
            0.44444,
            0,
            0
        ],
        '968': [
            0.19444,
            0.69444,
            0.03704,
            0
        ],
        '969': [
            0,
            0.44444,
            0.03704,
            0
        ],
        '977': [
            0,
            0.69444,
            0,
            0
        ],
        '981': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '982': [
            0,
            0.44444,
            0.03194,
            0
        ],
        '1009': [
            0.19444,
            0.44444,
            0,
            0
        ],
        '1013': [
            0,
            0.44444,
            0,
            0
        ]
    },
    'Math-Italic': {
        '47': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '65': [
            0,
            0.68333,
            0,
            0.13889
        ],
        '66': [
            0,
            0.68333,
            0.05017,
            0.08334
        ],
        '67': [
            0,
            0.68333,
            0.07153,
            0.08334
        ],
        '68': [
            0,
            0.68333,
            0.02778,
            0.05556
        ],
        '69': [
            0,
            0.68333,
            0.05764,
            0.08334
        ],
        '70': [
            0,
            0.68333,
            0.13889,
            0.08334
        ],
        '71': [
            0,
            0.68333,
            0,
            0.08334
        ],
        '72': [
            0,
            0.68333,
            0.08125,
            0.05556
        ],
        '73': [
            0,
            0.68333,
            0.07847,
            0.11111
        ],
        '74': [
            0,
            0.68333,
            0.09618,
            0.16667
        ],
        '75': [
            0,
            0.68333,
            0.07153,
            0.05556
        ],
        '76': [
            0,
            0.68333,
            0,
            0.02778
        ],
        '77': [
            0,
            0.68333,
            0.10903,
            0.08334
        ],
        '78': [
            0,
            0.68333,
            0.10903,
            0.08334
        ],
        '79': [
            0,
            0.68333,
            0.02778,
            0.08334
        ],
        '80': [
            0,
            0.68333,
            0.13889,
            0.08334
        ],
        '81': [
            0.19444,
            0.68333,
            0,
            0.08334
        ],
        '82': [
            0,
            0.68333,
            0.00773,
            0.08334
        ],
        '83': [
            0,
            0.68333,
            0.05764,
            0.08334
        ],
        '84': [
            0,
            0.68333,
            0.13889,
            0.08334
        ],
        '85': [
            0,
            0.68333,
            0.10903,
            0.02778
        ],
        '86': [
            0,
            0.68333,
            0.22222,
            0
        ],
        '87': [
            0,
            0.68333,
            0.13889,
            0
        ],
        '88': [
            0,
            0.68333,
            0.07847,
            0.08334
        ],
        '89': [
            0,
            0.68333,
            0.22222,
            0
        ],
        '90': [
            0,
            0.68333,
            0.07153,
            0.08334
        ],
        '97': [
            0,
            0.43056,
            0,
            0
        ],
        '98': [
            0,
            0.69444,
            0,
            0
        ],
        '99': [
            0,
            0.43056,
            0,
            0.05556
        ],
        '100': [
            0,
            0.69444,
            0,
            0.16667
        ],
        '101': [
            0,
            0.43056,
            0,
            0.05556
        ],
        '102': [
            0.19444,
            0.69444,
            0.10764,
            0.16667
        ],
        '103': [
            0.19444,
            0.43056,
            0.03588,
            0.02778
        ],
        '104': [
            0,
            0.69444,
            0,
            0
        ],
        '105': [
            0,
            0.65952,
            0,
            0
        ],
        '106': [
            0.19444,
            0.65952,
            0.05724,
            0
        ],
        '107': [
            0,
            0.69444,
            0.03148,
            0
        ],
        '108': [
            0,
            0.69444,
            0.01968,
            0.08334
        ],
        '109': [
            0,
            0.43056,
            0,
            0
        ],
        '110': [
            0,
            0.43056,
            0,
            0
        ],
        '111': [
            0,
            0.43056,
            0,
            0.05556
        ],
        '112': [
            0.19444,
            0.43056,
            0,
            0.08334
        ],
        '113': [
            0.19444,
            0.43056,
            0.03588,
            0.08334
        ],
        '114': [
            0,
            0.43056,
            0.02778,
            0.05556
        ],
        '115': [
            0,
            0.43056,
            0,
            0.05556
        ],
        '116': [
            0,
            0.61508,
            0,
            0.08334
        ],
        '117': [
            0,
            0.43056,
            0,
            0.02778
        ],
        '118': [
            0,
            0.43056,
            0.03588,
            0.02778
        ],
        '119': [
            0,
            0.43056,
            0.02691,
            0.08334
        ],
        '120': [
            0,
            0.43056,
            0,
            0.02778
        ],
        '121': [
            0.19444,
            0.43056,
            0.03588,
            0.05556
        ],
        '122': [
            0,
            0.43056,
            0.04398,
            0.05556
        ],
        '915': [
            0,
            0.68333,
            0.13889,
            0.08334
        ],
        '916': [
            0,
            0.68333,
            0,
            0.16667
        ],
        '920': [
            0,
            0.68333,
            0.02778,
            0.08334
        ],
        '923': [
            0,
            0.68333,
            0,
            0.16667
        ],
        '926': [
            0,
            0.68333,
            0.07569,
            0.08334
        ],
        '928': [
            0,
            0.68333,
            0.08125,
            0.05556
        ],
        '931': [
            0,
            0.68333,
            0.05764,
            0.08334
        ],
        '933': [
            0,
            0.68333,
            0.13889,
            0.05556
        ],
        '934': [
            0,
            0.68333,
            0,
            0.08334
        ],
        '936': [
            0,
            0.68333,
            0.11,
            0.05556
        ],
        '937': [
            0,
            0.68333,
            0.05017,
            0.08334
        ],
        '945': [
            0,
            0.43056,
            0.0037,
            0.02778
        ],
        '946': [
            0.19444,
            0.69444,
            0.05278,
            0.08334
        ],
        '947': [
            0.19444,
            0.43056,
            0.05556,
            0
        ],
        '948': [
            0,
            0.69444,
            0.03785,
            0.05556
        ],
        '949': [
            0,
            0.43056,
            0,
            0.08334
        ],
        '950': [
            0.19444,
            0.69444,
            0.07378,
            0.08334
        ],
        '951': [
            0.19444,
            0.43056,
            0.03588,
            0.05556
        ],
        '952': [
            0,
            0.69444,
            0.02778,
            0.08334
        ],
        '953': [
            0,
            0.43056,
            0,
            0.05556
        ],
        '954': [
            0,
            0.43056,
            0,
            0
        ],
        '955': [
            0,
            0.69444,
            0,
            0
        ],
        '956': [
            0.19444,
            0.43056,
            0,
            0.02778
        ],
        '957': [
            0,
            0.43056,
            0.06366,
            0.02778
        ],
        '958': [
            0.19444,
            0.69444,
            0.04601,
            0.11111
        ],
        '959': [
            0,
            0.43056,
            0,
            0.05556
        ],
        '960': [
            0,
            0.43056,
            0.03588,
            0
        ],
        '961': [
            0.19444,
            0.43056,
            0,
            0.08334
        ],
        '962': [
            0.09722,
            0.43056,
            0.07986,
            0.08334
        ],
        '963': [
            0,
            0.43056,
            0.03588,
            0
        ],
        '964': [
            0,
            0.43056,
            0.1132,
            0.02778
        ],
        '965': [
            0,
            0.43056,
            0.03588,
            0.02778
        ],
        '966': [
            0.19444,
            0.43056,
            0,
            0.08334
        ],
        '967': [
            0.19444,
            0.43056,
            0,
            0.05556
        ],
        '968': [
            0.19444,
            0.69444,
            0.03588,
            0.11111
        ],
        '969': [
            0,
            0.43056,
            0.03588,
            0
        ],
        '977': [
            0,
            0.69444,
            0,
            0.08334
        ],
        '981': [
            0.19444,
            0.69444,
            0,
            0.08334
        ],
        '982': [
            0,
            0.43056,
            0.02778,
            0
        ],
        '1009': [
            0.19444,
            0.43056,
            0,
            0.08334
        ],
        '1013': [
            0,
            0.43056,
            0,
            0.05556
        ]
    },
    'Math-Regular': {
        '65': [
            0,
            0.68333,
            0,
            0.13889
        ],
        '66': [
            0,
            0.68333,
            0.05017,
            0.08334
        ],
        '67': [
            0,
            0.68333,
            0.07153,
            0.08334
        ],
        '68': [
            0,
            0.68333,
            0.02778,
            0.05556
        ],
        '69': [
            0,
            0.68333,
            0.05764,
            0.08334
        ],
        '70': [
            0,
            0.68333,
            0.13889,
            0.08334
        ],
        '71': [
            0,
            0.68333,
            0,
            0.08334
        ],
        '72': [
            0,
            0.68333,
            0.08125,
            0.05556
        ],
        '73': [
            0,
            0.68333,
            0.07847,
            0.11111
        ],
        '74': [
            0,
            0.68333,
            0.09618,
            0.16667
        ],
        '75': [
            0,
            0.68333,
            0.07153,
            0.05556
        ],
        '76': [
            0,
            0.68333,
            0,
            0.02778
        ],
        '77': [
            0,
            0.68333,
            0.10903,
            0.08334
        ],
        '78': [
            0,
            0.68333,
            0.10903,
            0.08334
        ],
        '79': [
            0,
            0.68333,
            0.02778,
            0.08334
        ],
        '80': [
            0,
            0.68333,
            0.13889,
            0.08334
        ],
        '81': [
            0.19444,
            0.68333,
            0,
            0.08334
        ],
        '82': [
            0,
            0.68333,
            0.00773,
            0.08334
        ],
        '83': [
            0,
            0.68333,
            0.05764,
            0.08334
        ],
        '84': [
            0,
            0.68333,
            0.13889,
            0.08334
        ],
        '85': [
            0,
            0.68333,
            0.10903,
            0.02778
        ],
        '86': [
            0,
            0.68333,
            0.22222,
            0
        ],
        '87': [
            0,
            0.68333,
            0.13889,
            0
        ],
        '88': [
            0,
            0.68333,
            0.07847,
            0.08334
        ],
        '89': [
            0,
            0.68333,
            0.22222,
            0
        ],
        '90': [
            0,
            0.68333,
            0.07153,
            0.08334
        ],
        '97': [
            0,
            0.43056,
            0,
            0
        ],
        '98': [
            0,
            0.69444,
            0,
            0
        ],
        '99': [
            0,
            0.43056,
            0,
            0.05556
        ],
        '100': [
            0,
            0.69444,
            0,
            0.16667
        ],
        '101': [
            0,
            0.43056,
            0,
            0.05556
        ],
        '102': [
            0.19444,
            0.69444,
            0.10764,
            0.16667
        ],
        '103': [
            0.19444,
            0.43056,
            0.03588,
            0.02778
        ],
        '104': [
            0,
            0.69444,
            0,
            0
        ],
        '105': [
            0,
            0.65952,
            0,
            0
        ],
        '106': [
            0.19444,
            0.65952,
            0.05724,
            0
        ],
        '107': [
            0,
            0.69444,
            0.03148,
            0
        ],
        '108': [
            0,
            0.69444,
            0.01968,
            0.08334
        ],
        '109': [
            0,
            0.43056,
            0,
            0
        ],
        '110': [
            0,
            0.43056,
            0,
            0
        ],
        '111': [
            0,
            0.43056,
            0,
            0.05556
        ],
        '112': [
            0.19444,
            0.43056,
            0,
            0.08334
        ],
        '113': [
            0.19444,
            0.43056,
            0.03588,
            0.08334
        ],
        '114': [
            0,
            0.43056,
            0.02778,
            0.05556
        ],
        '115': [
            0,
            0.43056,
            0,
            0.05556
        ],
        '116': [
            0,
            0.61508,
            0,
            0.08334
        ],
        '117': [
            0,
            0.43056,
            0,
            0.02778
        ],
        '118': [
            0,
            0.43056,
            0.03588,
            0.02778
        ],
        '119': [
            0,
            0.43056,
            0.02691,
            0.08334
        ],
        '120': [
            0,
            0.43056,
            0,
            0.02778
        ],
        '121': [
            0.19444,
            0.43056,
            0.03588,
            0.05556
        ],
        '122': [
            0,
            0.43056,
            0.04398,
            0.05556
        ],
        '915': [
            0,
            0.68333,
            0.13889,
            0.08334
        ],
        '916': [
            0,
            0.68333,
            0,
            0.16667
        ],
        '920': [
            0,
            0.68333,
            0.02778,
            0.08334
        ],
        '923': [
            0,
            0.68333,
            0,
            0.16667
        ],
        '926': [
            0,
            0.68333,
            0.07569,
            0.08334
        ],
        '928': [
            0,
            0.68333,
            0.08125,
            0.05556
        ],
        '931': [
            0,
            0.68333,
            0.05764,
            0.08334
        ],
        '933': [
            0,
            0.68333,
            0.13889,
            0.05556
        ],
        '934': [
            0,
            0.68333,
            0,
            0.08334
        ],
        '936': [
            0,
            0.68333,
            0.11,
            0.05556
        ],
        '937': [
            0,
            0.68333,
            0.05017,
            0.08334
        ],
        '945': [
            0,
            0.43056,
            0.0037,
            0.02778
        ],
        '946': [
            0.19444,
            0.69444,
            0.05278,
            0.08334
        ],
        '947': [
            0.19444,
            0.43056,
            0.05556,
            0
        ],
        '948': [
            0,
            0.69444,
            0.03785,
            0.05556
        ],
        '949': [
            0,
            0.43056,
            0,
            0.08334
        ],
        '950': [
            0.19444,
            0.69444,
            0.07378,
            0.08334
        ],
        '951': [
            0.19444,
            0.43056,
            0.03588,
            0.05556
        ],
        '952': [
            0,
            0.69444,
            0.02778,
            0.08334
        ],
        '953': [
            0,
            0.43056,
            0,
            0.05556
        ],
        '954': [
            0,
            0.43056,
            0,
            0
        ],
        '955': [
            0,
            0.69444,
            0,
            0
        ],
        '956': [
            0.19444,
            0.43056,
            0,
            0.02778
        ],
        '957': [
            0,
            0.43056,
            0.06366,
            0.02778
        ],
        '958': [
            0.19444,
            0.69444,
            0.04601,
            0.11111
        ],
        '959': [
            0,
            0.43056,
            0,
            0.05556
        ],
        '960': [
            0,
            0.43056,
            0.03588,
            0
        ],
        '961': [
            0.19444,
            0.43056,
            0,
            0.08334
        ],
        '962': [
            0.09722,
            0.43056,
            0.07986,
            0.08334
        ],
        '963': [
            0,
            0.43056,
            0.03588,
            0
        ],
        '964': [
            0,
            0.43056,
            0.1132,
            0.02778
        ],
        '965': [
            0,
            0.43056,
            0.03588,
            0.02778
        ],
        '966': [
            0.19444,
            0.43056,
            0,
            0.08334
        ],
        '967': [
            0.19444,
            0.43056,
            0,
            0.05556
        ],
        '968': [
            0.19444,
            0.69444,
            0.03588,
            0.11111
        ],
        '969': [
            0,
            0.43056,
            0.03588,
            0
        ],
        '977': [
            0,
            0.69444,
            0,
            0.08334
        ],
        '981': [
            0.19444,
            0.69444,
            0,
            0.08334
        ],
        '982': [
            0,
            0.43056,
            0.02778,
            0
        ],
        '1009': [
            0.19444,
            0.43056,
            0,
            0.08334
        ],
        '1013': [
            0,
            0.43056,
            0,
            0.05556
        ]
    },
    'SansSerif-Regular': {
        '33': [
            0,
            0.69444,
            0,
            0
        ],
        '34': [
            0,
            0.69444,
            0,
            0
        ],
        '35': [
            0.19444,
            0.69444,
            0,
            0
        ],
        '36': [
            0.05556,
            0.75,
            0,
            0
        ],
        '37': [
            0.05556,
            0.75,
            0,
            0
        ],
        '38': [
            0,
            0.69444,
            0,
            0
        ],
        '39': [
            0,
            0.69444,
            0,
            0
        ],
        '40': [
            0.25,
            0.75,
            0,
            0
        ],
        '41': [
            0.25,
            0.75,
            0,
            0
        ],
        '42': [
            0,
            0.75,
            0,
            0
        ],
        '43': [
            0.08333,
            0.58333,
            0,
            0
        ],
        '44': [
            0.125,
            0.08333,
            0,
            0
        ],
        '45': [
            0,
            0.44444,
            0,
            0
        ],
        '46': [
            0,
            0.08333,
            0,
            0
        ],
        '47': [
            0.25,
            0.75,
            0,
            0
        ],
        '48': [
            0,
            0.65556,
            0,
            0
        ],
        '49': [
            0,
            0.65556,
            0,
            0
        ],
        '50': [
            0,
            0.65556,
            0,
            0
        ],
        '51': [
            0,
            0.65556,
            0,
            0
        ],
        '52': [
            0,
            0.65556,
            0,
            0
        ],
        '53': [
            0,
            0.65556,
            0,
            0
        ],
        '54': [
            0,
            0.65556,
            0,
            0
        ],
        '55': [
            0,
            0.65556,
            0,
            0
        ],
        '56': [
            0,
            0.65556,
            0,
            0
        ],
        '57': [
            0,
            0.65556,
            0,
            0
        ],
        '58': [
            0,
            0.44444,
            0,
            0
        ],
        '59': [
            0.125,
            0.44444,
            0,
            0
        ],
        '61': [
            -0.13,
            0.37,
            0,
            0
        ],
        '63': [
            0,
            0.69444,
            0,
            0
        ],
        '64': [
            0,
            0.69444,
            0,
            0
        ],
        '65': [
            0,
            0.69444,
            0,
            0
        ],
        '66': [
            0,
            0.69444,
            0,
            0
        ],
        '67': [
            0,
            0.69444,
            0,
            0
        ],
        '68': [
            0,
            0.69444,
            0,
            0
        ],
        '69': [
            0,
            0.69444,
            0,
            0
        ],
        '70': [
            0,
            0.69444,
            0,
            0
        ],
        '71': [
            0,
            0.69444,
            0,
            0
        ],
        '72': [
            0,
            0.69444,
            0,
            0
        ],
        '73': [
            0,
            0.69444,
            0,
            0
        ],
        '74': [
            0,
            0.69444,
            0,
            0
        ],
        '75': [
            0,
            0.69444,
            0,
            0
        ],
        '76': [
            0,
            0.69444,
            0,
            0
        ],
        '77': [
            0,
            0.69444,
            0,
            0
        ],
        '78': [
            0,
            0.69444,
            0,
            0
        ],
        '79': [
            0,
            0.69444,
            0,
            0
        ],
        '80': [
            0,
            0.69444,
            0,
            0
        ],
        '81': [
            0.125,
            0.69444,
            0,
            0
        ],
        '82': [
            0,
            0.69444,
            0,
            0
        ],
        '83': [
            0,
            0.69444,
            0,
            0
        ],
        '84': [
            0,
            0.69444,
            0,
            0
        ],
        '85': [
            0,
            0.69444,
            0,
            0
        ],
        '86': [
            0,
            0.69444,
            0.01389,
            0
        ],
        '87': [
            0,
            0.69444,
            0.01389,
            0
        ],
        '88': [
            0,
            0.69444,
            0,
            0
        ],
        '89': [
            0,
            0.69444,
            0.025,
            0
        ],
        '90': [
            0,
            0.69444,
            0,
            0
        ],
        '91': [
            0.25,
            0.75,
            0,
            0
        ],
        '93': [
            0.25,
            0.75,
            0,
            0
        ],
        '94': [
            0,
            0.69444,
            0,
            0
        ],
        '95': [
            0.35,
            0.09444,
            0.02778,
            0
        ],
        '97': [
            0,
            0.44444,
            0,
            0
        ],
        '98': [
            0,
            0.69444,
            0,
            0
        ],
        '99': [
            0,
            0.44444,
            0,
            0
        ],
        '100': [
            0,
            0.69444,
            0,
            0
        ],
        '101': [
            0,
            0.44444,
            0,
            0
        ],
        '102': [
            0,
            0.69444,
            0.06944,
            0
        ],
        '103': [
            0.19444,
            0.44444,
            0.01389,
            0
        ],
        '104': [
            0,
            0.69444,
            0,
            0
        ],
        '105': [
            0,
            0.67937,
            0,
            0
        ],
        '106': [
            0.19444,
            0.67937,
            0,
            0
        ],
        '107': [
            0,
            0.69444,
            0,
            0
        ],
        '108': [
            0,
            0.69444,
            0,
            0
        ],
        '109': [
            0,
            0.44444,
            0,
            0
        ],
        '110': [
            0,
            0.44444,
            0,
            0
        ],
        '111': [
            0,
            0.44444,
            0,
            0
        ],
        '112': [
            0.19444,
            0.44444,
            0,
            0
        ],
        '113': [
            0.19444,
            0.44444,
            0,
            0
        ],
        '114': [
            0,
            0.44444,
            0.01389,
            0
        ],
        '115': [
            0,
            0.44444,
            0,
            0
        ],
        '116': [
            0,
            0.57143,
            0,
            0
        ],
        '117': [
            0,
            0.44444,
            0,
            0
        ],
        '118': [
            0,
            0.44444,
            0.01389,
            0
        ],
        '119': [
            0,
            0.44444,
            0.01389,
            0
        ],
        '120': [
            0,
            0.44444,
            0,
            0
        ],
        '121': [
            0.19444,
            0.44444,
            0.01389,
            0
        ],
        '122': [
            0,
            0.44444,
            0,
            0
        ],
        '126': [
            0.35,
            0.32659,
            0,
            0
        ],
        '305': [
            0,
            0.44444,
            0,
            0
        ],
        '567': [
            0.19444,
            0.44444,
            0,
            0
        ],
        '768': [
            0,
            0.69444,
            0,
            0
        ],
        '769': [
            0,
            0.69444,
            0,
            0
        ],
        '770': [
            0,
            0.69444,
            0,
            0
        ],
        '771': [
            0,
            0.67659,
            0,
            0
        ],
        '772': [
            0,
            0.60889,
            0,
            0
        ],
        '774': [
            0,
            0.69444,
            0,
            0
        ],
        '775': [
            0,
            0.67937,
            0,
            0
        ],
        '776': [
            0,
            0.67937,
            0,
            0
        ],
        '778': [
            0,
            0.69444,
            0,
            0
        ],
        '779': [
            0,
            0.69444,
            0,
            0
        ],
        '780': [
            0,
            0.63194,
            0,
            0
        ],
        '915': [
            0,
            0.69444,
            0,
            0
        ],
        '916': [
            0,
            0.69444,
            0,
            0
        ],
        '920': [
            0,
            0.69444,
            0,
            0
        ],
        '923': [
            0,
            0.69444,
            0,
            0
        ],
        '926': [
            0,
            0.69444,
            0,
            0
        ],
        '928': [
            0,
            0.69444,
            0,
            0
        ],
        '931': [
            0,
            0.69444,
            0,
            0
        ],
        '933': [
            0,
            0.69444,
            0,
            0
        ],
        '934': [
            0,
            0.69444,
            0,
            0
        ],
        '936': [
            0,
            0.69444,
            0,
            0
        ],
        '937': [
            0,
            0.69444,
            0,
            0
        ],
        '8211': [
            0,
            0.44444,
            0.02778,
            0
        ],
        '8212': [
            0,
            0.44444,
            0.02778,
            0
        ],
        '8216': [
            0,
            0.69444,
            0,
            0
        ],
        '8217': [
            0,
            0.69444,
            0,
            0
        ],
        '8220': [
            0,
            0.69444,
            0,
            0
        ],
        '8221': [
            0,
            0.69444,
            0,
            0
        ]
    },
    'Script-Regular': {
        '65': [
            0,
            0.7,
            0.22925,
            0
        ],
        '66': [
            0,
            0.7,
            0.04087,
            0
        ],
        '67': [
            0,
            0.7,
            0.1689,
            0
        ],
        '68': [
            0,
            0.7,
            0.09371,
            0
        ],
        '69': [
            0,
            0.7,
            0.18583,
            0
        ],
        '70': [
            0,
            0.7,
            0.13634,
            0
        ],
        '71': [
            0,
            0.7,
            0.17322,
            0
        ],
        '72': [
            0,
            0.7,
            0.29694,
            0
        ],
        '73': [
            0,
            0.7,
            0.19189,
            0
        ],
        '74': [
            0.27778,
            0.7,
            0.19189,
            0
        ],
        '75': [
            0,
            0.7,
            0.31259,
            0
        ],
        '76': [
            0,
            0.7,
            0.19189,
            0
        ],
        '77': [
            0,
            0.7,
            0.15981,
            0
        ],
        '78': [
            0,
            0.7,
            0.3525,
            0
        ],
        '79': [
            0,
            0.7,
            0.08078,
            0
        ],
        '80': [
            0,
            0.7,
            0.08078,
            0
        ],
        '81': [
            0,
            0.7,
            0.03305,
            0
        ],
        '82': [
            0,
            0.7,
            0.06259,
            0
        ],
        '83': [
            0,
            0.7,
            0.19189,
            0
        ],
        '84': [
            0,
            0.7,
            0.29087,
            0
        ],
        '85': [
            0,
            0.7,
            0.25815,
            0
        ],
        '86': [
            0,
            0.7,
            0.27523,
            0
        ],
        '87': [
            0,
            0.7,
            0.27523,
            0
        ],
        '88': [
            0,
            0.7,
            0.26006,
            0
        ],
        '89': [
            0,
            0.7,
            0.2939,
            0
        ],
        '90': [
            0,
            0.7,
            0.24037,
            0
        ]
    },
    'Size1-Regular': {
        '40': [
            0.35001,
            0.85,
            0,
            0
        ],
        '41': [
            0.35001,
            0.85,
            0,
            0
        ],
        '47': [
            0.35001,
            0.85,
            0,
            0
        ],
        '91': [
            0.35001,
            0.85,
            0,
            0
        ],
        '92': [
            0.35001,
            0.85,
            0,
            0
        ],
        '93': [
            0.35001,
            0.85,
            0,
            0
        ],
        '123': [
            0.35001,
            0.85,
            0,
            0
        ],
        '125': [
            0.35001,
            0.85,
            0,
            0
        ],
        '710': [
            0,
            0.72222,
            0,
            0
        ],
        '732': [
            0,
            0.72222,
            0,
            0
        ],
        '770': [
            0,
            0.72222,
            0,
            0
        ],
        '771': [
            0,
            0.72222,
            0,
            0
        ],
        '8214': [
            -0.00099,
            0.601,
            0,
            0
        ],
        '8593': [
            0.00001,
            0.6,
            0,
            0
        ],
        '8595': [
            0.00001,
            0.6,
            0,
            0
        ],
        '8657': [
            0.00001,
            0.6,
            0,
            0
        ],
        '8659': [
            0.00001,
            0.6,
            0,
            0
        ],
        '8719': [
            0.25001,
            0.75,
            0,
            0
        ],
        '8720': [
            0.25001,
            0.75,
            0,
            0
        ],
        '8721': [
            0.25001,
            0.75,
            0,
            0
        ],
        '8730': [
            0.35001,
            0.85,
            0,
            0
        ],
        '8739': [
            -0.00599,
            0.606,
            0,
            0
        ],
        '8741': [
            -0.00599,
            0.606,
            0,
            0
        ],
        '8747': [
            0.30612,
            0.805,
            0.19445,
            0
        ],
        '8748': [
            0.306,
            0.805,
            0.19445,
            0
        ],
        '8749': [
            0.306,
            0.805,
            0.19445,
            0
        ],
        '8750': [
            0.30612,
            0.805,
            0.19445,
            0
        ],
        '8896': [
            0.25001,
            0.75,
            0,
            0
        ],
        '8897': [
            0.25001,
            0.75,
            0,
            0
        ],
        '8898': [
            0.25001,
            0.75,
            0,
            0
        ],
        '8899': [
            0.25001,
            0.75,
            0,
            0
        ],
        '8968': [
            0.35001,
            0.85,
            0,
            0
        ],
        '8969': [
            0.35001,
            0.85,
            0,
            0
        ],
        '8970': [
            0.35001,
            0.85,
            0,
            0
        ],
        '8971': [
            0.35001,
            0.85,
            0,
            0
        ],
        '9168': [
            -0.00099,
            0.601,
            0,
            0
        ],
        '10216': [
            0.35001,
            0.85,
            0,
            0
        ],
        '10217': [
            0.35001,
            0.85,
            0,
            0
        ],
        '10752': [
            0.25001,
            0.75,
            0,
            0
        ],
        '10753': [
            0.25001,
            0.75,
            0,
            0
        ],
        '10754': [
            0.25001,
            0.75,
            0,
            0
        ],
        '10756': [
            0.25001,
            0.75,
            0,
            0
        ],
        '10758': [
            0.25001,
            0.75,
            0,
            0
        ]
    },
    'Size2-Regular': {
        '40': [
            0.65002,
            1.15,
            0,
            0
        ],
        '41': [
            0.65002,
            1.15,
            0,
            0
        ],
        '47': [
            0.65002,
            1.15,
            0,
            0
        ],
        '91': [
            0.65002,
            1.15,
            0,
            0
        ],
        '92': [
            0.65002,
            1.15,
            0,
            0
        ],
        '93': [
            0.65002,
            1.15,
            0,
            0
        ],
        '123': [
            0.65002,
            1.15,
            0,
            0
        ],
        '125': [
            0.65002,
            1.15,
            0,
            0
        ],
        '710': [
            0,
            0.75,
            0,
            0
        ],
        '732': [
            0,
            0.75,
            0,
            0
        ],
        '770': [
            0,
            0.75,
            0,
            0
        ],
        '771': [
            0,
            0.75,
            0,
            0
        ],
        '8719': [
            0.55001,
            1.05,
            0,
            0
        ],
        '8720': [
            0.55001,
            1.05,
            0,
            0
        ],
        '8721': [
            0.55001,
            1.05,
            0,
            0
        ],
        '8730': [
            0.65002,
            1.15,
            0,
            0
        ],
        '8747': [
            0.86225,
            1.36,
            0.44445,
            0
        ],
        '8748': [
            0.862,
            1.36,
            0.44445,
            0
        ],
        '8749': [
            0.862,
            1.36,
            0.44445,
            0
        ],
        '8750': [
            0.86225,
            1.36,
            0.44445,
            0
        ],
        '8896': [
            0.55001,
            1.05,
            0,
            0
        ],
        '8897': [
            0.55001,
            1.05,
            0,
            0
        ],
        '8898': [
            0.55001,
            1.05,
            0,
            0
        ],
        '8899': [
            0.55001,
            1.05,
            0,
            0
        ],
        '8968': [
            0.65002,
            1.15,
            0,
            0
        ],
        '8969': [
            0.65002,
            1.15,
            0,
            0
        ],
        '8970': [
            0.65002,
            1.15,
            0,
            0
        ],
        '8971': [
            0.65002,
            1.15,
            0,
            0
        ],
        '10216': [
            0.65002,
            1.15,
            0,
            0
        ],
        '10217': [
            0.65002,
            1.15,
            0,
            0
        ],
        '10752': [
            0.55001,
            1.05,
            0,
            0
        ],
        '10753': [
            0.55001,
            1.05,
            0,
            0
        ],
        '10754': [
            0.55001,
            1.05,
            0,
            0
        ],
        '10756': [
            0.55001,
            1.05,
            0,
            0
        ],
        '10758': [
            0.55001,
            1.05,
            0,
            0
        ]
    },
    'Size3-Regular': {
        '40': [
            0.95003,
            1.45,
            0,
            0
        ],
        '41': [
            0.95003,
            1.45,
            0,
            0
        ],
        '47': [
            0.95003,
            1.45,
            0,
            0
        ],
        '91': [
            0.95003,
            1.45,
            0,
            0
        ],
        '92': [
            0.95003,
            1.45,
            0,
            0
        ],
        '93': [
            0.95003,
            1.45,
            0,
            0
        ],
        '123': [
            0.95003,
            1.45,
            0,
            0
        ],
        '125': [
            0.95003,
            1.45,
            0,
            0
        ],
        '710': [
            0,
            0.75,
            0,
            0
        ],
        '732': [
            0,
            0.75,
            0,
            0
        ],
        '770': [
            0,
            0.75,
            0,
            0
        ],
        '771': [
            0,
            0.75,
            0,
            0
        ],
        '8730': [
            0.95003,
            1.45,
            0,
            0
        ],
        '8968': [
            0.95003,
            1.45,
            0,
            0
        ],
        '8969': [
            0.95003,
            1.45,
            0,
            0
        ],
        '8970': [
            0.95003,
            1.45,
            0,
            0
        ],
        '8971': [
            0.95003,
            1.45,
            0,
            0
        ],
        '10216': [
            0.95003,
            1.45,
            0,
            0
        ],
        '10217': [
            0.95003,
            1.45,
            0,
            0
        ]
    },
    'Size4-Regular': {
        '40': [
            1.25003,
            1.75,
            0,
            0
        ],
        '41': [
            1.25003,
            1.75,
            0,
            0
        ],
        '47': [
            1.25003,
            1.75,
            0,
            0
        ],
        '91': [
            1.25003,
            1.75,
            0,
            0
        ],
        '92': [
            1.25003,
            1.75,
            0,
            0
        ],
        '93': [
            1.25003,
            1.75,
            0,
            0
        ],
        '123': [
            1.25003,
            1.75,
            0,
            0
        ],
        '125': [
            1.25003,
            1.75,
            0,
            0
        ],
        '710': [
            0,
            0.825,
            0,
            0
        ],
        '732': [
            0,
            0.825,
            0,
            0
        ],
        '770': [
            0,
            0.825,
            0,
            0
        ],
        '771': [
            0,
            0.825,
            0,
            0
        ],
        '8730': [
            1.25003,
            1.75,
            0,
            0
        ],
        '8968': [
            1.25003,
            1.75,
            0,
            0
        ],
        '8969': [
            1.25003,
            1.75,
            0,
            0
        ],
        '8970': [
            1.25003,
            1.75,
            0,
            0
        ],
        '8971': [
            1.25003,
            1.75,
            0,
            0
        ],
        '9115': [
            0.64502,
            1.155,
            0,
            0
        ],
        '9116': [
            0.00001,
            0.6,
            0,
            0
        ],
        '9117': [
            0.64502,
            1.155,
            0,
            0
        ],
        '9118': [
            0.64502,
            1.155,
            0,
            0
        ],
        '9119': [
            0.00001,
            0.6,
            0,
            0
        ],
        '9120': [
            0.64502,
            1.155,
            0,
            0
        ],
        '9121': [
            0.64502,
            1.155,
            0,
            0
        ],
        '9122': [
            -0.00099,
            0.601,
            0,
            0
        ],
        '9123': [
            0.64502,
            1.155,
            0,
            0
        ],
        '9124': [
            0.64502,
            1.155,
            0,
            0
        ],
        '9125': [
            -0.00099,
            0.601,
            0,
            0
        ],
        '9126': [
            0.64502,
            1.155,
            0,
            0
        ],
        '9127': [
            0.00001,
            0.9,
            0,
            0
        ],
        '9128': [
            0.65002,
            1.15,
            0,
            0
        ],
        '9129': [
            0.90001,
            0,
            0,
            0
        ],
        '9130': [
            0,
            0.3,
            0,
            0
        ],
        '9131': [
            0.00001,
            0.9,
            0,
            0
        ],
        '9132': [
            0.65002,
            1.15,
            0,
            0
        ],
        '9133': [
            0.90001,
            0,
            0,
            0
        ],
        '9143': [
            0.88502,
            0.915,
            0,
            0
        ],
        '10216': [
            1.25003,
            1.75,
            0,
            0
        ],
        '10217': [
            1.25003,
            1.75,
            0,
            0
        ],
        '57344': [
            -0.00499,
            0.605,
            0,
            0
        ],
        '57345': [
            -0.00499,
            0.605,
            0,
            0
        ],
        '57680': [
            0,
            0.12,
            0,
            0
        ],
        '57681': [
            0,
            0.12,
            0,
            0
        ],
        '57682': [
            0,
            0.12,
            0,
            0
        ],
        '57683': [
            0,
            0.12,
            0,
            0
        ]
    },
    'Typewriter-Regular': {
        '33': [
            0,
            0.61111,
            0,
            0
        ],
        '34': [
            0,
            0.61111,
            0,
            0
        ],
        '35': [
            0,
            0.61111,
            0,
            0
        ],
        '36': [
            0.08333,
            0.69444,
            0,
            0
        ],
        '37': [
            0.08333,
            0.69444,
            0,
            0
        ],
        '38': [
            0,
            0.61111,
            0,
            0
        ],
        '39': [
            0,
            0.61111,
            0,
            0
        ],
        '40': [
            0.08333,
            0.69444,
            0,
            0
        ],
        '41': [
            0.08333,
            0.69444,
            0,
            0
        ],
        '42': [
            0,
            0.52083,
            0,
            0
        ],
        '43': [
            -0.08056,
            0.53055,
            0,
            0
        ],
        '44': [
            0.13889,
            0.125,
            0,
            0
        ],
        '45': [
            -0.08056,
            0.53055,
            0,
            0
        ],
        '46': [
            0,
            0.125,
            0,
            0
        ],
        '47': [
            0.08333,
            0.69444,
            0,
            0
        ],
        '48': [
            0,
            0.61111,
            0,
            0
        ],
        '49': [
            0,
            0.61111,
            0,
            0
        ],
        '50': [
            0,
            0.61111,
            0,
            0
        ],
        '51': [
            0,
            0.61111,
            0,
            0
        ],
        '52': [
            0,
            0.61111,
            0,
            0
        ],
        '53': [
            0,
            0.61111,
            0,
            0
        ],
        '54': [
            0,
            0.61111,
            0,
            0
        ],
        '55': [
            0,
            0.61111,
            0,
            0
        ],
        '56': [
            0,
            0.61111,
            0,
            0
        ],
        '57': [
            0,
            0.61111,
            0,
            0
        ],
        '58': [
            0,
            0.43056,
            0,
            0
        ],
        '59': [
            0.13889,
            0.43056,
            0,
            0
        ],
        '60': [
            -0.05556,
            0.55556,
            0,
            0
        ],
        '61': [
            -0.19549,
            0.41562,
            0,
            0
        ],
        '62': [
            -0.05556,
            0.55556,
            0,
            0
        ],
        '63': [
            0,
            0.61111,
            0,
            0
        ],
        '64': [
            0,
            0.61111,
            0,
            0
        ],
        '65': [
            0,
            0.61111,
            0,
            0
        ],
        '66': [
            0,
            0.61111,
            0,
            0
        ],
        '67': [
            0,
            0.61111,
            0,
            0
        ],
        '68': [
            0,
            0.61111,
            0,
            0
        ],
        '69': [
            0,
            0.61111,
            0,
            0
        ],
        '70': [
            0,
            0.61111,
            0,
            0
        ],
        '71': [
            0,
            0.61111,
            0,
            0
        ],
        '72': [
            0,
            0.61111,
            0,
            0
        ],
        '73': [
            0,
            0.61111,
            0,
            0
        ],
        '74': [
            0,
            0.61111,
            0,
            0
        ],
        '75': [
            0,
            0.61111,
            0,
            0
        ],
        '76': [
            0,
            0.61111,
            0,
            0
        ],
        '77': [
            0,
            0.61111,
            0,
            0
        ],
        '78': [
            0,
            0.61111,
            0,
            0
        ],
        '79': [
            0,
            0.61111,
            0,
            0
        ],
        '80': [
            0,
            0.61111,
            0,
            0
        ],
        '81': [
            0.13889,
            0.61111,
            0,
            0
        ],
        '82': [
            0,
            0.61111,
            0,
            0
        ],
        '83': [
            0,
            0.61111,
            0,
            0
        ],
        '84': [
            0,
            0.61111,
            0,
            0
        ],
        '85': [
            0,
            0.61111,
            0,
            0
        ],
        '86': [
            0,
            0.61111,
            0,
            0
        ],
        '87': [
            0,
            0.61111,
            0,
            0
        ],
        '88': [
            0,
            0.61111,
            0,
            0
        ],
        '89': [
            0,
            0.61111,
            0,
            0
        ],
        '90': [
            0,
            0.61111,
            0,
            0
        ],
        '91': [
            0.08333,
            0.69444,
            0,
            0
        ],
        '92': [
            0.08333,
            0.69444,
            0,
            0
        ],
        '93': [
            0.08333,
            0.69444,
            0,
            0
        ],
        '94': [
            0,
            0.61111,
            0,
            0
        ],
        '95': [
            0.09514,
            0,
            0,
            0
        ],
        '96': [
            0,
            0.61111,
            0,
            0
        ],
        '97': [
            0,
            0.43056,
            0,
            0
        ],
        '98': [
            0,
            0.61111,
            0,
            0
        ],
        '99': [
            0,
            0.43056,
            0,
            0
        ],
        '100': [
            0,
            0.61111,
            0,
            0
        ],
        '101': [
            0,
            0.43056,
            0,
            0
        ],
        '102': [
            0,
            0.61111,
            0,
            0
        ],
        '103': [
            0.22222,
            0.43056,
            0,
            0
        ],
        '104': [
            0,
            0.61111,
            0,
            0
        ],
        '105': [
            0,
            0.61111,
            0,
            0
        ],
        '106': [
            0.22222,
            0.61111,
            0,
            0
        ],
        '107': [
            0,
            0.61111,
            0,
            0
        ],
        '108': [
            0,
            0.61111,
            0,
            0
        ],
        '109': [
            0,
            0.43056,
            0,
            0
        ],
        '110': [
            0,
            0.43056,
            0,
            0
        ],
        '111': [
            0,
            0.43056,
            0,
            0
        ],
        '112': [
            0.22222,
            0.43056,
            0,
            0
        ],
        '113': [
            0.22222,
            0.43056,
            0,
            0
        ],
        '114': [
            0,
            0.43056,
            0,
            0
        ],
        '115': [
            0,
            0.43056,
            0,
            0
        ],
        '116': [
            0,
            0.55358,
            0,
            0
        ],
        '117': [
            0,
            0.43056,
            0,
            0
        ],
        '118': [
            0,
            0.43056,
            0,
            0
        ],
        '119': [
            0,
            0.43056,
            0,
            0
        ],
        '120': [
            0,
            0.43056,
            0,
            0
        ],
        '121': [
            0.22222,
            0.43056,
            0,
            0
        ],
        '122': [
            0,
            0.43056,
            0,
            0
        ],
        '123': [
            0.08333,
            0.69444,
            0,
            0
        ],
        '124': [
            0.08333,
            0.69444,
            0,
            0
        ],
        '125': [
            0.08333,
            0.69444,
            0,
            0
        ],
        '126': [
            0,
            0.61111,
            0,
            0
        ],
        '127': [
            0,
            0.61111,
            0,
            0
        ],
        '305': [
            0,
            0.43056,
            0,
            0
        ],
        '567': [
            0.22222,
            0.43056,
            0,
            0
        ],
        '768': [
            0,
            0.61111,
            0,
            0
        ],
        '769': [
            0,
            0.61111,
            0,
            0
        ],
        '770': [
            0,
            0.61111,
            0,
            0
        ],
        '771': [
            0,
            0.61111,
            0,
            0
        ],
        '772': [
            0,
            0.56555,
            0,
            0
        ],
        '774': [
            0,
            0.61111,
            0,
            0
        ],
        '776': [
            0,
            0.61111,
            0,
            0
        ],
        '778': [
            0,
            0.61111,
            0,
            0
        ],
        '780': [
            0,
            0.56597,
            0,
            0
        ],
        '915': [
            0,
            0.61111,
            0,
            0
        ],
        '916': [
            0,
            0.61111,
            0,
            0
        ],
        '920': [
            0,
            0.61111,
            0,
            0
        ],
        '923': [
            0,
            0.61111,
            0,
            0
        ],
        '926': [
            0,
            0.61111,
            0,
            0
        ],
        '928': [
            0,
            0.61111,
            0,
            0
        ],
        '931': [
            0,
            0.61111,
            0,
            0
        ],
        '933': [
            0,
            0.61111,
            0,
            0
        ],
        '934': [
            0,
            0.61111,
            0,
            0
        ],
        '936': [
            0,
            0.61111,
            0,
            0
        ],
        '937': [
            0,
            0.61111,
            0,
            0
        ],
        '2018': [
            0,
            0.61111,
            0,
            0
        ],
        '2019': [
            0,
            0.61111,
            0,
            0
        ],
        '8242': [
            0,
            0.61111,
            0,
            0
        ]
    }
};
},{}],31:[function(require,module,exports){
var utils = require('./utils');
var ParseError = require('./ParseError');
function defineFunction(names, props, handler) {
    if (typeof names === 'string') {
        names = [names];
    }
    if (typeof props === 'number') {
        props = { numArgs: props };
    }
    var data = {
        numArgs: props.numArgs,
        argTypes: props.argTypes,
        greediness: props.greediness === undefined ? 1 : props.greediness,
        allowedInText: !!props.allowedInText,
        numOptionalArgs: props.numOptionalArgs || 0,
        handler: handler
    };
    for (var i = 0; i < names.length; ++i) {
        module.exports[names[i]] = data;
    }
}
defineFunction('\\sqrt', {
    numArgs: 1,
    numOptionalArgs: 1
}, function (context, args) {
    var index = args[0];
    var body = args[1];
    return {
        type: 'sqrt',
        body: body,
        index: index
    };
});
defineFunction('\\text', {
    numArgs: 1,
    argTypes: ['text'],
    greediness: 2
}, function (context, args) {
    var body = args[0];
    var inner;
    if (body.type === 'ordgroup') {
        inner = body.value;
    } else {
        inner = [body];
    }
    return {
        type: 'text',
        body: inner
    };
});
defineFunction('\\color', {
    numArgs: 2,
    allowedInText: true,
    greediness: 3,
    argTypes: [
        'color',
        'original'
    ]
}, function (context, args) {
    var color = args[0];
    var body = args[1];
    var inner;
    if (body.type === 'ordgroup') {
        inner = body.value;
    } else {
        inner = [body];
    }
    return {
        type: 'color',
        color: color.value,
        value: inner
    };
});
defineFunction('\\overline', { numArgs: 1 }, function (context, args) {
    var body = args[0];
    return {
        type: 'overline',
        body: body
    };
});
defineFunction('\\underline', { numArgs: 1 }, function (context, args) {
    var body = args[0];
    return {
        type: 'underline',
        body: body
    };
});
defineFunction('\\rule', {
    numArgs: 2,
    numOptionalArgs: 1,
    argTypes: [
        'size',
        'size',
        'size'
    ]
}, function (context, args) {
    var shift = args[0];
    var width = args[1];
    var height = args[2];
    return {
        type: 'rule',
        shift: shift && shift.value,
        width: width.value,
        height: height.value
    };
});
defineFunction('\\KaTeX', { numArgs: 0 }, function (context) {
    return { type: 'katex' };
});
defineFunction('\\phantom', { numArgs: 1 }, function (context, args) {
    var body = args[0];
    var inner;
    if (body.type === 'ordgroup') {
        inner = body.value;
    } else {
        inner = [body];
    }
    return {
        type: 'phantom',
        value: inner
    };
});
var delimiterSizes = {
    '\\bigl': {
        type: 'open',
        size: 1
    },
    '\\Bigl': {
        type: 'open',
        size: 2
    },
    '\\biggl': {
        type: 'open',
        size: 3
    },
    '\\Biggl': {
        type: 'open',
        size: 4
    },
    '\\bigr': {
        type: 'close',
        size: 1
    },
    '\\Bigr': {
        type: 'close',
        size: 2
    },
    '\\biggr': {
        type: 'close',
        size: 3
    },
    '\\Biggr': {
        type: 'close',
        size: 4
    },
    '\\bigm': {
        type: 'rel',
        size: 1
    },
    '\\Bigm': {
        type: 'rel',
        size: 2
    },
    '\\biggm': {
        type: 'rel',
        size: 3
    },
    '\\Biggm': {
        type: 'rel',
        size: 4
    },
    '\\big': {
        type: 'textord',
        size: 1
    },
    '\\Big': {
        type: 'textord',
        size: 2
    },
    '\\bigg': {
        type: 'textord',
        size: 3
    },
    '\\Bigg': {
        type: 'textord',
        size: 4
    }
};
var delimiters = [
    '(',
    ')',
    '[',
    '\\lbrack',
    ']',
    '\\rbrack',
    '\\{',
    '\\lbrace',
    '\\}',
    '\\rbrace',
    '\\lfloor',
    '\\rfloor',
    '\\lceil',
    '\\rceil',
    '<',
    '>',
    '\\langle',
    '\\rangle',
    '\\lt',
    '\\gt',
    '\\lvert',
    '\\rvert',
    '\\lVert',
    '\\rVert',
    '\\lgroup',
    '\\rgroup',
    '\\lmoustache',
    '\\rmoustache',
    '/',
    '\\backslash',
    '|',
    '\\vert',
    '\\|',
    '\\Vert',
    '\\uparrow',
    '\\Uparrow',
    '\\downarrow',
    '\\Downarrow',
    '\\updownarrow',
    '\\Updownarrow',
    '.'
];
var fontAliases = {
    '\\Bbb': '\\mathbb',
    '\\bold': '\\mathbf',
    '\\frak': '\\mathfrak'
};
defineFunction([
    '\\blue',
    '\\orange',
    '\\pink',
    '\\red',
    '\\green',
    '\\gray',
    '\\purple',
    '\\blueA',
    '\\blueB',
    '\\blueC',
    '\\blueD',
    '\\blueE',
    '\\tealA',
    '\\tealB',
    '\\tealC',
    '\\tealD',
    '\\tealE',
    '\\greenA',
    '\\greenB',
    '\\greenC',
    '\\greenD',
    '\\greenE',
    '\\goldA',
    '\\goldB',
    '\\goldC',
    '\\goldD',
    '\\goldE',
    '\\redA',
    '\\redB',
    '\\redC',
    '\\redD',
    '\\redE',
    '\\maroonA',
    '\\maroonB',
    '\\maroonC',
    '\\maroonD',
    '\\maroonE',
    '\\purpleA',
    '\\purpleB',
    '\\purpleC',
    '\\purpleD',
    '\\purpleE',
    '\\mintA',
    '\\mintB',
    '\\mintC',
    '\\grayA',
    '\\grayB',
    '\\grayC',
    '\\grayD',
    '\\grayE',
    '\\grayF',
    '\\grayG',
    '\\grayH',
    '\\grayI',
    '\\kaBlue',
    '\\kaGreen'
], {
    numArgs: 1,
    allowedInText: true,
    greediness: 3
}, function (context, args) {
    var body = args[0];
    var atoms;
    if (body.type === 'ordgroup') {
        atoms = body.value;
    } else {
        atoms = [body];
    }
    return {
        type: 'color',
        color: 'katex-' + context.funcName.slice(1),
        value: atoms
    };
});
defineFunction([
    '\\arcsin',
    '\\arccos',
    '\\arctan',
    '\\arg',
    '\\cos',
    '\\cosh',
    '\\cot',
    '\\coth',
    '\\csc',
    '\\deg',
    '\\dim',
    '\\exp',
    '\\hom',
    '\\ker',
    '\\lg',
    '\\ln',
    '\\log',
    '\\sec',
    '\\sin',
    '\\sinh',
    '\\tan',
    '\\tanh'
], { numArgs: 0 }, function (context) {
    return {
        type: 'op',
        limits: false,
        symbol: false,
        body: context.funcName
    };
});
defineFunction([
    '\\det',
    '\\gcd',
    '\\inf',
    '\\lim',
    '\\liminf',
    '\\limsup',
    '\\max',
    '\\min',
    '\\Pr',
    '\\sup'
], { numArgs: 0 }, function (context) {
    return {
        type: 'op',
        limits: true,
        symbol: false,
        body: context.funcName
    };
});
defineFunction([
    '\\int',
    '\\iint',
    '\\iiint',
    '\\oint'
], { numArgs: 0 }, function (context) {
    return {
        type: 'op',
        limits: false,
        symbol: true,
        body: context.funcName
    };
});
defineFunction([
    '\\coprod',
    '\\bigvee',
    '\\bigwedge',
    '\\biguplus',
    '\\bigcap',
    '\\bigcup',
    '\\intop',
    '\\prod',
    '\\sum',
    '\\bigotimes',
    '\\bigoplus',
    '\\bigodot',
    '\\bigsqcup',
    '\\smallint'
], { numArgs: 0 }, function (context) {
    return {
        type: 'op',
        limits: true,
        symbol: true,
        body: context.funcName
    };
});
defineFunction([
    '\\dfrac',
    '\\frac',
    '\\tfrac',
    '\\dbinom',
    '\\binom',
    '\\tbinom'
], {
    numArgs: 2,
    greediness: 2
}, function (context, args) {
    var numer = args[0];
    var denom = args[1];
    var hasBarLine;
    var leftDelim = null;
    var rightDelim = null;
    var size = 'auto';
    switch (context.funcName) {
    case '\\dfrac':
    case '\\frac':
    case '\\tfrac':
        hasBarLine = true;
        break;
    case '\\dbinom':
    case '\\binom':
    case '\\tbinom':
        hasBarLine = false;
        leftDelim = '(';
        rightDelim = ')';
        break;
    default:
        throw new Error('Unrecognized genfrac command');
    }
    switch (context.funcName) {
    case '\\dfrac':
    case '\\dbinom':
        size = 'display';
        break;
    case '\\tfrac':
    case '\\tbinom':
        size = 'text';
        break;
    }
    return {
        type: 'genfrac',
        numer: numer,
        denom: denom,
        hasBarLine: hasBarLine,
        leftDelim: leftDelim,
        rightDelim: rightDelim,
        size: size
    };
});
defineFunction([
    '\\llap',
    '\\rlap'
], {
    numArgs: 1,
    allowedInText: true
}, function (context, args) {
    var body = args[0];
    return {
        type: context.funcName.slice(1),
        body: body
    };
});
defineFunction([
    '\\bigl',
    '\\Bigl',
    '\\biggl',
    '\\Biggl',
    '\\bigr',
    '\\Bigr',
    '\\biggr',
    '\\Biggr',
    '\\bigm',
    '\\Bigm',
    '\\biggm',
    '\\Biggm',
    '\\big',
    '\\Big',
    '\\bigg',
    '\\Bigg',
    '\\left',
    '\\right'
], { numArgs: 1 }, function (context, args) {
    var delim = args[0];
    if (!utils.contains(delimiters, delim.value)) {
        throw new ParseError('Invalid delimiter: \'' + delim.value + '\' after \'' + context.funcName + '\'', context.lexer, context.positions[1]);
    }
    if (context.funcName === '\\left' || context.funcName === '\\right') {
        return {
            type: 'leftright',
            value: delim.value
        };
    } else {
        return {
            type: 'delimsizing',
            size: delimiterSizes[context.funcName].size,
            delimType: delimiterSizes[context.funcName].type,
            value: delim.value
        };
    }
});
defineFunction([
    '\\tiny',
    '\\scriptsize',
    '\\footnotesize',
    '\\small',
    '\\normalsize',
    '\\large',
    '\\Large',
    '\\LARGE',
    '\\huge',
    '\\Huge'
], 0, null);
defineFunction([
    '\\displaystyle',
    '\\textstyle',
    '\\scriptstyle',
    '\\scriptscriptstyle'
], 0, null);
defineFunction([
    '\\mathrm',
    '\\mathit',
    '\\mathbf',
    '\\mathbb',
    '\\mathcal',
    '\\mathfrak',
    '\\mathscr',
    '\\mathsf',
    '\\mathtt',
    '\\Bbb',
    '\\bold',
    '\\frak'
], {
    numArgs: 1,
    greediness: 2
}, function (context, args) {
    var body = args[0];
    var func = context.funcName;
    if (func in fontAliases) {
        func = fontAliases[func];
    }
    return {
        type: 'font',
        font: func.slice(1),
        body: body
    };
});
defineFunction([
    '\\acute',
    '\\grave',
    '\\ddot',
    '\\tilde',
    '\\bar',
    '\\breve',
    '\\check',
    '\\hat',
    '\\vec',
    '\\dot'
], { numArgs: 1 }, function (context, args) {
    var base = args[0];
    return {
        type: 'accent',
        accent: context.funcName,
        base: base
    };
});
defineFunction([
    '\\over',
    '\\choose'
], { numArgs: 0 }, function (context) {
    var replaceWith;
    switch (context.funcName) {
    case '\\over':
        replaceWith = '\\frac';
        break;
    case '\\choose':
        replaceWith = '\\binom';
        break;
    default:
        throw new Error('Unrecognized infix genfrac command');
    }
    return {
        type: 'infix',
        replaceWith: replaceWith
    };
});
defineFunction([
    '\\\\',
    '\\cr'
], {
    numArgs: 0,
    numOptionalArgs: 1,
    argTypes: ['size']
}, function (context, args) {
    var size = args[0];
    return {
        type: 'cr',
        size: size
    };
});
defineFunction([
    '\\begin',
    '\\end'
], {
    numArgs: 1,
    argTypes: ['text']
}, function (context, args) {
    var nameGroup = args[0];
    if (nameGroup.type !== 'ordgroup') {
        throw new ParseError('Invalid environment name', context.lexer, context.positions[1]);
    }
    var name = '';
    for (var i = 0; i < nameGroup.value.length; ++i) {
        name += nameGroup.value[i].value;
    }
    return {
        type: 'environment',
        name: name,
        namepos: context.positions[1]
    };
});
},{"./ParseError":18,"./utils":36}],32:[function(require,module,exports){
var utils = require('./utils');
function MathNode(type, children) {
    this.type = type;
    this.attributes = {};
    this.children = children || [];
}
MathNode.prototype.setAttribute = function (name, value) {
    this.attributes[name] = value;
};
MathNode.prototype.toNode = function () {
    var node = document.createElementNS('http://www.w3.org/1998/Math/MathML', this.type);
    for (var attr in this.attributes) {
        if (Object.prototype.hasOwnProperty.call(this.attributes, attr)) {
            node.setAttribute(attr, this.attributes[attr]);
        }
    }
    for (var i = 0; i < this.children.length; i++) {
        node.appendChild(this.children[i].toNode());
    }
    return node;
};
MathNode.prototype.toMarkup = function () {
    var markup = '<' + this.type;
    for (var attr in this.attributes) {
        if (Object.prototype.hasOwnProperty.call(this.attributes, attr)) {
            markup += ' ' + attr + '="';
            markup += utils.escape(this.attributes[attr]);
            markup += '"';
        }
    }
    markup += '>';
    for (var i = 0; i < this.children.length; i++) {
        markup += this.children[i].toMarkup();
    }
    markup += '</' + this.type + '>';
    return markup;
};
function TextNode(text) {
    this.text = text;
}
TextNode.prototype.toNode = function () {
    return document.createTextNode(this.text);
};
TextNode.prototype.toMarkup = function () {
    return utils.escape(this.text);
};
module.exports = {
    MathNode: MathNode,
    TextNode: TextNode
};
},{"./utils":36}],33:[function(require,module,exports){
function ParseNode(type, value, mode) {
    this.type = type;
    this.value = value;
    this.mode = mode;
}
module.exports = { ParseNode: ParseNode };
},{}],34:[function(require,module,exports){
var Parser = require('./Parser');
var parseTree = function (toParse, settings) {
    var parser = new Parser(toParse, settings);
    return parser.parse();
};
module.exports = parseTree;
},{"./Parser":19}],35:[function(require,module,exports){
module.exports = {
    math: {},
    text: {}
};
function defineSymbol(mode, font, group, replace, name) {
    module.exports[mode][name] = {
        font: font,
        group: group,
        replace: replace
    };
}
var math = 'math';
var text = 'text';
var main = 'main';
var ams = 'ams';
var accent = 'accent';
var bin = 'bin';
var close = 'close';
var inner = 'inner';
var mathord = 'mathord';
var op = 'op';
var open = 'open';
var punct = 'punct';
var rel = 'rel';
var spacing = 'spacing';
var textord = 'textord';
defineSymbol(math, main, rel, '\u2261', '\\equiv');
defineSymbol(math, main, rel, '\u227A', '\\prec');
defineSymbol(math, main, rel, '\u227B', '\\succ');
defineSymbol(math, main, rel, '\u223C', '\\sim');
defineSymbol(math, main, rel, '\u22A5', '\\perp');
defineSymbol(math, main, rel, '\u2AAF', '\\preceq');
defineSymbol(math, main, rel, '\u2AB0', '\\succeq');
defineSymbol(math, main, rel, '\u2243', '\\simeq');
defineSymbol(math, main, rel, '\u2223', '\\mid');
defineSymbol(math, main, rel, '\u226A', '\\ll');
defineSymbol(math, main, rel, '\u226B', '\\gg');
defineSymbol(math, main, rel, '\u224D', '\\asymp');
defineSymbol(math, main, rel, '\u2225', '\\parallel');
defineSymbol(math, main, rel, '\u22C8', '\\bowtie');
defineSymbol(math, main, rel, '\u2323', '\\smile');
defineSymbol(math, main, rel, '\u2291', '\\sqsubseteq');
defineSymbol(math, main, rel, '\u2292', '\\sqsupseteq');
defineSymbol(math, main, rel, '\u2250', '\\doteq');
defineSymbol(math, main, rel, '\u2322', '\\frown');
defineSymbol(math, main, rel, '\u220B', '\\ni');
defineSymbol(math, main, rel, '\u221D', '\\propto');
defineSymbol(math, main, rel, '\u22A2', '\\vdash');
defineSymbol(math, main, rel, '\u22A3', '\\dashv');
defineSymbol(math, main, rel, '\u220B', '\\owns');
defineSymbol(math, main, punct, '.', '\\ldotp');
defineSymbol(math, main, punct, '\u22C5', '\\cdotp');
defineSymbol(math, main, textord, '#', '\\#');
defineSymbol(math, main, textord, '&', '\\&');
defineSymbol(math, main, textord, 'ℵ', '\\aleph');
defineSymbol(math, main, textord, '\u2200', '\\forall');
defineSymbol(math, main, textord, 'ℏ', '\\hbar');
defineSymbol(math, main, textord, '\u2203', '\\exists');
defineSymbol(math, main, textord, '\u2207', '\\nabla');
defineSymbol(math, main, textord, '\u266D', '\\flat');
defineSymbol(math, main, textord, 'ℓ', '\\ell');
defineSymbol(math, main, textord, '\u266E', '\\natural');
defineSymbol(math, main, textord, '\u2663', '\\clubsuit');
defineSymbol(math, main, textord, '\u2118', '\\wp');
defineSymbol(math, main, textord, '\u266F', '\\sharp');
defineSymbol(math, main, textord, '\u2662', '\\diamondsuit');
defineSymbol(math, main, textord, 'ℜ', '\\Re');
defineSymbol(math, main, textord, '\u2661', '\\heartsuit');
defineSymbol(math, main, textord, 'ℑ', '\\Im');
defineSymbol(math, main, textord, '\u2660', '\\spadesuit');
defineSymbol(math, main, textord, '\u2020', '\\dag');
defineSymbol(math, main, textord, '\u2021', '\\ddag');
defineSymbol(math, main, close, '\u23B1', '\\rmoustache');
defineSymbol(math, main, open, '\u23B0', '\\lmoustache');
defineSymbol(math, main, close, '\u27EF', '\\rgroup');
defineSymbol(math, main, open, '\u27EE', '\\lgroup');
defineSymbol(math, main, bin, '\u2213', '\\mp');
defineSymbol(math, main, bin, '\u2296', '\\ominus');
defineSymbol(math, main, bin, '\u228E', '\\uplus');
defineSymbol(math, main, bin, '\u2293', '\\sqcap');
defineSymbol(math, main, bin, '\u2217', '\\ast');
defineSymbol(math, main, bin, '\u2294', '\\sqcup');
defineSymbol(math, main, bin, '\u25EF', '\\bigcirc');
defineSymbol(math, main, bin, '\u2219', '\\bullet');
defineSymbol(math, main, bin, '\u2021', '\\ddagger');
defineSymbol(math, main, bin, '\u2240', '\\wr');
defineSymbol(math, main, bin, '\u2A3F', '\\amalg');
defineSymbol(math, main, rel, '\u27F5', '\\longleftarrow');
defineSymbol(math, main, rel, '\u21D0', '\\Leftarrow');
defineSymbol(math, main, rel, '\u27F8', '\\Longleftarrow');
defineSymbol(math, main, rel, '\u27F6', '\\longrightarrow');
defineSymbol(math, main, rel, '\u21D2', '\\Rightarrow');
defineSymbol(math, main, rel, '\u27F9', '\\Longrightarrow');
defineSymbol(math, main, rel, '\u2194', '\\leftrightarrow');
defineSymbol(math, main, rel, '\u27F7', '\\longleftrightarrow');
defineSymbol(math, main, rel, '\u21D4', '\\Leftrightarrow');
defineSymbol(math, main, rel, '\u27FA', '\\Longleftrightarrow');
defineSymbol(math, main, rel, '\u21A6', '\\mapsto');
defineSymbol(math, main, rel, '\u27FC', '\\longmapsto');
defineSymbol(math, main, rel, '\u2197', '\\nearrow');
defineSymbol(math, main, rel, '\u21A9', '\\hookleftarrow');
defineSymbol(math, main, rel, '\u21AA', '\\hookrightarrow');
defineSymbol(math, main, rel, '\u2198', '\\searrow');
defineSymbol(math, main, rel, '\u21BC', '\\leftharpoonup');
defineSymbol(math, main, rel, '\u21C0', '\\rightharpoonup');
defineSymbol(math, main, rel, '\u2199', '\\swarrow');
defineSymbol(math, main, rel, '\u21BD', '\\leftharpoondown');
defineSymbol(math, main, rel, '\u21C1', '\\rightharpoondown');
defineSymbol(math, main, rel, '\u2196', '\\nwarrow');
defineSymbol(math, main, rel, '\u21CC', '\\rightleftharpoons');
defineSymbol(math, ams, rel, '\u226E', '\\nless');
defineSymbol(math, ams, rel, '\uE010', '\\nleqslant');
defineSymbol(math, ams, rel, '\uE011', '\\nleqq');
defineSymbol(math, ams, rel, '\u2A87', '\\lneq');
defineSymbol(math, ams, rel, '\u2268', '\\lneqq');
defineSymbol(math, ams, rel, '\uE00C', '\\lvertneqq');
defineSymbol(math, ams, rel, '\u22E6', '\\lnsim');
defineSymbol(math, ams, rel, '\u2A89', '\\lnapprox');
defineSymbol(math, ams, rel, '\u2280', '\\nprec');
defineSymbol(math, ams, rel, '\u22E0', '\\npreceq');
defineSymbol(math, ams, rel, '\u22E8', '\\precnsim');
defineSymbol(math, ams, rel, '\u2AB9', '\\precnapprox');
defineSymbol(math, ams, rel, '\u2241', '\\nsim');
defineSymbol(math, ams, rel, '\uE006', '\\nshortmid');
defineSymbol(math, ams, rel, '\u2224', '\\nmid');
defineSymbol(math, ams, rel, '\u22AC', '\\nvdash');
defineSymbol(math, ams, rel, '\u22AD', '\\nvDash');
defineSymbol(math, ams, rel, '\u22EA', '\\ntriangleleft');
defineSymbol(math, ams, rel, '\u22EC', '\\ntrianglelefteq');
defineSymbol(math, ams, rel, '\u228A', '\\subsetneq');
defineSymbol(math, ams, rel, '\uE01A', '\\varsubsetneq');
defineSymbol(math, ams, rel, '\u2ACB', '\\subsetneqq');
defineSymbol(math, ams, rel, '\uE017', '\\varsubsetneqq');
defineSymbol(math, ams, rel, '\u226F', '\\ngtr');
defineSymbol(math, ams, rel, '\uE00F', '\\ngeqslant');
defineSymbol(math, ams, rel, '\uE00E', '\\ngeqq');
defineSymbol(math, ams, rel, '\u2A88', '\\gneq');
defineSymbol(math, ams, rel, '\u2269', '\\gneqq');
defineSymbol(math, ams, rel, '\uE00D', '\\gvertneqq');
defineSymbol(math, ams, rel, '\u22E7', '\\gnsim');
defineSymbol(math, ams, rel, '\u2A8A', '\\gnapprox');
defineSymbol(math, ams, rel, '\u2281', '\\nsucc');
defineSymbol(math, ams, rel, '\u22E1', '\\nsucceq');
defineSymbol(math, ams, rel, '\u22E9', '\\succnsim');
defineSymbol(math, ams, rel, '\u2ABA', '\\succnapprox');
defineSymbol(math, ams, rel, '\u2246', '\\ncong');
defineSymbol(math, ams, rel, '\uE007', '\\nshortparallel');
defineSymbol(math, ams, rel, '\u2226', '\\nparallel');
defineSymbol(math, ams, rel, '\u22AF', '\\nVDash');
defineSymbol(math, ams, rel, '\u22EB', '\\ntriangleright');
defineSymbol(math, ams, rel, '\u22ED', '\\ntrianglerighteq');
defineSymbol(math, ams, rel, '\uE018', '\\nsupseteqq');
defineSymbol(math, ams, rel, '\u228B', '\\supsetneq');
defineSymbol(math, ams, rel, '\uE01B', '\\varsupsetneq');
defineSymbol(math, ams, rel, '\u2ACC', '\\supsetneqq');
defineSymbol(math, ams, rel, '\uE019', '\\varsupsetneqq');
defineSymbol(math, ams, rel, '\u22AE', '\\nVdash');
defineSymbol(math, ams, rel, '\u2AB5', '\\precneqq');
defineSymbol(math, ams, rel, '\u2AB6', '\\succneqq');
defineSymbol(math, ams, rel, '\uE016', '\\nsubseteqq');
defineSymbol(math, ams, bin, '\u22B4', '\\unlhd');
defineSymbol(math, ams, bin, '\u22B5', '\\unrhd');
defineSymbol(math, ams, rel, '\u219A', '\\nleftarrow');
defineSymbol(math, ams, rel, '\u219B', '\\nrightarrow');
defineSymbol(math, ams, rel, '\u21CD', '\\nLeftarrow');
defineSymbol(math, ams, rel, '\u21CF', '\\nRightarrow');
defineSymbol(math, ams, rel, '\u21AE', '\\nleftrightarrow');
defineSymbol(math, ams, rel, '\u21CE', '\\nLeftrightarrow');
defineSymbol(math, ams, rel, '\u25B3', '\\vartriangle');
defineSymbol(math, ams, textord, 'ℏ', '\\hslash');
defineSymbol(math, ams, textord, '\u25BD', '\\triangledown');
defineSymbol(math, ams, textord, '\u25CA', '\\lozenge');
defineSymbol(math, ams, textord, '\u24C8', '\\circledS');
defineSymbol(math, ams, textord, '\xAE', '\\circledR');
defineSymbol(math, ams, textord, '\u2221', '\\measuredangle');
defineSymbol(math, ams, textord, '\u2204', '\\nexists');
defineSymbol(math, ams, textord, '\u2127', '\\mho');
defineSymbol(math, ams, textord, 'Ⅎ', '\\Finv');
defineSymbol(math, ams, textord, '\u2141', '\\Game');
defineSymbol(math, ams, textord, 'k', '\\Bbbk');
defineSymbol(math, ams, textord, '\u2035', '\\backprime');
defineSymbol(math, ams, textord, '\u25B2', '\\blacktriangle');
defineSymbol(math, ams, textord, '\u25BC', '\\blacktriangledown');
defineSymbol(math, ams, textord, '\u25A0', '\\blacksquare');
defineSymbol(math, ams, textord, '\u29EB', '\\blacklozenge');
defineSymbol(math, ams, textord, '\u2605', '\\bigstar');
defineSymbol(math, ams, textord, '\u2222', '\\sphericalangle');
defineSymbol(math, ams, textord, '\u2201', '\\complement');
defineSymbol(math, ams, textord, 'ð', '\\eth');
defineSymbol(math, ams, textord, '\u2571', '\\diagup');
defineSymbol(math, ams, textord, '\u2572', '\\diagdown');
defineSymbol(math, ams, textord, '\u25A1', '\\square');
defineSymbol(math, ams, textord, '\u25A1', '\\Box');
defineSymbol(math, ams, textord, '\u25CA', '\\Diamond');
defineSymbol(math, ams, textord, '\xA5', '\\yen');
defineSymbol(math, ams, textord, '\u2713', '\\checkmark');
defineSymbol(math, ams, textord, 'ℶ', '\\beth');
defineSymbol(math, ams, textord, 'ℸ', '\\daleth');
defineSymbol(math, ams, textord, 'ℷ', '\\gimel');
defineSymbol(math, ams, textord, 'ϝ', '\\digamma');
defineSymbol(math, ams, textord, 'ϰ', '\\varkappa');
defineSymbol(math, ams, open, '\u250C', '\\ulcorner');
defineSymbol(math, ams, close, '\u2510', '\\urcorner');
defineSymbol(math, ams, open, '\u2514', '\\llcorner');
defineSymbol(math, ams, close, '\u2518', '\\lrcorner');
defineSymbol(math, ams, rel, '\u2266', '\\leqq');
defineSymbol(math, ams, rel, '\u2A7D', '\\leqslant');
defineSymbol(math, ams, rel, '\u2A95', '\\eqslantless');
defineSymbol(math, ams, rel, '\u2272', '\\lesssim');
defineSymbol(math, ams, rel, '\u2A85', '\\lessapprox');
defineSymbol(math, ams, rel, '\u224A', '\\approxeq');
defineSymbol(math, ams, bin, '\u22D6', '\\lessdot');
defineSymbol(math, ams, rel, '\u22D8', '\\lll');
defineSymbol(math, ams, rel, '\u2276', '\\lessgtr');
defineSymbol(math, ams, rel, '\u22DA', '\\lesseqgtr');
defineSymbol(math, ams, rel, '\u2A8B', '\\lesseqqgtr');
defineSymbol(math, ams, rel, '\u2251', '\\doteqdot');
defineSymbol(math, ams, rel, '\u2253', '\\risingdotseq');
defineSymbol(math, ams, rel, '\u2252', '\\fallingdotseq');
defineSymbol(math, ams, rel, '\u223D', '\\backsim');
defineSymbol(math, ams, rel, '\u22CD', '\\backsimeq');
defineSymbol(math, ams, rel, '\u2AC5', '\\subseteqq');
defineSymbol(math, ams, rel, '\u22D0', '\\Subset');
defineSymbol(math, ams, rel, '\u228F', '\\sqsubset');
defineSymbol(math, ams, rel, '\u227C', '\\preccurlyeq');
defineSymbol(math, ams, rel, '\u22DE', '\\curlyeqprec');
defineSymbol(math, ams, rel, '\u227E', '\\precsim');
defineSymbol(math, ams, rel, '\u2AB7', '\\precapprox');
defineSymbol(math, ams, rel, '\u22B2', '\\vartriangleleft');
defineSymbol(math, ams, rel, '\u22B4', '\\trianglelefteq');
defineSymbol(math, ams, rel, '\u22A8', '\\vDash');
defineSymbol(math, ams, rel, '\u22AA', '\\Vvdash');
defineSymbol(math, ams, rel, '\u2323', '\\smallsmile');
defineSymbol(math, ams, rel, '\u2322', '\\smallfrown');
defineSymbol(math, ams, rel, '\u224F', '\\bumpeq');
defineSymbol(math, ams, rel, '\u224E', '\\Bumpeq');
defineSymbol(math, ams, rel, '\u2267', '\\geqq');
defineSymbol(math, ams, rel, '\u2A7E', '\\geqslant');
defineSymbol(math, ams, rel, '\u2A96', '\\eqslantgtr');
defineSymbol(math, ams, rel, '\u2273', '\\gtrsim');
defineSymbol(math, ams, rel, '\u2A86', '\\gtrapprox');
defineSymbol(math, ams, bin, '\u22D7', '\\gtrdot');
defineSymbol(math, ams, rel, '\u22D9', '\\ggg');
defineSymbol(math, ams, rel, '\u2277', '\\gtrless');
defineSymbol(math, ams, rel, '\u22DB', '\\gtreqless');
defineSymbol(math, ams, rel, '\u2A8C', '\\gtreqqless');
defineSymbol(math, ams, rel, '\u2256', '\\eqcirc');
defineSymbol(math, ams, rel, '\u2257', '\\circeq');
defineSymbol(math, ams, rel, '\u225C', '\\triangleq');
defineSymbol(math, ams, rel, '\u223C', '\\thicksim');
defineSymbol(math, ams, rel, '\u2248', '\\thickapprox');
defineSymbol(math, ams, rel, '\u2AC6', '\\supseteqq');
defineSymbol(math, ams, rel, '\u22D1', '\\Supset');
defineSymbol(math, ams, rel, '\u2290', '\\sqsupset');
defineSymbol(math, ams, rel, '\u227D', '\\succcurlyeq');
defineSymbol(math, ams, rel, '\u22DF', '\\curlyeqsucc');
defineSymbol(math, ams, rel, '\u227F', '\\succsim');
defineSymbol(math, ams, rel, '\u2AB8', '\\succapprox');
defineSymbol(math, ams, rel, '\u22B3', '\\vartriangleright');
defineSymbol(math, ams, rel, '\u22B5', '\\trianglerighteq');
defineSymbol(math, ams, rel, '\u22A9', '\\Vdash');
defineSymbol(math, ams, rel, '\u2223', '\\shortmid');
defineSymbol(math, ams, rel, '\u2225', '\\shortparallel');
defineSymbol(math, ams, rel, '\u226C', '\\between');
defineSymbol(math, ams, rel, '\u22D4', '\\pitchfork');
defineSymbol(math, ams, rel, '\u221D', '\\varpropto');
defineSymbol(math, ams, rel, '\u25C0', '\\blacktriangleleft');
defineSymbol(math, ams, rel, '\u2234', '\\therefore');
defineSymbol(math, ams, rel, '\u220D', '\\backepsilon');
defineSymbol(math, ams, rel, '\u25B6', '\\blacktriangleright');
defineSymbol(math, ams, rel, '\u2235', '\\because');
defineSymbol(math, ams, rel, '\u22D8', '\\llless');
defineSymbol(math, ams, rel, '\u22D9', '\\gggtr');
defineSymbol(math, ams, bin, '\u22B2', '\\lhd');
defineSymbol(math, ams, bin, '\u22B3', '\\rhd');
defineSymbol(math, ams, rel, '\u2242', '\\eqsim');
defineSymbol(math, main, rel, '\u22C8', '\\Join');
defineSymbol(math, ams, rel, '\u2251', '\\Doteq');
defineSymbol(math, ams, bin, '\u2214', '\\dotplus');
defineSymbol(math, ams, bin, '\u2216', '\\smallsetminus');
defineSymbol(math, ams, bin, '\u22D2', '\\Cap');
defineSymbol(math, ams, bin, '\u22D3', '\\Cup');
defineSymbol(math, ams, bin, '\u2A5E', '\\doublebarwedge');
defineSymbol(math, ams, bin, '\u229F', '\\boxminus');
defineSymbol(math, ams, bin, '\u229E', '\\boxplus');
defineSymbol(math, ams, bin, '\u22C7', '\\divideontimes');
defineSymbol(math, ams, bin, '\u22C9', '\\ltimes');
defineSymbol(math, ams, bin, '\u22CA', '\\rtimes');
defineSymbol(math, ams, bin, '\u22CB', '\\leftthreetimes');
defineSymbol(math, ams, bin, '\u22CC', '\\rightthreetimes');
defineSymbol(math, ams, bin, '\u22CF', '\\curlywedge');
defineSymbol(math, ams, bin, '\u22CE', '\\curlyvee');
defineSymbol(math, ams, bin, '\u229D', '\\circleddash');
defineSymbol(math, ams, bin, '\u229B', '\\circledast');
defineSymbol(math, ams, bin, '\u22C5', '\\centerdot');
defineSymbol(math, ams, bin, '\u22BA', '\\intercal');
defineSymbol(math, ams, bin, '\u22D2', '\\doublecap');
defineSymbol(math, ams, bin, '\u22D3', '\\doublecup');
defineSymbol(math, ams, bin, '\u22A0', '\\boxtimes');
defineSymbol(math, ams, rel, '\u21E2', '\\dashrightarrow');
defineSymbol(math, ams, rel, '\u21E0', '\\dashleftarrow');
defineSymbol(math, ams, rel, '\u21C7', '\\leftleftarrows');
defineSymbol(math, ams, rel, '\u21C6', '\\leftrightarrows');
defineSymbol(math, ams, rel, '\u21DA', '\\Lleftarrow');
defineSymbol(math, ams, rel, '\u219E', '\\twoheadleftarrow');
defineSymbol(math, ams, rel, '\u21A2', '\\leftarrowtail');
defineSymbol(math, ams, rel, '\u21AB', '\\looparrowleft');
defineSymbol(math, ams, rel, '\u21CB', '\\leftrightharpoons');
defineSymbol(math, ams, rel, '\u21B6', '\\curvearrowleft');
defineSymbol(math, ams, rel, '\u21BA', '\\circlearrowleft');
defineSymbol(math, ams, rel, '\u21B0', '\\Lsh');
defineSymbol(math, ams, rel, '\u21C8', '\\upuparrows');
defineSymbol(math, ams, rel, '\u21BF', '\\upharpoonleft');
defineSymbol(math, ams, rel, '\u21C3', '\\downharpoonleft');
defineSymbol(math, ams, rel, '\u22B8', '\\multimap');
defineSymbol(math, ams, rel, '\u21AD', '\\leftrightsquigarrow');
defineSymbol(math, ams, rel, '\u21C9', '\\rightrightarrows');
defineSymbol(math, ams, rel, '\u21C4', '\\rightleftarrows');
defineSymbol(math, ams, rel, '\u21A0', '\\twoheadrightarrow');
defineSymbol(math, ams, rel, '\u21A3', '\\rightarrowtail');
defineSymbol(math, ams, rel, '\u21AC', '\\looparrowright');
defineSymbol(math, ams, rel, '\u21B7', '\\curvearrowright');
defineSymbol(math, ams, rel, '\u21BB', '\\circlearrowright');
defineSymbol(math, ams, rel, '\u21B1', '\\Rsh');
defineSymbol(math, ams, rel, '\u21CA', '\\downdownarrows');
defineSymbol(math, ams, rel, '\u21BE', '\\upharpoonright');
defineSymbol(math, ams, rel, '\u21C2', '\\downharpoonright');
defineSymbol(math, ams, rel, '\u21DD', '\\rightsquigarrow');
defineSymbol(math, ams, rel, '\u21DD', '\\leadsto');
defineSymbol(math, ams, rel, '\u21DB', '\\Rrightarrow');
defineSymbol(math, ams, rel, '\u21BE', '\\restriction');
defineSymbol(math, main, textord, '\u2018', '`');
defineSymbol(math, main, textord, '$', '\\$');
defineSymbol(math, main, textord, '%', '\\%');
defineSymbol(math, main, textord, '_', '\\_');
defineSymbol(math, main, textord, '\u2220', '\\angle');
defineSymbol(math, main, textord, '\u221E', '\\infty');
defineSymbol(math, main, textord, '\u2032', '\\prime');
defineSymbol(math, main, textord, '\u25B3', '\\triangle');
defineSymbol(math, main, textord, 'Γ', '\\Gamma');
defineSymbol(math, main, textord, 'Δ', '\\Delta');
defineSymbol(math, main, textord, 'Θ', '\\Theta');
defineSymbol(math, main, textord, 'Λ', '\\Lambda');
defineSymbol(math, main, textord, 'Ξ', '\\Xi');
defineSymbol(math, main, textord, 'Π', '\\Pi');
defineSymbol(math, main, textord, 'Σ', '\\Sigma');
defineSymbol(math, main, textord, 'Υ', '\\Upsilon');
defineSymbol(math, main, textord, 'Φ', '\\Phi');
defineSymbol(math, main, textord, 'Ψ', '\\Psi');
defineSymbol(math, main, textord, 'Ω', '\\Omega');
defineSymbol(math, main, textord, '\xAC', '\\neg');
defineSymbol(math, main, textord, '\xAC', '\\lnot');
defineSymbol(math, main, textord, '\u22A4', '\\top');
defineSymbol(math, main, textord, '\u22A5', '\\bot');
defineSymbol(math, main, textord, '\u2205', '\\emptyset');
defineSymbol(math, ams, textord, '\u2205', '\\varnothing');
defineSymbol(math, main, mathord, 'α', '\\alpha');
defineSymbol(math, main, mathord, 'β', '\\beta');
defineSymbol(math, main, mathord, 'γ', '\\gamma');
defineSymbol(math, main, mathord, 'δ', '\\delta');
defineSymbol(math, main, mathord, 'ϵ', '\\epsilon');
defineSymbol(math, main, mathord, 'ζ', '\\zeta');
defineSymbol(math, main, mathord, 'η', '\\eta');
defineSymbol(math, main, mathord, 'θ', '\\theta');
defineSymbol(math, main, mathord, 'ι', '\\iota');
defineSymbol(math, main, mathord, 'κ', '\\kappa');
defineSymbol(math, main, mathord, 'λ', '\\lambda');
defineSymbol(math, main, mathord, 'μ', '\\mu');
defineSymbol(math, main, mathord, 'ν', '\\nu');
defineSymbol(math, main, mathord, 'ξ', '\\xi');
defineSymbol(math, main, mathord, 'o', '\\omicron');
defineSymbol(math, main, mathord, 'π', '\\pi');
defineSymbol(math, main, mathord, 'ρ', '\\rho');
defineSymbol(math, main, mathord, 'σ', '\\sigma');
defineSymbol(math, main, mathord, 'τ', '\\tau');
defineSymbol(math, main, mathord, 'υ', '\\upsilon');
defineSymbol(math, main, mathord, 'ϕ', '\\phi');
defineSymbol(math, main, mathord, 'χ', '\\chi');
defineSymbol(math, main, mathord, 'ψ', '\\psi');
defineSymbol(math, main, mathord, 'ω', '\\omega');
defineSymbol(math, main, mathord, 'ε', '\\varepsilon');
defineSymbol(math, main, mathord, 'ϑ', '\\vartheta');
defineSymbol(math, main, mathord, 'ϖ', '\\varpi');
defineSymbol(math, main, mathord, 'ϱ', '\\varrho');
defineSymbol(math, main, mathord, 'ς', '\\varsigma');
defineSymbol(math, main, mathord, 'φ', '\\varphi');
defineSymbol(math, main, bin, '\u2217', '*');
defineSymbol(math, main, bin, '+', '+');
defineSymbol(math, main, bin, '\u2212', '-');
defineSymbol(math, main, bin, '\u22C5', '\\cdot');
defineSymbol(math, main, bin, '\u2218', '\\circ');
defineSymbol(math, main, bin, '\xF7', '\\div');
defineSymbol(math, main, bin, '\xB1', '\\pm');
defineSymbol(math, main, bin, '\xD7', '\\times');
defineSymbol(math, main, bin, '\u2229', '\\cap');
defineSymbol(math, main, bin, '\u222A', '\\cup');
defineSymbol(math, main, bin, '\u2216', '\\setminus');
defineSymbol(math, main, bin, '\u2227', '\\land');
defineSymbol(math, main, bin, '\u2228', '\\lor');
defineSymbol(math, main, bin, '\u2227', '\\wedge');
defineSymbol(math, main, bin, '\u2228', '\\vee');
defineSymbol(math, main, textord, '\u221A', '\\surd');
defineSymbol(math, main, open, '(', '(');
defineSymbol(math, main, open, '[', '[');
defineSymbol(math, main, open, '\u27E8', '\\langle');
defineSymbol(math, main, open, '\u2223', '\\lvert');
defineSymbol(math, main, open, '\u2225', '\\lVert');
defineSymbol(math, main, close, ')', ')');
defineSymbol(math, main, close, ']', ']');
defineSymbol(math, main, close, '?', '?');
defineSymbol(math, main, close, '!', '!');
defineSymbol(math, main, close, '\u27E9', '\\rangle');
defineSymbol(math, main, close, '\u2223', '\\rvert');
defineSymbol(math, main, close, '\u2225', '\\rVert');
defineSymbol(math, main, rel, '=', '=');
defineSymbol(math, main, rel, '<', '<');
defineSymbol(math, main, rel, '>', '>');
defineSymbol(math, main, rel, ':', ':');
defineSymbol(math, main, rel, '\u2248', '\\approx');
defineSymbol(math, main, rel, '\u2245', '\\cong');
defineSymbol(math, main, rel, '\u2265', '\\ge');
defineSymbol(math, main, rel, '\u2265', '\\geq');
defineSymbol(math, main, rel, '\u2190', '\\gets');
defineSymbol(math, main, rel, '>', '\\gt');
defineSymbol(math, main, rel, '\u2208', '\\in');
defineSymbol(math, main, rel, '\u2209', '\\notin');
defineSymbol(math, main, rel, '\u2282', '\\subset');
defineSymbol(math, main, rel, '\u2283', '\\supset');
defineSymbol(math, main, rel, '\u2286', '\\subseteq');
defineSymbol(math, main, rel, '\u2287', '\\supseteq');
defineSymbol(math, ams, rel, '\u2288', '\\nsubseteq');
defineSymbol(math, ams, rel, '\u2289', '\\nsupseteq');
defineSymbol(math, main, rel, '\u22A8', '\\models');
defineSymbol(math, main, rel, '\u2190', '\\leftarrow');
defineSymbol(math, main, rel, '\u2264', '\\le');
defineSymbol(math, main, rel, '\u2264', '\\leq');
defineSymbol(math, main, rel, '<', '\\lt');
defineSymbol(math, main, rel, '\u2260', '\\ne');
defineSymbol(math, main, rel, '\u2260', '\\neq');
defineSymbol(math, main, rel, '\u2192', '\\rightarrow');
defineSymbol(math, main, rel, '\u2192', '\\to');
defineSymbol(math, ams, rel, '\u2271', '\\ngeq');
defineSymbol(math, ams, rel, '\u2270', '\\nleq');
defineSymbol(math, main, spacing, null, '\\!');
defineSymbol(math, main, spacing, '\xA0', '\\ ');
defineSymbol(math, main, spacing, '\xA0', '~');
defineSymbol(math, main, spacing, null, '\\,');
defineSymbol(math, main, spacing, null, '\\:');
defineSymbol(math, main, spacing, null, '\\;');
defineSymbol(math, main, spacing, null, '\\enspace');
defineSymbol(math, main, spacing, null, '\\qquad');
defineSymbol(math, main, spacing, null, '\\quad');
defineSymbol(math, main, spacing, '\xA0', '\\space');
defineSymbol(math, main, punct, ',', ',');
defineSymbol(math, main, punct, ';', ';');
defineSymbol(math, main, punct, ':', '\\colon');
defineSymbol(math, ams, bin, '\u22BC', '\\barwedge');
defineSymbol(math, ams, bin, '\u22BB', '\\veebar');
defineSymbol(math, main, bin, '\u2299', '\\odot');
defineSymbol(math, main, bin, '\u2295', '\\oplus');
defineSymbol(math, main, bin, '\u2297', '\\otimes');
defineSymbol(math, main, textord, '\u2202', '\\partial');
defineSymbol(math, main, bin, '\u2298', '\\oslash');
defineSymbol(math, ams, bin, '\u229A', '\\circledcirc');
defineSymbol(math, ams, bin, '\u22A1', '\\boxdot');
defineSymbol(math, main, bin, '\u25B3', '\\bigtriangleup');
defineSymbol(math, main, bin, '\u25BD', '\\bigtriangledown');
defineSymbol(math, main, bin, '\u2020', '\\dagger');
defineSymbol(math, main, bin, '\u22C4', '\\diamond');
defineSymbol(math, main, bin, '\u22C6', '\\star');
defineSymbol(math, main, bin, '\u25C3', '\\triangleleft');
defineSymbol(math, main, bin, '\u25B9', '\\triangleright');
defineSymbol(math, main, open, '{', '\\{');
defineSymbol(math, main, close, '}', '\\}');
defineSymbol(math, main, open, '{', '\\lbrace');
defineSymbol(math, main, close, '}', '\\rbrace');
defineSymbol(math, main, open, '[', '\\lbrack');
defineSymbol(math, main, close, ']', '\\rbrack');
defineSymbol(math, main, open, '\u230A', '\\lfloor');
defineSymbol(math, main, close, '\u230B', '\\rfloor');
defineSymbol(math, main, open, '\u2308', '\\lceil');
defineSymbol(math, main, close, '\u2309', '\\rceil');
defineSymbol(math, main, textord, '\\', '\\backslash');
defineSymbol(math, main, textord, '\u2223', '|');
defineSymbol(math, main, textord, '\u2223', '\\vert');
defineSymbol(math, main, textord, '\u2225', '\\|');
defineSymbol(math, main, textord, '\u2225', '\\Vert');
defineSymbol(math, main, rel, '\u2191', '\\uparrow');
defineSymbol(math, main, rel, '\u21D1', '\\Uparrow');
defineSymbol(math, main, rel, '\u2193', '\\downarrow');
defineSymbol(math, main, rel, '\u21D3', '\\Downarrow');
defineSymbol(math, main, rel, '\u2195', '\\updownarrow');
defineSymbol(math, main, rel, '\u21D5', '\\Updownarrow');
defineSymbol(math, math, op, '\u2210', '\\coprod');
defineSymbol(math, math, op, '\u22C1', '\\bigvee');
defineSymbol(math, math, op, '\u22C0', '\\bigwedge');
defineSymbol(math, math, op, '\u2A04', '\\biguplus');
defineSymbol(math, math, op, '\u22C2', '\\bigcap');
defineSymbol(math, math, op, '\u22C3', '\\bigcup');
defineSymbol(math, math, op, '\u222B', '\\int');
defineSymbol(math, math, op, '\u222B', '\\intop');
defineSymbol(math, math, op, '\u222C', '\\iint');
defineSymbol(math, math, op, '\u222D', '\\iiint');
defineSymbol(math, math, op, '\u220F', '\\prod');
defineSymbol(math, math, op, '\u2211', '\\sum');
defineSymbol(math, math, op, '\u2A02', '\\bigotimes');
defineSymbol(math, math, op, '\u2A01', '\\bigoplus');
defineSymbol(math, math, op, '\u2A00', '\\bigodot');
defineSymbol(math, math, op, '\u222E', '\\oint');
defineSymbol(math, math, op, '\u2A06', '\\bigsqcup');
defineSymbol(math, math, op, '\u222B', '\\smallint');
defineSymbol(math, main, inner, '\u2026', '\\ldots');
defineSymbol(math, main, inner, '\u22EF', '\\cdots');
defineSymbol(math, main, inner, '\u22F1', '\\ddots');
defineSymbol(math, main, textord, '\u22EE', '\\vdots');
defineSymbol(math, main, accent, '\xB4', '\\acute');
defineSymbol(math, main, accent, '`', '\\grave');
defineSymbol(math, main, accent, '\xA8', '\\ddot');
defineSymbol(math, main, accent, '~', '\\tilde');
defineSymbol(math, main, accent, '\xAF', '\\bar');
defineSymbol(math, main, accent, '\u02D8', '\\breve');
defineSymbol(math, main, accent, 'ˇ', '\\check');
defineSymbol(math, main, accent, '^', '\\hat');
defineSymbol(math, main, accent, '⃗', '\\vec');
defineSymbol(math, main, accent, '\u02D9', '\\dot');
defineSymbol(math, main, mathord, 'ı', '\\imath');
defineSymbol(math, main, mathord, 'ȷ', '\\jmath');
defineSymbol(text, main, spacing, '\xA0', '\\ ');
defineSymbol(text, main, spacing, '\xA0', ' ');
defineSymbol(text, main, spacing, '\xA0', '~');
var i;
var ch;
var mathTextSymbols = '0123456789/@."';
for (i = 0; i < mathTextSymbols.length; i++) {
    ch = mathTextSymbols.charAt(i);
    defineSymbol(math, main, textord, ch, ch);
}
var textSymbols = '0123456789`!@*()-=+[]\'";:?/.,';
for (i = 0; i < textSymbols.length; i++) {
    ch = textSymbols.charAt(i);
    defineSymbol(text, main, textord, ch, ch);
}
var letters = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
for (i = 0; i < letters.length; i++) {
    ch = letters.charAt(i);
    defineSymbol(math, main, mathord, ch, ch);
    defineSymbol(text, main, textord, ch, ch);
}
},{}],36:[function(require,module,exports){
var nativeIndexOf = Array.prototype.indexOf;
var indexOf = function (list, elem) {
    if (list == null) {
        return -1;
    }
    if (nativeIndexOf && list.indexOf === nativeIndexOf) {
        return list.indexOf(elem);
    }
    var i = 0;
    var l = list.length;
    for (; i < l; i++) {
        if (list[i] === elem) {
            return i;
        }
    }
    return -1;
};
var contains = function (list, elem) {
    return indexOf(list, elem) !== -1;
};
var deflt = function (setting, defaultIfUndefined) {
    return setting === undefined ? defaultIfUndefined : setting;
};
var uppercase = /([A-Z])/g;
var hyphenate = function (str) {
    return str.replace(uppercase, '-$1').toLowerCase();
};
var ESCAPE_LOOKUP = {
    '&': '&amp;',
    '>': '&gt;',
    '<': '&lt;',
    '"': '&quot;',
    '\'': '&#x27;'
};
var ESCAPE_REGEX = /[&><"']/g;
function escaper(match) {
    return ESCAPE_LOOKUP[match];
}
function escape(text) {
    return ('' + text).replace(ESCAPE_REGEX, escaper);
}
var setTextContent;
if (typeof document !== 'undefined') {
    var testNode = document.createElement('span');
    if ('textContent' in testNode) {
        setTextContent = function (node, text) {
            node.textContent = text;
        };
    } else {
        setTextContent = function (node, text) {
            node.innerText = text;
        };
    }
}
function clearNode(node) {
    setTextContent(node, '');
}
module.exports = {
    contains: contains,
    deflt: deflt,
    escape: escape,
    hyphenate: hyphenate,
    indexOf: indexOf,
    setTextContent: setTextContent,
    clearNode: clearNode
};
},{}],37:[function(require,module,exports){
'use strict';
function getRelocatable(re) {
    if (!re.__matchAtRelocatable) {
        var source = re.source + '|()';
        var flags = 'g' + (re.ignoreCase ? 'i' : '') + (re.multiline ? 'm' : '') + (re.unicode ? 'u' : '');
        re.__matchAtRelocatable = new RegExp(source, flags);
    }
    return re.__matchAtRelocatable;
}
function matchAt(re, str, pos) {
    if (re.global || re.sticky) {
        throw new Error('matchAt(...): Only non-global regexes are supported');
    }
    var reloc = getRelocatable(re);
    reloc.lastIndex = pos;
    var match = reloc.exec(str);
    if (match[match.length - 1] == null) {
        match.length = match.length - 1;
        return match;
    } else {
        return null;
    }
}
module.exports = matchAt;
},{}],38:[function(require,module,exports){
'use strict';
module.exports = mouseListen;
var mouse = require('mouse-event');
function mouseListen(element, callback) {
    if (!callback) {
        callback = element;
        element = window;
    }
    var buttonState = 0;
    var x = 0;
    var y = 0;
    var mods = {
        shift: false,
        alt: false,
        control: false,
        meta: false
    };
    var attached = false;
    function updateMods(ev) {
        var changed = false;
        if ('altKey' in ev) {
            changed = changed || ev.altKey !== mods.alt;
            mods.alt = !!ev.altKey;
        }
        if ('shiftKey' in ev) {
            changed = changed || ev.shiftKey !== mods.shift;
            mods.shift = !!ev.shiftKey;
        }
        if ('ctrlKey' in ev) {
            changed = changed || ev.ctrlKey !== mods.control;
            mods.control = !!ev.ctrlKey;
        }
        if ('metaKey' in ev) {
            changed = changed || ev.metaKey !== mods.meta;
            mods.meta = !!ev.metaKey;
        }
        return changed;
    }
    function handleEvent(nextButtons, ev) {
        var nextX = mouse.x(ev);
        var nextY = mouse.y(ev);
        if ('buttons' in ev) {
            nextButtons = ev.buttons | 0;
        }
        if (nextButtons !== buttonState || nextX !== x || nextY !== y || updateMods(ev)) {
            buttonState = nextButtons | 0;
            x = nextX || 0;
            y = nextY || 0;
            callback && callback(buttonState, x, y, mods);
        }
    }
    function clearState(ev) {
        handleEvent(0, ev);
    }
    function handleBlur() {
        if (buttonState || x || y || mods.shift || mods.alt || mods.meta || mods.control) {
            x = y = 0;
            buttonState = 0;
            mods.shift = mods.alt = mods.control = mods.meta = false;
            callback && callback(0, 0, 0, mods);
        }
    }
    function handleMods(ev) {
        if (updateMods(ev)) {
            callback && callback(buttonState, x, y, mods);
        }
    }
    function handleMouseMove(ev) {
        if (mouse.buttons(ev) === 0) {
            handleEvent(0, ev);
        } else {
            handleEvent(buttonState, ev);
        }
    }
    function handleMouseDown(ev) {
        handleEvent(buttonState | mouse.buttons(ev), ev);
    }
    function handleMouseUp(ev) {
        handleEvent(buttonState & ~mouse.buttons(ev), ev);
    }
    function attachListeners() {
        if (attached) {
            return;
        }
        attached = true;
        element.addEventListener('mousemove', handleMouseMove);
        element.addEventListener('mousedown', handleMouseDown);
        element.addEventListener('mouseup', handleMouseUp);
        element.addEventListener('mouseleave', clearState);
        element.addEventListener('mouseenter', clearState);
        element.addEventListener('mouseout', clearState);
        element.addEventListener('mouseover', clearState);
        element.addEventListener('blur', handleBlur);
        element.addEventListener('keyup', handleMods);
        element.addEventListener('keydown', handleMods);
        element.addEventListener('keypress', handleMods);
        if (element !== window) {
            window.addEventListener('blur', handleBlur);
            window.addEventListener('keyup', handleMods);
            window.addEventListener('keydown', handleMods);
            window.addEventListener('keypress', handleMods);
        }
    }
    function detachListeners() {
        if (!attached) {
            return;
        }
        attached = false;
        element.removeEventListener('mousemove', handleMouseMove);
        element.removeEventListener('mousedown', handleMouseDown);
        element.removeEventListener('mouseup', handleMouseUp);
        element.removeEventListener('mouseleave', clearState);
        element.removeEventListener('mouseenter', clearState);
        element.removeEventListener('mouseout', clearState);
        element.removeEventListener('mouseover', clearState);
        element.removeEventListener('blur', handleBlur);
        element.removeEventListener('keyup', handleMods);
        element.removeEventListener('keydown', handleMods);
        element.removeEventListener('keypress', handleMods);
        if (element !== window) {
            window.removeEventListener('blur', handleBlur);
            window.removeEventListener('keyup', handleMods);
            window.removeEventListener('keydown', handleMods);
            window.removeEventListener('keypress', handleMods);
        }
    }
    attachListeners();
    var result = { element: element };
    Object.defineProperties(result, {
        enabled: {
            get: function () {
                return attached;
            },
            set: function (f) {
                if (f) {
                    attachListeners();
                } else {
                    detachListeners;
                }
            },
            enumerable: true
        },
        buttons: {
            get: function () {
                return buttonState;
            },
            enumerable: true
        },
        x: {
            get: function () {
                return x;
            },
            enumerable: true
        },
        y: {
            get: function () {
                return y;
            },
            enumerable: true
        },
        mods: {
            get: function () {
                return mods;
            },
            enumerable: true
        }
    });
    return result;
}
},{"mouse-event":39}],39:[function(require,module,exports){
'use strict';
function mouseButtons(ev) {
    if (typeof ev === 'object') {
        if ('buttons' in ev) {
            return ev.buttons;
        } else if ('which' in ev) {
            var b = ev.which;
            if (b === 2) {
                return 4;
            } else if (b === 3) {
                return 2;
            } else if (b > 0) {
                return 1 << b - 1;
            }
        } else if ('button' in ev) {
            var b = ev.button;
            if (b === 1) {
                return 4;
            } else if (b === 2) {
                return 2;
            } else if (b >= 0) {
                return 1 << b;
            }
        }
    }
    return 0;
}
exports.buttons = mouseButtons;
function mouseElement(ev) {
    return ev.target || ev.srcElement || window;
}
exports.element = mouseElement;
function mouseRelativeX(ev) {
    if (typeof ev === 'object') {
        if ('offsetX' in ev) {
            return ev.offsetX;
        }
        var target = mouseElement(ev);
        var bounds = target.getBoundingClientRect();
        return ev.clientX - bounds.left;
    }
    return 0;
}
exports.x = mouseRelativeX;
function mouseRelativeY(ev) {
    if (typeof ev === 'object') {
        if ('offsetY' in ev) {
            return ev.offsetY;
        }
        var target = mouseElement(ev);
        var bounds = target.getBoundingClientRect();
        return ev.clientY - bounds.top;
    }
    return 0;
}
exports.y = mouseRelativeY;
},{}],40:[function(require,module,exports){
'use strict';
var toPX = require('to-px');
module.exports = mouseWheelListen;
function mouseWheelListen(element, callback, noScroll) {
    if (typeof element === 'function') {
        noScroll = !!callback;
        callback = element;
        element = window;
    }
    var lineHeight = toPX('ex', element);
    var listener = function (ev) {
        if (noScroll) {
            ev.preventDefault();
        }
        var dx = ev.deltaX || 0;
        var dy = ev.deltaY || 0;
        var dz = ev.deltaZ || 0;
        var mode = ev.deltaMode;
        var scale = 1;
        switch (mode) {
        case 1:
            scale = lineHeight;
            break;
        case 2:
            scale = window.innerHeight;
            break;
        }
        dx *= scale;
        dy *= scale;
        dz *= scale;
        if (dx || dy || dz) {
            return callback(dx, dy, dz, ev);
        }
    };
    element.addEventListener('wheel', listener);
    return listener;
}
},{"to-px":45}],41:[function(require,module,exports){
module.exports = function parseUnit(str, out) {
    if (!out)
        out = [
            0,
            ''
        ];
    str = String(str);
    var num = parseFloat(str, 10);
    out[0] = num;
    out[1] = str.match(/[\d.\-\+]*\s*(.*)/)[1] || '';
    return out;
};
},{}],42:[function(require,module,exports){
var mouseChange = require('mouse-change');
var mouseWheel = require('mouse-wheel');
var identity = require('gl-mat4/identity');
var perspective = require('gl-mat4/perspective');
var lookAt = require('gl-mat4/lookAt');
module.exports = createCamera;
var isBrowser = typeof window !== 'undefined';
function createCamera(regl, props_) {
    var props = props_ || {};
    var cameraState = {
        view: identity(new Float32Array(16)),
        projection: identity(new Float32Array(16)),
        center: new Float32Array(props.center || 3),
        theta: props.theta || 0,
        phi: props.phi || 0,
        distance: Math.log(props.distance || 10),
        eye: new Float32Array(3),
        up: new Float32Array(props.up || [
            0,
            1,
            0
        ]),
        fovy: props.fovy || Math.PI / 4,
        near: typeof props.near !== 'undefined' ? props.near : 0.01,
        far: typeof props.far !== 'undefined' ? props.far : 1000,
        flipY: !!props.flipY,
        dtheta: 0,
        dphi: 0
    };
    var damping = typeof props.damping !== 'undefined' ? props.damping : 0.9;
    var right = new Float32Array([
        1,
        0,
        0
    ]);
    var front = new Float32Array([
        0,
        0,
        1
    ]);
    var minDistance = Math.log('minDistance' in props ? props.minDistance : 0.1);
    var maxDistance = Math.log('maxDistance' in props ? props.maxDistance : 1000);
    var ddistance = 0;
    var prevX = 0;
    var prevY = 0;
    if (isBrowser && props.mouse !== false) {
        mouseChange(function (buttons, x, y) {
            if (buttons & 1) {
                var dx = (x - prevX) / window.innerWidth;
                var dy = (y - prevY) / window.innerHeight;
                var w = Math.max(cameraState.distance, 0.5);
                cameraState.dtheta += w * dx;
                cameraState.dphi += w * dy;
            }
            prevX = x;
            prevY = y;
        });
        mouseWheel(function (dx, dy) {
            ddistance += dy / window.innerHeight;
        });
    }
    function damp(x) {
        var xd = x * damping;
        if (Math.abs(xd) < 0.1) {
            return 0;
        }
        return xd;
    }
    function clamp(x, lo, hi) {
        return Math.min(Math.max(x, lo), hi);
    }
    function updateCamera(props) {
        Object.keys(props).forEach(function (prop) {
            cameraState[prop] = props[prop];
        });
        var center = cameraState.center;
        var eye = cameraState.eye;
        var up = cameraState.up;
        var dtheta = cameraState.dtheta;
        var dphi = cameraState.dphi;
        cameraState.theta += dtheta;
        cameraState.phi = clamp(cameraState.phi + dphi, -Math.PI / 2, Math.PI / 2);
        cameraState.distance = clamp(cameraState.distance + ddistance, minDistance, maxDistance);
        cameraState.dtheta = damp(dtheta);
        cameraState.dphi = damp(dphi);
        ddistance = damp(ddistance);
        var theta = cameraState.theta;
        var phi = cameraState.phi;
        var r = Math.exp(cameraState.distance);
        var vf = r * Math.sin(theta) * Math.cos(phi);
        var vr = r * Math.cos(theta) * Math.cos(phi);
        var vu = r * Math.sin(phi);
        for (var i = 0; i < 3; ++i) {
            eye[i] = center[i] + vf * front[i] + vr * right[i] + vu * up[i];
        }
        lookAt(cameraState.view, eye, center, up);
    }
    var injectContext = regl({
        context: Object.assign({}, cameraState, {
            projection: function (context) {
                perspective(cameraState.projection, cameraState.fovy, context.viewportWidth / context.viewportHeight, cameraState.near, cameraState.far);
                if (cameraState.flipY) {
                    cameraState.projection[5] *= -1;
                }
                return cameraState.projection;
            }
        }),
        uniforms: Object.keys(cameraState).reduce(function (uniforms, name) {
            uniforms[name] = regl.context(name);
            return uniforms;
        }, {})
    });
    function setupCamera(props, block) {
        if (!block) {
            block = props;
            props = {};
        }
        updateCamera(props);
        injectContext(block);
    }
    Object.keys(cameraState).forEach(function (name) {
        setupCamera[name] = cameraState[name];
    });
    return setupCamera;
}
},{"gl-mat4/identity":6,"gl-mat4/lookAt":8,"gl-mat4/perspective":9,"mouse-change":38,"mouse-wheel":40}],43:[function(require,module,exports){
(function (da, ea) {
    'object' === typeof exports && 'undefined' !== typeof module ? module.exports = ea() : 'function' === typeof define && define.amd ? define(ea) : da.createREGL = ea();
}(this, function () {
    function da(a, b) {
        this.id = vb++;
        this.type = a;
        this.data = b;
    }
    function ea(a) {
        if (0 === a.length)
            return [];
        var b = a.charAt(0), c = a.charAt(a.length - 1);
        if (1 < a.length && b === c && ('"' === b || '\'' === b))
            return ['"' + a.substr(1, a.length - 2).replace(/\\/g, '\\\\').replace(/"/g, '\\"') + '"'];
        if (b = /\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))
            return ea(a.substr(0, b.index)).concat(ea(b[1])).concat(ea(a.substr(b.index + b[0].length)));
        b = a.split('.');
        if (1 === b.length)
            return ['"' + a.replace(/\\/g, '\\\\').replace(/"/g, '\\"') + '"'];
        a = [];
        for (c = 0; c < b.length; ++c)
            a = a.concat(ea(b[c]));
        return a;
    }
    function Wa(a) {
        return '[' + ea(a).join('][') + ']';
    }
    function wb() {
        var a = { '': 0 }, b = [''];
        return {
            id: function (c) {
                var d = a[c];
                if (d)
                    return d;
                d = a[c] = b.length;
                b.push(c);
                return d;
            },
            str: function (a) {
                return b[a];
            }
        };
    }
    function xb(a, b, c) {
        function d() {
            var b = window.innerWidth, d = window.innerHeight;
            a !== document.body && (d = a.getBoundingClientRect(), b = d.right - d.left, d = d.bottom - d.top);
            f.width = c * b;
            f.height = c * d;
            A(f.style, {
                width: b + 'px',
                height: d + 'px'
            });
        }
        var f = document.createElement('canvas');
        A(f.style, {
            border: 0,
            margin: 0,
            padding: 0,
            top: 0,
            left: 0
        });
        a.appendChild(f);
        a === document.body && (f.style.position = 'absolute', A(a.style, {
            margin: 0,
            padding: 0
        }));
        window.addEventListener('resize', d, !1);
        d();
        return {
            canvas: f,
            onDestroy: function () {
                window.removeEventListener('resize', d);
                a.removeChild(f);
            }
        };
    }
    function yb(a, b) {
        function c(c) {
            try {
                return a.getContext(c, b);
            } catch (f) {
                return null;
            }
        }
        return c('webgl') || c('experimental-webgl') || c('webgl-experimental');
    }
    function Xa(a) {
        return 'string' === typeof a ? a.split() : a;
    }
    function Ya(a) {
        return 'string' === typeof a ? document.querySelector(a) : a;
    }
    function zb(a) {
        var b = a || {}, c, d, f, k;
        a = {};
        var p = [], h = [], g = 'undefined' === typeof window ? 1 : window.devicePixelRatio, r = !1, v = function (a) {
            }, l = function () {
            };
        'string' === typeof b ? c = document.querySelector(b) : 'object' === typeof b && ('string' === typeof b.nodeName && 'function' === typeof b.appendChild && 'function' === typeof b.getBoundingClientRect ? c = b : 'function' === typeof b.drawArrays || 'function' === typeof b.drawElements ? (k = b, f = k.canvas) : ('gl' in b ? k = b.gl : 'canvas' in b ? f = Ya(b.canvas) : 'container' in b && (d = Ya(b.container)), 'attributes' in b && (a = b.attributes), 'extensions' in b && (p = Xa(b.extensions)), 'optionalExtensions' in b && (h = Xa(b.optionalExtensions)), 'onDone' in b && (v = b.onDone), 'profile' in b && (r = !!b.profile), 'pixelRatio' in b && (g = +b.pixelRatio)));
        c && ('canvas' === c.nodeName.toLowerCase() ? f = c : d = c);
        if (!k) {
            if (!f) {
                c = xb(d || document.body, v, g);
                if (!c)
                    return null;
                f = c.canvas;
                l = c.onDestroy;
            }
            k = yb(f, a);
        }
        return k ? {
            gl: k,
            canvas: f,
            container: d,
            extensions: p,
            optionalExtensions: h,
            pixelRatio: g,
            profile: r,
            onDone: v,
            onDestroy: l
        } : (l(), v('webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org'), null);
    }
    function Ab(a, b) {
        function c(b) {
            b = b.toLowerCase();
            var c;
            try {
                c = d[b] = a.getExtension(b);
            } catch (g) {
            }
            return !!c;
        }
        for (var d = {}, f = 0; f < b.extensions.length; ++f) {
            var k = b.extensions[f];
            if (!c(k))
                return b.onDestroy(), b.onDone('"' + k + '" extension is not supported by the current WebGL context, try upgrading your system or a different browser'), null;
        }
        b.optionalExtensions.forEach(c);
        return {
            extensions: d,
            restore: function () {
                Object.keys(d).forEach(function (a) {
                    if (!c(a))
                        throw Error('(regl): error restoring extension ' + a);
                });
            }
        };
    }
    function ja(a) {
        return !!a && 'object' === typeof a && Array.isArray(a.shape) && Array.isArray(a.stride) && 'number' === typeof a.offset && a.shape.length === a.stride.length && (Array.isArray(a.data) || O(a.data));
    }
    function J(a, b) {
        for (var c = Array(a), d = 0; d < a; ++d)
            c[d] = b(d);
        return c;
    }
    function Za(a) {
        var b, c;
        b = (65535 < a) << 4;
        a >>>= b;
        c = (255 < a) << 3;
        a >>>= c;
        b |= c;
        c = (15 < a) << 2;
        a >>>= c;
        b |= c;
        c = (3 < a) << 1;
        return b | c | a >>> c >> 1;
    }
    function fa(a) {
        a: {
            for (var b = 16; 268435456 >= b; b *= 16)
                if (a <= b) {
                    a = b;
                    break a;
                }
            a = 0;
        }
        b = $a[Za(a) >> 2];
        return 0 < b.length ? b.pop() : new ArrayBuffer(a);
    }
    function ab(a) {
        $a[Za(a.byteLength) >> 2].push(a);
    }
    function bb(a, b, c, d, f, k) {
        for (var p = 0; p < b; ++p)
            for (var h = a[p], g = 0; g < c; ++g)
                for (var r = h[g], v = 0; v < d; ++v)
                    f[k++] = r[v];
    }
    function cb(a, b, c, d, f) {
        for (var k = 1, p = c + 1; p < b.length; ++p)
            k *= b[p];
        var h = b[c];
        if (4 === b.length - c) {
            var g = b[c + 1], r = b[c + 2];
            b = b[c + 3];
            for (p = 0; p < h; ++p)
                bb(a[p], g, r, b, d, f), f += k;
        } else
            for (p = 0; p < h; ++p)
                cb(a[p], b, c + 1, d, f), f += k;
    }
    function Ha(a) {
        return Ea[Object.prototype.toString.call(a)] | 0;
    }
    function db(a, b) {
        for (var c = 0; c < b.length; ++c)
            a[c] = b[c];
    }
    function eb(a, b, c, d, f, k, p) {
        for (var h = 0, g = 0; g < c; ++g)
            for (var r = 0; r < d; ++r)
                a[h++] = b[f * g + k * r + p];
    }
    function Bb(a, b, c) {
        function d(b) {
            this.id = h++;
            this.buffer = a.createBuffer();
            this.type = b;
            this.usage = 35044;
            this.byteLength = 0;
            this.dimension = 1;
            this.dtype = 5121;
            this.persistentData = null;
            c.profile && (this.stats = { size: 0 });
        }
        function f(b, c, d) {
            b.byteLength = c.byteLength;
            a.bufferData(b.type, c, d);
        }
        function k(a, b, c, d, e, n) {
            a.usage = c;
            if (Array.isArray(b)) {
                if (a.dtype = d || 5126, 0 < b.length)
                    if (Array.isArray(b[0])) {
                        e = fb(b);
                        for (var D = d = 1; D < e.length; ++D)
                            d *= e[D];
                        a.dimension = d;
                        b = Pa(b, e, a.dtype);
                        f(a, b, c);
                        n ? a.persistentData = b : x.freeType(b);
                    } else
                        'number' === typeof b[0] ? (a.dimension = e, e = x.allocType(a.dtype, b.length), db(e, b), f(a, e, c), n ? a.persistentData = e : x.freeType(e)) : O(b[0]) && (a.dimension = b[0].length, a.dtype = d || Ha(b[0]) || 5126, b = Pa(b, [
                            b.length,
                            b[0].length
                        ], a.dtype), f(a, b, c), n ? a.persistentData = b : x.freeType(b));
            } else if (O(b))
                a.dtype = d || Ha(b), a.dimension = e, f(a, b, c), n && (a.persistentData = new Uint8Array(new Uint8Array(b.buffer)));
            else if (ja(b)) {
                e = b.shape;
                var g = b.stride, D = b.offset, t = 0, k = 0, p = 0, r = 0;
                1 === e.length ? (t = e[0], k = 1, p = g[0], r = 0) : 2 === e.length && (t = e[0], k = e[1], p = g[0], r = g[1]);
                a.dtype = d || Ha(b.data) || 5126;
                a.dimension = k;
                e = x.allocType(a.dtype, t * k);
                eb(e, b.data, t, k, p, r, D);
                f(a, e, c);
                n ? a.persistentData = e : x.freeType(e);
            }
        }
        function p(c) {
            b.bufferCount--;
            a.deleteBuffer(c.buffer);
            c.buffer = null;
            delete g[c.id];
        }
        var h = 0, g = {};
        d.prototype.bind = function () {
            a.bindBuffer(this.type, this.buffer);
        };
        d.prototype.destroy = function () {
            p(this);
        };
        var r = [];
        c.profile && (b.getTotalBufferSize = function () {
            var a = 0;
            Object.keys(g).forEach(function (b) {
                a += g[b].stats.size;
            });
            return a;
        });
        return {
            create: function (f, l, u, m) {
                function e(b) {
                    var d = 35044, g = null, l = 0, f = 0, u = 1;
                    Array.isArray(b) || O(b) || ja(b) ? g = b : 'number' === typeof b ? l = b | 0 : b && ('data' in b && (g = b.data), 'usage' in b && (d = hb[b.usage]), 'type' in b && (f = Qa[b.type]), 'dimension' in b && (u = b.dimension | 0), 'length' in b && (l = b.length | 0));
                    n.bind();
                    g ? k(n, g, d, f, u, m) : (a.bufferData(n.type, l, d), n.dtype = f || 5121, n.usage = d, n.dimension = u, n.byteLength = l);
                    c.profile && (n.stats.size = n.byteLength * ga[n.dtype]);
                    return e;
                }
                b.bufferCount++;
                var n = new d(l);
                g[n.id] = n;
                u || e(f);
                e._reglType = 'buffer';
                e._buffer = n;
                e.subdata = function (b, c) {
                    var d = (c || 0) | 0, g;
                    n.bind();
                    if (Array.isArray(b)) {
                        if (0 < b.length)
                            if ('number' === typeof b[0]) {
                                var l = x.allocType(n.dtype, b.length);
                                db(l, b);
                                a.bufferSubData(n.type, d, l);
                                x.freeType(l);
                            } else if (Array.isArray(b[0]) || O(b[0]))
                                g = fb(b), l = Pa(b, g, n.dtype), a.bufferSubData(n.type, d, l), x.freeType(l);
                    } else if (O(b))
                        a.bufferSubData(n.type, d, b);
                    else if (ja(b)) {
                        g = b.shape;
                        var f = b.stride, m = l = 0, u = 0, k = 0;
                        1 === g.length ? (l = g[0], m = 1, u = f[0], k = 0) : 2 === g.length && (l = g[0], m = g[1], u = f[0], k = f[1]);
                        g = Array.isArray(b.data) ? n.dtype : Ha(b.data);
                        g = x.allocType(g, l * m);
                        eb(g, b.data, l, m, u, k, b.offset);
                        a.bufferSubData(n.type, d, g);
                        x.freeType(g);
                    }
                    return e;
                };
                c.profile && (e.stats = n.stats);
                e.destroy = function () {
                    p(n);
                };
                return e;
            },
            createStream: function (a, b) {
                var c = r.pop();
                c || (c = new d(a));
                c.bind();
                k(c, b, 35040, 0, 1, !1);
                return c;
            },
            destroyStream: function (a) {
                r.push(a);
            },
            clear: function () {
                H(g).forEach(p);
                r.forEach(p);
            },
            getBuffer: function (a) {
                return a && a._buffer instanceof d ? a._buffer : null;
            },
            restore: function () {
                H(g).forEach(function (b) {
                    b.buffer = a.createBuffer();
                    a.bindBuffer(b.type, b.buffer);
                    a.bufferData(b.type, b.persistentData || b.byteLength, b.usage);
                });
            },
            _initBuffer: k
        };
    }
    function Cb(a, b, c, d) {
        function f(a) {
            this.id = g++;
            h[this.id] = this;
            this.buffer = a;
            this.primType = 4;
            this.type = this.vertCount = 0;
        }
        function k(d, g, f, e, n, k, w) {
            d.buffer.bind();
            if (g) {
                var t = w;
                w || O(g) && (!ja(g) || O(g.data)) || (t = b.oes_element_index_uint ? 5125 : 5123);
                c._initBuffer(d.buffer, g, f, t, 3);
            } else
                a.bufferData(34963, k, f), d.buffer.dtype = t || 5121, d.buffer.usage = f, d.buffer.dimension = 3, d.buffer.byteLength = k;
            t = w;
            if (!w) {
                switch (d.buffer.dtype) {
                case 5121:
                case 5120:
                    t = 5121;
                    break;
                case 5123:
                case 5122:
                    t = 5123;
                    break;
                case 5125:
                case 5124:
                    t = 5125;
                }
                d.buffer.dtype = t;
            }
            d.type = t;
            g = n;
            0 > g && (g = d.buffer.byteLength, 5123 === t ? g >>= 1 : 5125 === t && (g >>= 2));
            d.vertCount = g;
            g = e;
            0 > e && (g = 4, e = d.buffer.dimension, 1 === e && (g = 0), 2 === e && (g = 1), 3 === e && (g = 4));
            d.primType = g;
        }
        function p(a) {
            d.elementsCount--;
            delete h[a.id];
            a.buffer.destroy();
            a.buffer = null;
        }
        var h = {}, g = 0, r = {
                uint8: 5121,
                uint16: 5123
            };
        b.oes_element_index_uint && (r.uint32 = 5125);
        f.prototype.bind = function () {
            this.buffer.bind();
        };
        var v = [];
        return {
            create: function (a, b) {
                function g(a) {
                    if (a)
                        if ('number' === typeof a)
                            e(a), n.primType = 4, n.vertCount = a | 0, n.type = 5121;
                        else {
                            var b = null, c = 35044, d = -1, f = -1, l = 0, p = 0;
                            if (Array.isArray(a) || O(a) || ja(a))
                                b = a;
                            else if ('data' in a && (b = a.data), 'usage' in a && (c = hb[a.usage]), 'primitive' in a && (d = Ra[a.primitive]), 'count' in a && (f = a.count | 0), 'type' in a && (p = r[a.type]), 'length' in a)
                                l = a.length | 0;
                            else if (l = f, 5123 === p || 5122 === p)
                                l *= 2;
                            else if (5125 === p || 5124 === p)
                                l *= 4;
                            k(n, b, c, d, f, l, p);
                        }
                    else
                        e(), n.primType = 4, n.vertCount = 0, n.type = 5121;
                    return g;
                }
                var e = c.create(null, 34963, !0), n = new f(e._buffer);
                d.elementsCount++;
                g(a);
                g._reglType = 'elements';
                g._elements = n;
                g.subdata = function (a, b) {
                    e.subdata(a, b);
                    return g;
                };
                g.destroy = function () {
                    p(n);
                };
                return g;
            },
            createStream: function (a) {
                var b = v.pop();
                b || (b = new f(c.create(null, 34963, !0, !1)._buffer));
                k(b, a, 35040, -1, -1, 0, 0);
                return b;
            },
            destroyStream: function (a) {
                v.push(a);
            },
            getElements: function (a) {
                return 'function' === typeof a && a._elements instanceof f ? a._elements : null;
            },
            clear: function () {
                H(h).forEach(p);
            }
        };
    }
    function ib(a) {
        for (var b = x.allocType(5123, a.length), c = 0; c < a.length; ++c)
            if (isNaN(a[c]))
                b[c] = 65535;
            else if (Infinity === a[c])
                b[c] = 31744;
            else if (-Infinity === a[c])
                b[c] = 64512;
            else {
                jb[0] = a[c];
                var d = Db[0], f = d >>> 31 << 15, k = (d << 1 >>> 24) - 127, d = d >> 13 & 1023;
                b[c] = -24 > k ? f : -14 > k ? f + (d + 1024 >> -14 - k) : 15 < k ? f + 31744 : f + (k + 15 << 10) + d;
            }
        return b;
    }
    function na(a) {
        return Array.isArray(a) || O(a);
    }
    function kb(a) {
        return Array.isArray(a) && (0 === a.length || 'number' === typeof a[0]);
    }
    function lb(a) {
        return Array.isArray(a) && 0 !== a.length && na(a[0]) ? !0 : !1;
    }
    function oa(a) {
        return Object.prototype.toString.call(a);
    }
    function Sa(a) {
        if (!a)
            return !1;
        var b = oa(a);
        return 0 <= Eb.indexOf(b) ? !0 : kb(a) || lb(a) || ja(a);
    }
    function mb(a, b) {
        36193 === a.type ? (a.data = ib(b), x.freeType(b)) : a.data = b;
    }
    function Ia(a, b, c, d, f, k) {
        a = 'undefined' !== typeof C[a] ? C[a] : R[a] * za[b];
        k && (a *= 6);
        if (f) {
            for (d = 0; 1 <= c;)
                d += a * c * c, c /= 2;
            return d;
        }
        return a * c * d;
    }
    function Fb(a, b, c, d, f, k, p) {
        function h() {
            this.format = this.internalformat = 6408;
            this.type = 5121;
            this.flipY = this.premultiplyAlpha = this.compressed = !1;
            this.unpackAlignment = 1;
            this.channels = this.height = this.width = this.colorSpace = 0;
        }
        function g(a, b) {
            a.internalformat = b.internalformat;
            a.format = b.format;
            a.type = b.type;
            a.compressed = b.compressed;
            a.premultiplyAlpha = b.premultiplyAlpha;
            a.flipY = b.flipY;
            a.unpackAlignment = b.unpackAlignment;
            a.colorSpace = b.colorSpace;
            a.width = b.width;
            a.height = b.height;
            a.channels = b.channels;
        }
        function r(a, b) {
            if ('object' === typeof b && b) {
                'premultiplyAlpha' in b && (a.premultiplyAlpha = b.premultiplyAlpha);
                'flipY' in b && (a.flipY = b.flipY);
                'alignment' in b && (a.unpackAlignment = b.alignment);
                'colorSpace' in b && (a.colorSpace = ua[b.colorSpace]);
                'type' in b && (a.type = E[b.type]);
                var c = a.width, g = a.height, e = a.channels, d = !1;
                'shape' in b ? (c = b.shape[0], g = b.shape[1], 3 === b.shape.length && (e = b.shape[2], d = !0)) : ('radius' in b && (c = g = b.radius), 'width' in b && (c = b.width), 'height' in b && (g = b.height), 'channels' in b && (e = b.channels, d = !0));
                a.width = c | 0;
                a.height = g | 0;
                a.channels = e | 0;
                c = !1;
                'format' in b && (c = b.format, g = a.internalformat = S[c], a.format = Gb[g], c in E && !('type' in b) && (a.type = E[c]), c in U && (a.compressed = !0), c = !0);
                !d && c ? a.channels = R[a.format] : d && !c && a.channels !== Ka[a.format] && (a.format = a.internalformat = Ka[a.channels]);
            }
        }
        function v(b) {
            a.pixelStorei(37440, b.flipY);
            a.pixelStorei(37441, b.premultiplyAlpha);
            a.pixelStorei(37443, b.colorSpace);
            a.pixelStorei(3317, b.unpackAlignment);
        }
        function l() {
            h.call(this);
            this.yOffset = this.xOffset = 0;
            this.data = null;
            this.needsFree = !1;
            this.element = null;
            this.needsCopy = !1;
        }
        function u(a, b) {
            var c = null;
            Sa(b) ? c = b : b && (r(a, b), 'x' in b && (a.xOffset = b.x | 0), 'y' in b && (a.yOffset = b.y | 0), Sa(b.data) && (c = b.data));
            if (b.copy) {
                var g = f.viewportWidth, e = f.viewportHeight;
                a.width = a.width || g - a.xOffset;
                a.height = a.height || e - a.yOffset;
                a.needsCopy = !0;
            } else if (!c)
                a.width = a.width || 1, a.height = a.height || 1, a.channels = a.channels || 4;
            else if (O(c))
                a.channels = a.channels || 4, a.data = c, 'type' in b || 5121 !== a.type || (a.type = Ea[Object.prototype.toString.call(c)] | 0);
            else if (kb(c)) {
                a.channels = a.channels || 4;
                g = c;
                e = g.length;
                switch (a.type) {
                case 5121:
                case 5123:
                case 5125:
                case 5126:
                    e = x.allocType(a.type, e);
                    e.set(g);
                    a.data = e;
                    break;
                case 36193:
                    a.data = ib(g);
                }
                a.alignment = 1;
                a.needsFree = !0;
            } else if (ja(c)) {
                g = c.data;
                Array.isArray(g) || 5121 !== a.type || (a.type = Ea[Object.prototype.toString.call(g)] | 0);
                var e = c.shape, d = c.stride, n, l, q, y;
                3 === e.length ? (q = e[2], y = d[2]) : y = q = 1;
                n = e[0];
                l = e[1];
                e = d[0];
                d = d[1];
                a.alignment = 1;
                a.width = n;
                a.height = l;
                a.channels = q;
                a.format = a.internalformat = Ka[q];
                a.needsFree = !0;
                n = y;
                c = c.offset;
                q = a.width;
                y = a.height;
                l = a.channels;
                for (var K = x.allocType(36193 === a.type ? 5126 : a.type, q * y * l), aa = 0, va = 0; va < y; ++va)
                    for (var wa = 0; wa < q; ++wa)
                        for (var ca = 0; ca < l; ++ca)
                            K[aa++] = g[e * wa + d * va + n * ca + c];
                mb(a, K);
            } else if ('[object HTMLCanvasElement]' === oa(c) || '[object CanvasRenderingContext2D]' === oa(c))
                '[object HTMLCanvasElement]' === oa(c) ? a.element = c : a.element = c.canvas, a.width = a.element.width, a.height = a.element.height, a.channels = 4;
            else if ('[object HTMLImageElement]' === oa(c))
                a.element = c, a.width = c.naturalWidth, a.height = c.naturalHeight, a.channels = 4;
            else if ('[object HTMLVideoElement]' === oa(c))
                a.element = c, a.width = c.videoWidth, a.height = c.videoHeight, a.channels = 4;
            else if (lb(c)) {
                g = a.width || c[0].length;
                e = a.height || c.length;
                d = a.channels;
                d = na(c[0][0]) ? d || c[0][0].length : d || 1;
                n = La.shape(c);
                q = 1;
                for (y = 0; y < n.length; ++y)
                    q *= n[y];
                q = x.allocType(36193 === a.type ? 5126 : a.type, q);
                La.flatten(c, n, '', q);
                mb(a, q);
                a.alignment = 1;
                a.width = g;
                a.height = e;
                a.channels = d;
                a.format = a.internalformat = Ka[d];
                a.needsFree = !0;
            }
        }
        function m(b, c, g, e, f) {
            var n = b.element, l = b.data, k = b.internalformat, q = b.format, y = b.type, K = b.width, aa = b.height;
            v(b);
            n ? a.texSubImage2D(c, f, g, e, q, y, n) : b.compressed ? a.compressedTexSubImage2D(c, f, g, e, k, K, aa, l) : b.needsCopy ? (d(), a.copyTexSubImage2D(c, f, g, e, b.xOffset, b.yOffset, K, aa)) : a.texSubImage2D(c, f, g, e, K, aa, q, y, l);
        }
        function e() {
            return N.pop() || new l();
        }
        function n(a) {
            a.needsFree && x.freeType(a.data);
            l.call(a);
            N.push(a);
        }
        function D() {
            h.call(this);
            this.genMipmaps = !1;
            this.mipmapHint = 4352;
            this.mipmask = 0;
            this.images = Array(16);
        }
        function w(a, b, c) {
            var g = a.images[0] = e();
            a.mipmask = 1;
            g.width = a.width = b;
            g.height = a.height = c;
            g.channels = a.channels = 4;
        }
        function t(a, b) {
            var c = null;
            if (Sa(b))
                c = a.images[0] = e(), g(c, a), u(c, b), a.mipmask = 1;
            else if (r(a, b), Array.isArray(b.mipmap))
                for (var d = b.mipmap, f = 0; f < d.length; ++f)
                    c = a.images[f] = e(), g(c, a), c.width >>= f, c.height >>= f, u(c, d[f]), a.mipmask |= 1 << f;
            else
                c = a.images[0] = e(), g(c, a), u(c, b), a.mipmask = 1;
            g(a, a.images[0]);
        }
        function Z(b, c) {
            for (var g = b.images, e = 0; e < g.length && g[e]; ++e) {
                var f = g[e], n = c, l = e, k = f.element, q = f.data, y = f.internalformat, K = f.format, aa = f.type, va = f.width, wa = f.height;
                v(f);
                k ? a.texImage2D(n, l, K, K, aa, k) : f.compressed ? a.compressedTexImage2D(n, l, y, va, wa, 0, q) : f.needsCopy ? (d(), a.copyTexImage2D(n, l, K, f.xOffset, f.yOffset, va, wa, 0)) : a.texImage2D(n, l, K, va, wa, 0, K, aa, q);
            }
        }
        function B() {
            var a = nb.pop() || new D();
            h.call(a);
            for (var b = a.mipmask = 0; 16 > b; ++b)
                a.images[b] = null;
            return a;
        }
        function gb(a) {
            for (var b = a.images, c = 0; c < b.length; ++c)
                b[c] && n(b[c]), b[c] = null;
            nb.push(a);
        }
        function C() {
            this.magFilter = this.minFilter = 9728;
            this.wrapT = this.wrapS = 33071;
            this.anisotropic = 1;
            this.genMipmaps = !1;
            this.mipmapHint = 4352;
        }
        function M(a, b) {
            'min' in b && (a.minFilter = Ta[b.min], 0 <= Hb.indexOf(a.minFilter) && (a.genMipmaps = !0));
            'mag' in b && (a.magFilter = T[b.mag]);
            var c = a.wrapS, g = a.wrapT;
            if ('wrap' in b) {
                var e = b.wrap;
                'string' === typeof e ? c = g = I[e] : Array.isArray(e) && (c = I[e[0]], g = I[e[1]]);
            } else
                'wrapS' in b && (c = I[b.wrapS]), 'wrapT' in b && (g = I[b.wrapT]);
            a.wrapS = c;
            a.wrapT = g;
            'anisotropic' in b && (a.anisotropic = b.anisotropic);
            if ('mipmap' in b) {
                c = !1;
                switch (typeof b.mipmap) {
                case 'string':
                    a.mipmapHint = sa[b.mipmap];
                    c = a.genMipmaps = !0;
                    break;
                case 'boolean':
                    c = a.genMipmaps = b.mipmap;
                    break;
                case 'object':
                    a.genMipmaps = !1, c = !0;
                }
                !c || 'min' in b || (a.minFilter = 9984);
            }
        }
        function P(c, g) {
            a.texParameteri(g, 10241, c.minFilter);
            a.texParameteri(g, 10240, c.magFilter);
            a.texParameteri(g, 10242, c.wrapS);
            a.texParameteri(g, 10243, c.wrapT);
            b.ext_texture_filter_anisotropic && a.texParameteri(g, 34046, c.anisotropic);
            c.genMipmaps && (a.hint(33170, c.mipmapHint), a.generateMipmap(g));
        }
        function G(b) {
            h.call(this);
            this.mipmask = 0;
            this.internalformat = 6408;
            this.id = xa++;
            this.refCount = 1;
            this.target = b;
            this.texture = a.createTexture();
            this.unit = -1;
            this.bindCount = 0;
            this.texInfo = new C();
            p.profile && (this.stats = { size: 0 });
        }
        function Q(b) {
            a.activeTexture(33984);
            a.bindTexture(b.target, b.texture);
        }
        function Aa() {
            var b = ka[0];
            b ? a.bindTexture(b.target, b.texture) : a.bindTexture(3553, null);
        }
        function z(b) {
            var c = b.texture, g = b.unit, e = b.target;
            0 <= g && (a.activeTexture(33984 + g), a.bindTexture(e, null), ka[g] = null);
            a.deleteTexture(c);
            b.texture = null;
            b.params = null;
            b.pixels = null;
            b.refCount = 0;
            delete V[b.id];
            k.textureCount--;
        }
        var sa = {
                'don\'t care': 4352,
                'dont care': 4352,
                nice: 4354,
                fast: 4353
            }, I = {
                repeat: 10497,
                clamp: 33071,
                mirror: 33648
            }, T = {
                nearest: 9728,
                linear: 9729
            }, Ta = A({
                mipmap: 9987,
                'nearest mipmap nearest': 9984,
                'linear mipmap nearest': 9985,
                'nearest mipmap linear': 9986,
                'linear mipmap linear': 9987
            }, T), ua = {
                none: 0,
                browser: 37444
            }, E = {
                uint8: 5121,
                rgba4: 32819,
                rgb565: 33635,
                'rgb5 a1': 32820
            }, S = {
                alpha: 6406,
                luminance: 6409,
                'luminance alpha': 6410,
                rgb: 6407,
                rgba: 6408,
                rgba4: 32854,
                'rgb5 a1': 32855,
                rgb565: 36194
            }, U = {};
        b.ext_srgb && (S.srgb = 35904, S.srgba = 35906);
        b.oes_texture_float && (E.float32 = E['float'] = 5126);
        b.oes_texture_half_float && (E.float16 = E['half float'] = 36193);
        b.webgl_depth_texture && (A(S, {
            depth: 6402,
            'depth stencil': 34041
        }), A(E, {
            uint16: 5123,
            uint32: 5125,
            'depth stencil': 34042
        }));
        b.webgl_compressed_texture_s3tc && A(U, {
            'rgb s3tc dxt1': 33776,
            'rgba s3tc dxt1': 33777,
            'rgba s3tc dxt3': 33778,
            'rgba s3tc dxt5': 33779
        });
        b.webgl_compressed_texture_atc && A(U, {
            'rgb atc': 35986,
            'rgba atc explicit alpha': 35987,
            'rgba atc interpolated alpha': 34798
        });
        b.webgl_compressed_texture_pvrtc && A(U, {
            'rgb pvrtc 4bppv1': 35840,
            'rgb pvrtc 2bppv1': 35841,
            'rgba pvrtc 4bppv1': 35842,
            'rgba pvrtc 2bppv1': 35843
        });
        b.webgl_compressed_texture_etc1 && (U['rgb etc1'] = 36196);
        var Ib = Array.prototype.slice.call(a.getParameter(34467));
        Object.keys(U).forEach(function (a) {
            var b = U[a];
            0 <= Ib.indexOf(b) && (S[a] = b);
        });
        var ba = Object.keys(S);
        c.textureFormats = ba;
        var J = [];
        Object.keys(S).forEach(function (a) {
            J[S[a]] = a;
        });
        var W = [];
        Object.keys(E).forEach(function (a) {
            W[E[a]] = a;
        });
        var la = [];
        Object.keys(T).forEach(function (a) {
            la[T[a]] = a;
        });
        var ya = [];
        Object.keys(Ta).forEach(function (a) {
            ya[Ta[a]] = a;
        });
        var ha = [];
        Object.keys(I).forEach(function (a) {
            ha[I[a]] = a;
        });
        var Gb = ba.reduce(function (a, b) {
                var c = S[b];
                6409 === c || 6406 === c || 6409 === c || 6410 === c || 6402 === c || 34041 === c ? a[c] = c : 32855 === c || 0 <= b.indexOf('rgba') ? a[c] = 6408 : a[c] = 6407;
                return a;
            }, {}), N = [], nb = [], xa = 0, V = {}, ma = c.maxTextureUnits, ka = Array(ma).map(function () {
                return null;
            });
        A(G.prototype, {
            bind: function () {
                this.bindCount += 1;
                var b = this.unit;
                if (0 > b) {
                    for (var c = 0; c < ma; ++c) {
                        var g = ka[c];
                        if (g) {
                            if (0 < g.bindCount)
                                continue;
                            g.unit = -1;
                        }
                        ka[c] = this;
                        b = c;
                        break;
                    }
                    p.profile && k.maxTextureUnits < b + 1 && (k.maxTextureUnits = b + 1);
                    this.unit = b;
                    a.activeTexture(33984 + b);
                    a.bindTexture(this.target, this.texture);
                }
                return b;
            },
            unbind: function () {
                --this.bindCount;
            },
            decRef: function () {
                0 >= --this.refCount && z(this);
            }
        });
        p.profile && (k.getTotalTextureSize = function () {
            var a = 0;
            Object.keys(V).forEach(function (b) {
                a += V[b].stats.size;
            });
            return a;
        });
        return {
            create2D: function (b, c) {
                function d(a, b) {
                    var c = f.texInfo;
                    C.call(c);
                    var e = B();
                    'number' === typeof a ? 'number' === typeof b ? w(e, a | 0, b | 0) : w(e, a | 0, a | 0) : a ? (M(c, a), t(e, a)) : w(e, 1, 1);
                    c.genMipmaps && (e.mipmask = (e.width << 1) - 1);
                    f.mipmask = e.mipmask;
                    g(f, e);
                    f.internalformat = e.internalformat;
                    d.width = e.width;
                    d.height = e.height;
                    Q(f);
                    Z(e, 3553);
                    P(c, 3553);
                    Aa();
                    gb(e);
                    p.profile && (f.stats.size = Ia(f.internalformat, f.type, e.width, e.height, c.genMipmaps, !1));
                    d.format = J[f.internalformat];
                    d.type = W[f.type];
                    d.mag = la[c.magFilter];
                    d.min = ya[c.minFilter];
                    d.wrapS = ha[c.wrapS];
                    d.wrapT = ha[c.wrapT];
                    return d;
                }
                var f = new G(3553);
                V[f.id] = f;
                k.textureCount++;
                d(b, c);
                d.subimage = function (a, b, c, l) {
                    b |= 0;
                    c |= 0;
                    l |= 0;
                    var q = e();
                    g(q, f);
                    q.width = 0;
                    q.height = 0;
                    u(q, a);
                    q.width = q.width || (f.width >> l) - b;
                    q.height = q.height || (f.height >> l) - c;
                    Q(f);
                    m(q, 3553, b, c, l);
                    Aa();
                    n(q);
                    return d;
                };
                d.resize = function (b, c) {
                    var e = b | 0, g = c | 0 || e;
                    if (e === f.width && g === f.height)
                        return d;
                    d.width = f.width = e;
                    d.height = f.height = g;
                    Q(f);
                    for (var q = 0; f.mipmask >> q; ++q)
                        a.texImage2D(3553, q, f.format, e >> q, g >> q, 0, f.format, f.type, null);
                    Aa();
                    p.profile && (f.stats.size = Ia(f.internalformat, f.type, e, g, !1, !1));
                    return d;
                };
                d._reglType = 'texture2d';
                d._texture = f;
                p.profile && (d.stats = f.stats);
                d.destroy = function () {
                    f.decRef();
                };
                return d;
            },
            createCube: function (b, c, d, f, l, sa) {
                function z(a, b, c, e, d, f) {
                    var F, X = h.texInfo;
                    C.call(X);
                    for (F = 0; 6 > F; ++F)
                        q[F] = B();
                    if ('number' === typeof a || !a)
                        for (a = a | 0 || 1, F = 0; 6 > F; ++F)
                            w(q[F], a, a);
                    else if ('object' === typeof a)
                        if (b)
                            t(q[0], a), t(q[1], b), t(q[2], c), t(q[3], e), t(q[4], d), t(q[5], f);
                        else if (M(X, a), r(h, a), 'faces' in a)
                            for (a = a.faces, F = 0; 6 > F; ++F)
                                g(q[F], h), t(q[F], a[F]);
                        else
                            for (F = 0; 6 > F; ++F)
                                t(q[F], a);
                    g(h, q[0]);
                    h.mipmask = X.genMipmaps ? (q[0].width << 1) - 1 : q[0].mipmask;
                    h.internalformat = q[0].internalformat;
                    z.width = q[0].width;
                    z.height = q[0].height;
                    Q(h);
                    for (F = 0; 6 > F; ++F)
                        Z(q[F], 34069 + F);
                    P(X, 34067);
                    Aa();
                    p.profile && (h.stats.size = Ia(h.internalformat, h.type, z.width, z.height, X.genMipmaps, !0));
                    z.format = J[h.internalformat];
                    z.type = W[h.type];
                    z.mag = la[X.magFilter];
                    z.min = ya[X.minFilter];
                    z.wrapS = ha[X.wrapS];
                    z.wrapT = ha[X.wrapT];
                    for (F = 0; 6 > F; ++F)
                        gb(q[F]);
                    return z;
                }
                var h = new G(34067);
                V[h.id] = h;
                k.cubeCount++;
                var q = Array(6);
                z(b, c, d, f, l, sa);
                z.subimage = function (a, b, c, q, d) {
                    c |= 0;
                    q |= 0;
                    d |= 0;
                    var f = e();
                    g(f, h);
                    f.width = 0;
                    f.height = 0;
                    u(f, b);
                    f.width = f.width || (h.width >> d) - c;
                    f.height = f.height || (h.height >> d) - q;
                    Q(h);
                    m(f, 34069 + a, c, q, d);
                    Aa();
                    n(f);
                    return z;
                };
                z.resize = function (b) {
                    b |= 0;
                    if (b !== h.width) {
                        z.width = h.width = b;
                        z.height = h.height = b;
                        Q(h);
                        for (var c = 0; 6 > c; ++c)
                            for (var q = 0; h.mipmask >> q; ++q)
                                a.texImage2D(34069 + c, q, h.format, b >> q, b >> q, 0, h.format, h.type, null);
                        Aa();
                        p.profile && (h.stats.size = Ia(h.internalformat, h.type, z.width, z.height, !1, !0));
                        return z;
                    }
                };
                z._reglType = 'textureCube';
                z._texture = h;
                p.profile && (z.stats = h.stats);
                z.destroy = function () {
                    h.decRef();
                };
                return z;
            },
            clear: function () {
                for (var b = 0; b < ma; ++b)
                    a.activeTexture(33984 + b), a.bindTexture(3553, null), ka[b] = null;
                H(V).forEach(z);
                k.cubeCount = 0;
                k.textureCount = 0;
            },
            getTexture: function (a) {
                return null;
            },
            restore: function () {
                H(V).forEach(function (b) {
                    b.texture = a.createTexture();
                    a.bindTexture(b.target, b.texture);
                    for (var c = 0; 32 > c; ++c)
                        if (0 !== (b.mipmask & 1 << c))
                            if (3553 === b.target)
                                a.texImage2D(3553, c, b.internalformat, b.width >> c, b.height >> c, 0, b.internalformat, b.type, null);
                            else
                                for (var e = 0; 6 > e; ++e)
                                    a.texImage2D(34069 + e, c, b.internalformat, b.width >> c, b.height >> c, 0, b.internalformat, b.type, null);
                    P(b.texInfo, b.target);
                });
            }
        };
    }
    function Jb(a, b, c, d, f, k) {
        function p(a, b, c) {
            this.target = a;
            this.texture = b;
            this.renderbuffer = c;
            var e = a = 0;
            b ? (a = b.width, e = b.height) : c && (a = c.width, e = c.height);
            this.width = a;
            this.height = e;
        }
        function h(a) {
            a && (a.texture && a.texture._texture.decRef(), a.renderbuffer && a.renderbuffer._renderbuffer.decRef());
        }
        function g(a, b, c) {
            a && (a.texture ? a.texture._texture.refCount += 1 : a.renderbuffer._renderbuffer.refCount += 1);
        }
        function r(b, c) {
            c && (c.texture ? a.framebufferTexture2D(36160, b, c.target, c.texture._texture.texture, 0) : a.framebufferRenderbuffer(36160, b, 36161, c.renderbuffer._renderbuffer.renderbuffer));
        }
        function v(a) {
            var b = 3553, c = null, e = null, g = a;
            'object' === typeof a && (g = a.data, 'target' in a && (b = a.target | 0));
            a = g._reglType;
            'texture2d' === a ? c = g : 'textureCube' === a ? c = g : 'renderbuffer' === a && (e = g, b = 36161);
            return new p(b, c, e);
        }
        function l(a, b, c, e, g) {
            if (c)
                return a = d.create2D({
                    width: a,
                    height: b,
                    format: e,
                    type: g
                }), a._texture.refCount = 0, new p(3553, a, null);
            a = f.create({
                width: a,
                height: b,
                format: e
            });
            a._renderbuffer.refCount = 0;
            return new p(36161, null, a);
        }
        function u(a) {
            return a && (a.texture || a.renderbuffer);
        }
        function m(a, b, c) {
            a && (a.texture ? a.texture.resize(b, c) : a.renderbuffer && a.renderbuffer.resize(b, c));
        }
        function e() {
            this.id = M++;
            P[this.id] = this;
            this.framebuffer = a.createFramebuffer();
            this.height = this.width = 0;
            this.colorAttachments = [];
            this.depthStencilAttachment = this.stencilAttachment = this.depthAttachment = null;
        }
        function n(a) {
            a.colorAttachments.forEach(h);
            h(a.depthAttachment);
            h(a.stencilAttachment);
            h(a.depthStencilAttachment);
        }
        function D(b) {
            a.deleteFramebuffer(b.framebuffer);
            b.framebuffer = null;
            k.framebufferCount--;
            delete P[b.id];
        }
        function w(b) {
            var e;
            a.bindFramebuffer(36160, b.framebuffer);
            var g = b.colorAttachments;
            for (e = 0; e < g.length; ++e)
                r(36064 + e, g[e]);
            for (e = g.length; e < c.maxColorAttachments; ++e)
                a.framebufferTexture2D(36160, 36064 + e, 3553, null, 0);
            a.framebufferTexture2D(36160, 33306, 3553, null, 0);
            a.framebufferTexture2D(36160, 36096, 3553, null, 0);
            a.framebufferTexture2D(36160, 36128, 3553, null, 0);
            r(36096, b.depthAttachment);
            r(36128, b.stencilAttachment);
            r(33306, b.depthStencilAttachment);
            a.checkFramebufferStatus(36160);
            a.bindFramebuffer(36160, Z.next);
            Z.cur = Z.next;
            a.getError();
        }
        function t(a, b) {
            function c(a, b) {
                var e, f = 0, h = 0, k = !0, m = !0;
                e = null;
                var p = !0, t = 'rgba', r = 'uint8', D = 1, W = null, la = null, Z = null, ha = !1;
                if ('number' === typeof a)
                    f = a | 0, h = b | 0 || f;
                else if (a) {
                    'shape' in a ? (h = a.shape, f = h[0], h = h[1]) : ('radius' in a && (f = h = a.radius), 'width' in a && (f = a.width), 'height' in a && (h = a.height));
                    if ('color' in a || 'colors' in a)
                        e = a.color || a.colors, Array.isArray(e);
                    if (!e) {
                        'colorCount' in a && (D = a.colorCount | 0);
                        'colorTexture' in a && (p = !!a.colorTexture, t = 'rgba4');
                        if ('colorType' in a && (r = a.colorType, !p))
                            if ('half float' === r || 'float16' === r)
                                t = 'rgba16f';
                            else if ('float' === r || 'float32' === r)
                                t = 'rgba32f';
                        'colorFormat' in a && (t = a.colorFormat, 0 <= B.indexOf(t) ? p = !0 : 0 <= C.indexOf(t) && (p = !1));
                    }
                    if ('depthTexture' in a || 'depthStencilTexture' in a)
                        ha = !(!a.depthTexture && !a.depthStencilTexture);
                    'depth' in a && ('boolean' === typeof a.depth ? k = a.depth : (W = a.depth, m = !1));
                    'stencil' in a && ('boolean' === typeof a.stencil ? m = a.stencil : (la = a.stencil, k = !1));
                    'depthStencil' in a && ('boolean' === typeof a.depthStencil ? k = m = a.depthStencil : (Z = a.depthStencil, m = k = !1));
                } else
                    f = h = 1;
                var G = null, A = null, Q = null, x = null;
                if (Array.isArray(e))
                    G = e.map(v);
                else if (e)
                    G = [v(e)];
                else
                    for (G = Array(D), e = 0; e < D; ++e)
                        G[e] = l(f, h, p, t, r);
                f = f || G[0].width;
                h = h || G[0].height;
                W ? A = v(W) : k && !m && (A = l(f, h, ha, 'depth', 'uint32'));
                la ? Q = v(la) : m && !k && (Q = l(f, h, !1, 'stencil', 'uint8'));
                Z ? x = v(Z) : !W && !la && m && k && (x = l(f, h, ha, 'depth stencil', 'depth stencil'));
                k = null;
                for (e = 0; e < G.length; ++e)
                    g(G[e], f, h), G[e] && G[e].texture && (m = ob[G[e].texture._texture.format] * Ma[G[e].texture._texture.type], null === k && (k = m));
                g(A, f, h);
                g(Q, f, h);
                g(x, f, h);
                n(d);
                d.width = f;
                d.height = h;
                d.colorAttachments = G;
                d.depthAttachment = A;
                d.stencilAttachment = Q;
                d.depthStencilAttachment = x;
                c.color = G.map(u);
                c.depth = u(A);
                c.stencil = u(Q);
                c.depthStencil = u(x);
                c.width = d.width;
                c.height = d.height;
                w(d);
                return c;
            }
            var d = new e();
            k.framebufferCount++;
            c(a, b);
            return A(c, {
                resize: function (a, b) {
                    var e = a | 0, g = b | 0 || e;
                    if (e === d.width && g === d.height)
                        return c;
                    for (var f = d.colorAttachments, h = 0; h < f.length; ++h)
                        m(f[h], e, g);
                    m(d.depthAttachment, e, g);
                    m(d.stencilAttachment, e, g);
                    m(d.depthStencilAttachment, e, g);
                    d.width = c.width = e;
                    d.height = c.height = g;
                    w(d);
                    return c;
                },
                _reglType: 'framebuffer',
                _framebuffer: d,
                destroy: function () {
                    D(d);
                    n(d);
                },
                use: function (a) {
                    Z.setFBO({ framebuffer: c }, a);
                }
            });
        }
        var Z = {
                cur: null,
                next: null,
                dirty: !1,
                setFBO: null
            }, B = ['rgba'], C = [
                'rgba4',
                'rgb565',
                'rgb5 a1'
            ];
        b.ext_srgb && C.push('srgba');
        b.ext_color_buffer_half_float && C.push('rgba16f', 'rgb16f');
        b.webgl_color_buffer_float && C.push('rgba32f');
        var x = ['uint8'];
        b.oes_texture_half_float && x.push('half float', 'float16');
        b.oes_texture_float && x.push('float', 'float32');
        var M = 0, P = {};
        return A(Z, {
            getFramebuffer: function (a) {
                return 'function' === typeof a && 'framebuffer' === a._reglType && (a = a._framebuffer, a instanceof e) ? a : null;
            },
            create: t,
            createCube: function (a) {
                function b(a) {
                    var e, g = { color: null }, f = 0, h = null;
                    e = 'rgba';
                    var l = 'uint8', n = 1;
                    if ('number' === typeof a)
                        f = a | 0;
                    else if (a) {
                        'shape' in a ? f = a.shape[0] : ('radius' in a && (f = a.radius | 0), 'width' in a ? f = a.width | 0 : 'height' in a && (f = a.height | 0));
                        if ('color' in a || 'colors' in a)
                            h = a.color || a.colors, Array.isArray(h);
                        h || ('colorCount' in a && (n = a.colorCount | 0), 'colorType' in a && (l = a.colorType), 'colorFormat' in a && (e = a.colorFormat));
                        'depth' in a && (g.depth = a.depth);
                        'stencil' in a && (g.stencil = a.stencil);
                        'depthStencil' in a && (g.depthStencil = a.depthStencil);
                    } else
                        f = 1;
                    if (h)
                        if (Array.isArray(h))
                            for (a = [], e = 0; e < h.length; ++e)
                                a[e] = h[e];
                        else
                            a = [h];
                    else
                        for (a = Array(n), h = {
                                radius: f,
                                format: e,
                                type: l
                            }, e = 0; e < n; ++e)
                            a[e] = d.createCube(h);
                    g.color = Array(a.length);
                    for (e = 0; e < a.length; ++e)
                        n = a[e], f = f || n.width, g.color[e] = {
                            target: 34069,
                            data: a[e]
                        };
                    for (e = 0; 6 > e; ++e) {
                        for (n = 0; n < a.length; ++n)
                            g.color[n].target = 34069 + e;
                        0 < e && (g.depth = c[0].depth, g.stencil = c[0].stencil, g.depthStencil = c[0].depthStencil);
                        if (c[e])
                            c[e](g);
                        else
                            c[e] = t(g);
                    }
                    return A(b, {
                        width: f,
                        height: f,
                        color: a
                    });
                }
                var c = Array(6);
                b(a);
                return A(b, {
                    faces: c,
                    resize: function (a) {
                        var e = a | 0;
                        if (e === b.width)
                            return b;
                        var g = b.color;
                        for (a = 0; a < g.length; ++a)
                            g[a].resize(e);
                        for (a = 0; 6 > a; ++a)
                            c[a].resize(e);
                        b.width = b.height = e;
                        return b;
                    },
                    _reglType: 'framebufferCube',
                    destroy: function () {
                        c.forEach(function (a) {
                            a.destroy();
                        });
                    }
                });
            },
            clear: function () {
                H(P).forEach(D);
            },
            restore: function () {
                H(P).forEach(function (b) {
                    b.framebuffer = a.createFramebuffer();
                    w(b);
                });
            }
        });
    }
    function pb() {
        this.w = this.z = this.y = this.x = this.state = 0;
        this.buffer = null;
        this.size = 0;
        this.normalized = !1;
        this.type = 5126;
        this.divisor = this.stride = this.offset = 0;
    }
    function Kb(a, b, c, d, f) {
        a = c.maxAttributes;
        b = Array(a);
        for (c = 0; c < a; ++c)
            b[c] = new pb();
        return {
            Record: pb,
            scope: {},
            state: b
        };
    }
    function Lb(a, b, c, d) {
        function f(a, b, c, g) {
            this.name = a;
            this.id = b;
            this.location = c;
            this.info = g;
        }
        function k(a, b) {
            for (var c = 0; c < a.length; ++c)
                if (a[c].id === b.id) {
                    a[c].location = b.location;
                    return;
                }
            a.push(b);
        }
        function p(c, g, d) {
            d = 35632 === c ? r : v;
            var f = d[g];
            if (!f) {
                var h = b.str(g), f = a.createShader(c);
                a.shaderSource(f, h);
                a.compileShader(f);
                d[g] = f;
            }
            return f;
        }
        function h(a, b) {
            this.id = m++;
            this.fragId = a;
            this.vertId = b;
            this.program = null;
            this.uniforms = [];
            this.attributes = [];
            d.profile && (this.stats = {
                uniformsCount: 0,
                attributesCount: 0
            });
        }
        function g(c, g) {
            var h, l;
            h = p(35632, c.fragId);
            l = p(35633, c.vertId);
            var m = c.program = a.createProgram();
            a.attachShader(m, h);
            a.attachShader(m, l);
            a.linkProgram(m);
            var r = a.getProgramParameter(m, 35718);
            d.profile && (c.stats.uniformsCount = r);
            var u = c.uniforms;
            for (h = 0; h < r; ++h)
                if (l = a.getActiveUniform(m, h))
                    if (1 < l.size)
                        for (var v = 0; v < l.size; ++v) {
                            var A = l.name.replace('[0]', '[' + v + ']');
                            k(u, new f(A, b.id(A), a.getUniformLocation(m, A), l));
                        }
                    else
                        k(u, new f(l.name, b.id(l.name), a.getUniformLocation(m, l.name), l));
            r = a.getProgramParameter(m, 35721);
            d.profile && (c.stats.attributesCount = r);
            u = c.attributes;
            for (h = 0; h < r; ++h)
                (l = a.getActiveAttrib(m, h)) && k(u, new f(l.name, b.id(l.name), a.getAttribLocation(m, l.name), l));
        }
        var r = {}, v = {}, l = {}, u = [], m = 0;
        d.profile && (c.getMaxUniformsCount = function () {
            var a = 0;
            u.forEach(function (b) {
                b.stats.uniformsCount > a && (a = b.stats.uniformsCount);
            });
            return a;
        }, c.getMaxAttributesCount = function () {
            var a = 0;
            u.forEach(function (b) {
                b.stats.attributesCount > a && (a = b.stats.attributesCount);
            });
            return a;
        });
        return {
            clear: function () {
                var b = a.deleteShader.bind(a);
                H(r).forEach(b);
                r = {};
                H(v).forEach(b);
                v = {};
                u.forEach(function (b) {
                    a.deleteProgram(b.program);
                });
                u.length = 0;
                l = {};
                c.shaderCount = 0;
            },
            program: function (a, b, f) {
                var d = l[b];
                d || (d = l[b] = {});
                var m = d[a];
                m || (m = new h(b, a), c.shaderCount++, g(m, f), d[a] = m, u.push(m));
                return m;
            },
            restore: function () {
                r = {};
                v = {};
                for (var a = 0; a < u.length; ++a)
                    g(u[a]);
            },
            shader: p,
            frag: -1,
            vert: -1
        };
    }
    function Mb(a, b, c, d, f, k) {
        function p(g) {
            var f;
            f = null === b.next ? 5121 : b.next.colorAttachments[0].texture._texture.type;
            var h = 0, l = 0, k = d.framebufferWidth, m = d.framebufferHeight, e = null;
            O(g) ? e = g : g && (h = g.x | 0, l = g.y | 0, k = (g.width || d.framebufferWidth - h) | 0, m = (g.height || d.framebufferHeight - l) | 0, e = g.data || null);
            c();
            g = k * m * 4;
            e || (5121 === f ? e = new Uint8Array(g) : 5126 === f && (e = e || new Float32Array(g)));
            a.pixelStorei(3333, 4);
            a.readPixels(h, l, k, m, 6408, f, e);
            return e;
        }
        function h(a) {
            var c;
            b.setFBO({ framebuffer: a.framebuffer }, function () {
                c = p(a);
            });
            return c;
        }
        return function (a) {
            return a && 'framebuffer' in a ? h(a) : p(a);
        };
    }
    function Ba(a) {
        return Array.prototype.slice.call(a);
    }
    function Ca(a) {
        return Ba(a).join('');
    }
    function Nb() {
        function a() {
            var a = [], b = [];
            return A(function () {
                a.push.apply(a, Ba(arguments));
            }, {
                def: function () {
                    var f = 'v' + c++;
                    b.push(f);
                    0 < arguments.length && (a.push(f, '='), a.push.apply(a, Ba(arguments)), a.push(';'));
                    return f;
                },
                toString: function () {
                    return Ca([
                        0 < b.length ? 'var ' + b + ';' : '',
                        Ca(a)
                    ]);
                }
            });
        }
        function b() {
            function b(a, d) {
                f(a, d, '=', c.def(a, d), ';');
            }
            var c = a(), f = a(), d = c.toString, l = f.toString;
            return A(function () {
                c.apply(c, Ba(arguments));
            }, {
                def: c.def,
                entry: c,
                exit: f,
                save: b,
                set: function (a, f, e) {
                    b(a, f);
                    c(a, f, '=', e, ';');
                },
                toString: function () {
                    return d() + l();
                }
            });
        }
        var c = 0, d = [], f = [], k = a(), p = {};
        return {
            global: k,
            link: function (a) {
                for (var b = 0; b < f.length; ++b)
                    if (f[b] === a)
                        return d[b];
                b = 'g' + c++;
                d.push(b);
                f.push(a);
                return b;
            },
            block: a,
            proc: function (a, c) {
                function f() {
                    var a = 'a' + d.length;
                    d.push(a);
                    return a;
                }
                var d = [];
                c = c || 0;
                for (var l = 0; l < c; ++l)
                    f();
                var l = b(), k = l.toString;
                return p[a] = A(l, {
                    arg: f,
                    toString: function () {
                        return Ca([
                            'function(',
                            d.join(),
                            '){',
                            k(),
                            '}'
                        ]);
                    }
                });
            },
            scope: b,
            cond: function () {
                var a = Ca(arguments), c = b(), f = b(), d = c.toString, l = f.toString;
                return A(c, {
                    then: function () {
                        c.apply(c, Ba(arguments));
                        return this;
                    },
                    'else': function () {
                        f.apply(f, Ba(arguments));
                        return this;
                    },
                    toString: function () {
                        var b = l();
                        b && (b = 'else{' + b + '}');
                        return Ca([
                            'if(',
                            a,
                            '){',
                            d(),
                            '}',
                            b
                        ]);
                    }
                });
            },
            compile: function () {
                var a = [
                    '"use strict";',
                    k,
                    'return {'
                ];
                Object.keys(p).forEach(function (b) {
                    a.push('"', b, '":', p[b].toString(), ',');
                });
                a.push('}');
                var b = Ca(a).replace(/;/g, ';\n').replace(/}/g, '}\n').replace(/{/g, '{\n');
                return Function.apply(null, d.concat(b)).apply(null, f);
            }
        };
    }
    function Na(a) {
        return Array.isArray(a) || O(a) || ja(a);
    }
    function qb(a) {
        return a.sort(function (a, c) {
            return 'viewport' === a ? -1 : 'viewport' === c ? 1 : a < c ? -1 : 1;
        });
    }
    function Y(a, b, c, d) {
        this.thisDep = a;
        this.contextDep = b;
        this.propDep = c;
        this.append = d;
    }
    function ta(a) {
        return a && !(a.thisDep || a.contextDep || a.propDep);
    }
    function B(a) {
        return new Y(!1, !1, !1, a);
    }
    function N(a, b) {
        var c = a.type;
        return 0 === c ? (c = a.data.length, new Y(!0, 1 <= c, 2 <= c, b)) : 4 === c ? (c = a.data, new Y(c.thisDep, c.contextDep, c.propDep, b)) : new Y(3 === c, 2 === c, 1 === c, b);
    }
    function Ob(a, b, c, d, f, k, p, h, g, r, v, l, u, m, e) {
        function n(a) {
            return a.replace('.', '_');
        }
        function D(a, b, c) {
            var e = n(a);
            Ja.push(a);
            Fa[e] = pa[e] = !!c;
            qa[e] = b;
        }
        function w(a, b, c) {
            var e = n(a);
            Ja.push(a);
            Array.isArray(c) ? (pa[e] = c.slice(), Fa[e] = c.slice()) : pa[e] = Fa[e] = c;
            ra[e] = b;
        }
        function t() {
            var a = Nb(), c = a.link, e = a.global;
            a.id = oa++;
            a.batchId = '0';
            var f = c(ga), d = a.shared = { props: 'a0' };
            Object.keys(ga).forEach(function (a) {
                d[a] = e.def(f, '.', a);
            });
            var g = a.next = {}, ca = a.current = {};
            Object.keys(ra).forEach(function (a) {
                Array.isArray(pa[a]) && (g[a] = e.def(d.next, '.', a), ca[a] = e.def(d.current, '.', a));
            });
            var F = a.constants = {};
            Object.keys(da).forEach(function (a) {
                F[a] = e.def(JSON.stringify(da[a]));
            });
            a.invoke = function (b, e) {
                switch (e.type) {
                case 0:
                    var X = [
                        'this',
                        d.context,
                        d.props,
                        a.batchId
                    ];
                    return b.def(c(e.data), '.call(', X.slice(0, Math.max(e.data.length + 1, 4)), ')');
                case 1:
                    return b.def(d.props, e.data);
                case 2:
                    return b.def(d.context, e.data);
                case 3:
                    return b.def('this', e.data);
                case 4:
                    return e.data.append(a, b), e.data.ref;
                }
            };
            a.attribCache = {};
            var X = {};
            a.scopeAttrib = function (a) {
                a = b.id(a);
                if (a in X)
                    return X[a];
                var e = r.scope[a];
                e || (e = r.scope[a] = new xa());
                return X[a] = c(e);
            };
            return a;
        }
        function Z(a) {
            var b = a['static'];
            a = a.dynamic;
            var c;
            if ('profile' in b) {
                var e = !!b.profile;
                c = B(function (a, b) {
                    return e;
                });
                c.enable = e;
            } else if ('profile' in a) {
                var f = a.profile;
                c = N(f, function (a, b) {
                    return a.invoke(b, f);
                });
            }
            return c;
        }
        function A(a, b) {
            var c = a['static'], e = a.dynamic;
            if ('framebuffer' in c) {
                var f = c.framebuffer;
                return f ? (f = h.getFramebuffer(f), B(function (a, b) {
                    var c = a.link(f), e = a.shared;
                    b.set(e.framebuffer, '.next', c);
                    e = e.context;
                    b.set(e, '.framebufferWidth', c + '.width');
                    b.set(e, '.framebufferHeight', c + '.height');
                    return c;
                })) : B(function (a, b) {
                    var c = a.shared;
                    b.set(c.framebuffer, '.next', 'null');
                    c = c.context;
                    b.set(c, '.framebufferWidth', c + '.drawingBufferWidth');
                    b.set(c, '.framebufferHeight', c + '.drawingBufferHeight');
                    return 'null';
                });
            }
            if ('framebuffer' in e) {
                var d = e.framebuffer;
                return N(d, function (a, b) {
                    var c = a.invoke(b, d), e = a.shared, q = e.framebuffer, c = b.def(q, '.getFramebuffer(', c, ')');
                    b.set(q, '.next', c);
                    e = e.context;
                    b.set(e, '.framebufferWidth', c + '?' + c + '.width:' + e + '.drawingBufferWidth');
                    b.set(e, '.framebufferHeight', c + '?' + c + '.height:' + e + '.drawingBufferHeight');
                    return c;
                });
            }
            return null;
        }
        function x(a, b, c) {
            function e(a) {
                if (a in f) {
                    var c = f[a];
                    a = !0;
                    var q = c.x | 0, g = c.y | 0, K, ca;
                    'width' in c ? K = c.width | 0 : a = !1;
                    'height' in c ? ca = c.height | 0 : a = !1;
                    return new Y(!a && b && b.thisDep, !a && b && b.contextDep, !a && b && b.propDep, function (a, b) {
                        var e = a.shared.context, f = K;
                        'width' in c || (f = b.def(e, '.', 'framebufferWidth', '-', q));
                        var d = ca;
                        'height' in c || (d = b.def(e, '.', 'framebufferHeight', '-', g));
                        return [
                            q,
                            g,
                            f,
                            d
                        ];
                    });
                }
                if (a in d) {
                    var l = d[a];
                    a = N(l, function (a, b) {
                        var c = a.invoke(b, l), e = a.shared.context, q = b.def(c, '.x|0'), f = b.def(c, '.y|0'), d = b.def('"width" in ', c, '?', c, '.width|0:', '(', e, '.', 'framebufferWidth', '-', q, ')'), c = b.def('"height" in ', c, '?', c, '.height|0:', '(', e, '.', 'framebufferHeight', '-', f, ')');
                        return [
                            q,
                            f,
                            d,
                            c
                        ];
                    });
                    b && (a.thisDep = a.thisDep || b.thisDep, a.contextDep = a.contextDep || b.contextDep, a.propDep = a.propDep || b.propDep);
                    return a;
                }
                return b ? new Y(b.thisDep, b.contextDep, b.propDep, function (a, b) {
                    var c = a.shared.context;
                    return [
                        0,
                        0,
                        b.def(c, '.', 'framebufferWidth'),
                        b.def(c, '.', 'framebufferHeight')
                    ];
                }) : null;
            }
            var f = a['static'], d = a.dynamic;
            if (a = e('viewport')) {
                var g = a;
                a = new Y(a.thisDep, a.contextDep, a.propDep, function (a, b) {
                    var c = g.append(a, b), e = a.shared.context;
                    b.set(e, '.viewportWidth', c[2]);
                    b.set(e, '.viewportHeight', c[3]);
                    return c;
                });
            }
            return {
                viewport: a,
                scissor_box: e('scissor.box')
            };
        }
        function C(a) {
            function c(a) {
                if (a in e) {
                    var d = b.id(e[a]);
                    a = B(function () {
                        return d;
                    });
                    a.id = d;
                    return a;
                }
                if (a in f) {
                    var q = f[a];
                    return N(q, function (a, b) {
                        var c = a.invoke(b, q);
                        return b.def(a.shared.strings, '.id(', c, ')');
                    });
                }
                return null;
            }
            var e = a['static'], f = a.dynamic, d = c('frag'), g = c('vert'), ca = null;
            ta(d) && ta(g) ? (ca = v.program(g.id, d.id), a = B(function (a, b) {
                return a.link(ca);
            })) : a = new Y(d && d.thisDep || g && g.thisDep, d && d.contextDep || g && g.contextDep, d && d.propDep || g && g.propDep, function (a, b) {
                var c = a.shared.shader, e;
                e = d ? d.append(a, b) : b.def(c, '.', 'frag');
                var f;
                f = g ? g.append(a, b) : b.def(c, '.', 'vert');
                return b.def(c + '.program(' + f + ',' + e + ')');
            });
            return {
                frag: d,
                vert: g,
                progVar: a,
                program: ca
            };
        }
        function M(a, b) {
            function c(a, b) {
                if (a in e) {
                    var q = e[a] | 0;
                    return B(function (a, c) {
                        b && (a.OFFSET = q);
                        return q;
                    });
                }
                if (a in f) {
                    var g = f[a];
                    return N(g, function (a, c) {
                        var e = a.invoke(c, g);
                        b && (a.OFFSET = e);
                        return e;
                    });
                }
                return b && d ? B(function (a, b) {
                    a.OFFSET = '0';
                    return 0;
                }) : null;
            }
            var e = a['static'], f = a.dynamic, d = function () {
                    if ('elements' in e) {
                        var a = e.elements;
                        Na(a) ? a = k.getElements(k.create(a, !0)) : a && (a = k.getElements(a));
                        var b = B(function (b, c) {
                            if (a) {
                                var e = b.link(a);
                                return b.ELEMENTS = e;
                            }
                            return b.ELEMENTS = null;
                        });
                        b.value = a;
                        return b;
                    }
                    if ('elements' in f) {
                        var c = f.elements;
                        return N(c, function (a, b) {
                            var e = a.shared, d = e.isBufferArgs, e = e.elements, f = a.invoke(b, c), q = b.def('null'), d = b.def(d, '(', f, ')'), f = a.cond(d).then(q, '=', e, '.createStream(', f, ');')['else'](q, '=', e, '.getElements(', f, ');');
                            b.entry(f);
                            b.exit(a.cond(d).then(e, '.destroyStream(', q, ');'));
                            return a.ELEMENTS = q;
                        });
                    }
                    return null;
                }(), g = c('offset', !0);
            return {
                elements: d,
                primitive: function () {
                    if ('primitive' in e) {
                        var a = e.primitive;
                        return B(function (b, c) {
                            return Ra[a];
                        });
                    }
                    if ('primitive' in f) {
                        var b = f.primitive;
                        return N(b, function (a, c) {
                            var e = a.constants.primTypes, d = a.invoke(c, b);
                            return c.def(e, '[', d, ']');
                        });
                    }
                    return d ? ta(d) ? d.value ? B(function (a, b) {
                        return b.def(a.ELEMENTS, '.primType');
                    }) : B(function () {
                        return 4;
                    }) : new Y(d.thisDep, d.contextDep, d.propDep, function (a, b) {
                        var c = a.ELEMENTS;
                        return b.def(c, '?', c, '.primType:', 4);
                    }) : null;
                }(),
                count: function () {
                    if ('count' in e) {
                        var a = e.count | 0;
                        return B(function () {
                            return a;
                        });
                    }
                    if ('count' in f) {
                        var b = f.count;
                        return N(b, function (a, c) {
                            return a.invoke(c, b);
                        });
                    }
                    return d ? ta(d) ? d ? g ? new Y(g.thisDep, g.contextDep, g.propDep, function (a, b) {
                        return b.def(a.ELEMENTS, '.vertCount-', a.OFFSET);
                    }) : B(function (a, b) {
                        return b.def(a.ELEMENTS, '.vertCount');
                    }) : B(function () {
                        return -1;
                    }) : new Y(d.thisDep || g.thisDep, d.contextDep || g.contextDep, d.propDep || g.propDep, function (a, b) {
                        var c = a.ELEMENTS;
                        return a.OFFSET ? b.def(c, '?', c, '.vertCount-', a.OFFSET, ':-1') : b.def(c, '?', c, '.vertCount:-1');
                    }) : null;
                }(),
                instances: c('instances', !1),
                offset: g
            };
        }
        function P(a, b) {
            var c = a['static'], e = a.dynamic, d = {};
            Ja.forEach(function (a) {
                function b(q, g) {
                    if (a in c) {
                        var y = q(c[a]);
                        d[f] = B(function () {
                            return y;
                        });
                    } else if (a in e) {
                        var l = e[a];
                        d[f] = N(l, function (a, b) {
                            return g(a, b, a.invoke(b, l));
                        });
                    }
                }
                var f = n(a);
                switch (a) {
                case 'cull.enable':
                case 'blend.enable':
                case 'dither':
                case 'stencil.enable':
                case 'depth.enable':
                case 'scissor.enable':
                case 'polygonOffset.enable':
                case 'sample.alpha':
                case 'sample.enable':
                case 'depth.mask':
                    return b(function (a) {
                        return a;
                    }, function (a, b, c) {
                        return c;
                    });
                case 'depth.func':
                    return b(function (a) {
                        return Ua[a];
                    }, function (a, b, c) {
                        return b.def(a.constants.compareFuncs, '[', c, ']');
                    });
                case 'depth.range':
                    return b(function (a) {
                        return a;
                    }, function (a, b, c) {
                        a = b.def('+', c, '[0]');
                        b = b.def('+', c, '[1]');
                        return [
                            a,
                            b
                        ];
                    });
                case 'blend.func':
                    return b(function (a) {
                        return [
                            Ga['srcRGB' in a ? a.srcRGB : a.src],
                            Ga['dstRGB' in a ? a.dstRGB : a.dst],
                            Ga['srcAlpha' in a ? a.srcAlpha : a.src],
                            Ga['dstAlpha' in a ? a.dstAlpha : a.dst]
                        ];
                    }, function (a, b, c) {
                        function e(a, d) {
                            return b.def('"', a, d, '" in ', c, '?', c, '.', a, d, ':', c, '.', a);
                        }
                        a = a.constants.blendFuncs;
                        var d = e('src', 'RGB'), f = e('dst', 'RGB'), d = b.def(a, '[', d, ']'), q = b.def(a, '[', e('src', 'Alpha'), ']'), f = b.def(a, '[', f, ']');
                        a = b.def(a, '[', e('dst', 'Alpha'), ']');
                        return [
                            d,
                            f,
                            q,
                            a
                        ];
                    });
                case 'blend.equation':
                    return b(function (a) {
                        if ('string' === typeof a)
                            return [
                                V[a],
                                V[a]
                            ];
                        if ('object' === typeof a)
                            return [
                                V[a.rgb],
                                V[a.alpha]
                            ];
                    }, function (a, b, c) {
                        var e = a.constants.blendEquations, d = b.def(), f = b.def();
                        a = a.cond('typeof ', c, '==="string"');
                        a.then(d, '=', f, '=', e, '[', c, '];');
                        a['else'](d, '=', e, '[', c, '.rgb];', f, '=', e, '[', c, '.alpha];');
                        b(a);
                        return [
                            d,
                            f
                        ];
                    });
                case 'blend.color':
                    return b(function (a) {
                        return J(4, function (b) {
                            return +a[b];
                        });
                    }, function (a, b, c) {
                        return J(4, function (a) {
                            return b.def('+', c, '[', a, ']');
                        });
                    });
                case 'stencil.mask':
                    return b(function (a) {
                        return a | 0;
                    }, function (a, b, c) {
                        return b.def(c, '|0');
                    });
                case 'stencil.func':
                    return b(function (a) {
                        return [
                            Ua[a.cmp || 'keep'],
                            a.ref || 0,
                            'mask' in a ? a.mask : -1
                        ];
                    }, function (a, b, c) {
                        a = b.def('"cmp" in ', c, '?', a.constants.compareFuncs, '[', c, '.cmp]', ':', 7680);
                        var e = b.def(c, '.ref|0');
                        b = b.def('"mask" in ', c, '?', c, '.mask|0:-1');
                        return [
                            a,
                            e,
                            b
                        ];
                    });
                case 'stencil.opFront':
                case 'stencil.opBack':
                    return b(function (b) {
                        return [
                            'stencil.opBack' === a ? 1029 : 1028,
                            Oa[b.fail || 'keep'],
                            Oa[b.zfail || 'keep'],
                            Oa[b.zpass || 'keep']
                        ];
                    }, function (b, c, e) {
                        function d(a) {
                            return c.def('"', a, '" in ', e, '?', f, '[', e, '.', a, ']:', 7680);
                        }
                        var f = b.constants.stencilOps;
                        return [
                            'stencil.opBack' === a ? 1029 : 1028,
                            d('fail'),
                            d('zfail'),
                            d('zpass')
                        ];
                    });
                case 'polygonOffset.offset':
                    return b(function (a) {
                        return [
                            a.factor | 0,
                            a.units | 0
                        ];
                    }, function (a, b, c) {
                        a = b.def(c, '.factor|0');
                        b = b.def(c, '.units|0');
                        return [
                            a,
                            b
                        ];
                    });
                case 'cull.face':
                    return b(function (a) {
                        var b = 0;
                        'front' === a ? b = 1028 : 'back' === a && (b = 1029);
                        return b;
                    }, function (a, b, c) {
                        return b.def(c, '==="front"?', 1028, ':', 1029);
                    });
                case 'lineWidth':
                    return b(function (a) {
                        return a;
                    }, function (a, b, c) {
                        return c;
                    });
                case 'frontFace':
                    return b(function (a) {
                        return rb[a];
                    }, function (a, b, c) {
                        return b.def(c + '==="cw"?2304:2305');
                    });
                case 'colorMask':
                    return b(function (a) {
                        return a.map(function (a) {
                            return !!a;
                        });
                    }, function (a, b, c) {
                        return J(4, function (a) {
                            return '!!' + c + '[' + a + ']';
                        });
                    });
                case 'sample.coverage':
                    return b(function (a) {
                        return [
                            'value' in a ? a.value : 1,
                            !!a.invert
                        ];
                    }, function (a, b, c) {
                        a = b.def('"value" in ', c, '?+', c, '.value:1');
                        b = b.def('!!', c, '.invert');
                        return [
                            a,
                            b
                        ];
                    });
                }
            });
            return d;
        }
        function G(a, b) {
            var c = a['static'], e = a.dynamic, d = {};
            Object.keys(c).forEach(function (a) {
                var b = c[a], e;
                if ('number' === typeof b || 'boolean' === typeof b)
                    e = B(function () {
                        return b;
                    });
                else if ('function' === typeof b) {
                    var f = b._reglType;
                    if ('texture2d' === f || 'textureCube' === f)
                        e = B(function (a) {
                            return a.link(b);
                        });
                    else if ('framebuffer' === f || 'framebufferCube' === f)
                        e = B(function (a) {
                            return a.link(b.color[0]);
                        });
                } else
                    na(b) && (e = B(function (a) {
                        return a.global.def('[', J(b.length, function (a) {
                            return b[a];
                        }), ']');
                    }));
                e.value = b;
                d[a] = e;
            });
            Object.keys(e).forEach(function (a) {
                var b = e[a];
                d[a] = N(b, function (a, c) {
                    return a.invoke(c, b);
                });
            });
            return d;
        }
        function Q(a, c) {
            var e = a['static'], d = a.dynamic, g = {};
            Object.keys(e).forEach(function (a) {
                var c = e[a], d = b.id(a), q = new xa();
                if (Na(c))
                    q.state = 1, q.buffer = f.getBuffer(f.create(c, 34962, !1, !0)), q.type = 0;
                else {
                    var y = f.getBuffer(c);
                    if (y)
                        q.state = 1, q.buffer = y, q.type = 0;
                    else if (c.constant) {
                        var l = c.constant;
                        q.buffer = 'null';
                        q.state = 2;
                        'number' === typeof l ? q.x = l : Da.forEach(function (a, b) {
                            b < l.length && (q[a] = l[b]);
                        });
                    } else {
                        var y = Na(c.buffer) ? f.getBuffer(f.create(c.buffer, 34962, !1, !0)) : f.getBuffer(c.buffer), h = c.offset | 0, k = c.stride | 0, m = c.size | 0, n = !!c.normalized, aa = 0;
                        'type' in c && (aa = Qa[c.type]);
                        c = c.divisor | 0;
                        q.buffer = y;
                        q.state = 1;
                        q.size = m;
                        q.normalized = n;
                        q.type = aa || y.dtype;
                        q.offset = h;
                        q.stride = k;
                        q.divisor = c;
                    }
                }
                g[a] = B(function (a, b) {
                    var c = a.attribCache;
                    if (d in c)
                        return c[d];
                    var e = { isStream: !1 };
                    Object.keys(q).forEach(function (a) {
                        e[a] = q[a];
                    });
                    q.buffer && (e.buffer = a.link(q.buffer), e.type = e.type || e.buffer + '.dtype');
                    return c[d] = e;
                });
            });
            Object.keys(d).forEach(function (a) {
                var b = d[a];
                g[a] = N(b, function (a, c) {
                    function e(a) {
                        c(y[a], '=', d, '.', a, '|0;');
                    }
                    var d = a.invoke(c, b), f = a.shared, q = f.isBufferArgs, g = f.buffer, y = { isStream: c.def(!1) }, l = new xa();
                    l.state = 1;
                    Object.keys(l).forEach(function (a) {
                        y[a] = c.def('' + l[a]);
                    });
                    var h = y.buffer, K = y.type;
                    c('if(', q, '(', d, ')){', y.isStream, '=true;', h, '=', g, '.createStream(', 34962, ',', d, ');', K, '=', h, '.dtype;', '}else{', h, '=', g, '.getBuffer(', d, ');', 'if(', h, '){', K, '=', h, '.dtype;', '}else if("constant" in ', d, '){', y.state, '=', 2, ';', 'if(typeof ' + d + '.constant === "number"){', y[Da[0]], '=', d, '.constant;', Da.slice(1).map(function (a) {
                        return y[a];
                    }).join('='), '=0;', '}else{', Da.map(function (a, b) {
                        return y[a] + '=' + d + '.constant.length>=' + b + '?' + d + '.constant[' + b + ']:0;';
                    }).join(''), '}}else{', 'if(', q, '(', d, '.buffer)){', h, '=', g, '.createStream(', 34962, ',', d, '.buffer);', '}else{', h, '=', g, '.getBuffer(', d, '.buffer);', '}', K, '="type" in ', d, '?', f.glTypes, '[', d, '.type]:', h, '.dtype;', y.normalized, '=!!', d, '.normalized;');
                    e('size');
                    e('offset');
                    e('stride');
                    e('divisor');
                    c('}}');
                    c.exit('if(', y.isStream, '){', g, '.destroyStream(', h, ');', '}');
                    return y;
                });
            });
            return g;
        }
        function O(a) {
            var b = a['static'], c = a.dynamic, e = {};
            Object.keys(b).forEach(function (a) {
                var c = b[a];
                e[a] = B(function (a, b) {
                    return 'number' === typeof c || 'boolean' === typeof c ? '' + c : a.link(c);
                });
            });
            Object.keys(c).forEach(function (a) {
                var b = c[a];
                e[a] = N(b, function (a, c) {
                    return a.invoke(c, b);
                });
            });
            return e;
        }
        function z(a, b, c, e, d) {
            var f = A(a, d), g = x(a, f, d), l = M(a, d), h = P(a, d), k = C(a, d), m = g.viewport;
            m && (h.viewport = m);
            m = n('scissor.box');
            (g = g[m]) && (h[m] = g);
            g = 0 < Object.keys(h).length;
            f = {
                framebuffer: f,
                draw: l,
                shader: k,
                state: h,
                dirty: g
            };
            f.profile = Z(a, d);
            f.uniforms = G(c, d);
            f.attributes = Q(b, d);
            f.context = O(e, d);
            return f;
        }
        function sa(a, b, c) {
            var e = a.shared.context, d = a.scope();
            Object.keys(c).forEach(function (f) {
                b.save(e, '.' + f);
                d(e, '.', f, '=', c[f].append(a, b), ';');
            });
            b(d);
        }
        function I(a, b, c, e) {
            var d = a.shared, f = d.gl, g = d.framebuffer, l;
            ka && (l = b.def(d.extensions, '.webgl_draw_buffers'));
            var h = a.constants, d = h.drawBuffer, h = h.backBuffer;
            a = c ? c.append(a, b) : b.def(g, '.next');
            e || b('if(', a, '!==', g, '.cur){');
            b('if(', a, '){', f, '.bindFramebuffer(', 36160, ',', a, '.framebuffer);');
            ka && b(l, '.drawBuffersWEBGL(', d, '[', a, '.colorAttachments.length]);');
            b('}else{', f, '.bindFramebuffer(', 36160, ',null);');
            ka && b(l, '.drawBuffersWEBGL(', h, ');');
            b('}', g, '.cur=', a, ';');
            e || b('}');
        }
        function T(a, b, c) {
            var e = a.shared, d = e.gl, f = a.current, g = a.next, l = e.current, h = e.next, k = a.cond(l, '.dirty');
            Ja.forEach(function (b) {
                b = n(b);
                if (!(b in c.state)) {
                    var e, y;
                    if (b in g) {
                        e = g[b];
                        y = f[b];
                        var m = J(pa[b].length, function (a) {
                            return k.def(e, '[', a, ']');
                        });
                        k(a.cond(m.map(function (a, b) {
                            return a + '!==' + y + '[' + b + ']';
                        }).join('||')).then(d, '.', ra[b], '(', m, ');', m.map(function (a, b) {
                            return y + '[' + b + ']=' + a;
                        }).join(';'), ';'));
                    } else
                        e = k.def(h, '.', b), m = a.cond(e, '!==', l, '.', b), k(m), b in qa ? m(a.cond(e).then(d, '.enable(', qa[b], ');')['else'](d, '.disable(', qa[b], ');'), l, '.', b, '=', e, ';') : m(d, '.', ra[b], '(', e, ');', l, '.', b, '=', e, ';');
                }
            });
            0 === Object.keys(c.state).length && k(l, '.dirty=false;');
            b(k);
        }
        function L(a, b, c, e) {
            var d = a.shared, f = a.current, g = d.current, l = d.gl;
            qb(Object.keys(c)).forEach(function (d) {
                var h = c[d];
                if (!e || e(h)) {
                    var k = h.append(a, b);
                    if (qa[d]) {
                        var m = qa[d];
                        ta(h) ? k ? b(l, '.enable(', m, ');') : b(l, '.disable(', m, ');') : b(a.cond(k).then(l, '.enable(', m, ');')['else'](l, '.disable(', m, ');'));
                        b(g, '.', d, '=', k, ';');
                    } else if (na(k)) {
                        var n = f[d];
                        b(l, '.', ra[d], '(', k, ');', k.map(function (a, b) {
                            return n + '[' + b + ']=' + a;
                        }).join(';'), ';');
                    } else
                        b(l, '.', ra[d], '(', k, ');', g, '.', d, '=', k, ';');
                }
            });
        }
        function ua(a, b) {
            ma && (a.instancing = b.def(a.shared.extensions, '.angle_instanced_arrays'));
        }
        function E(a, b, c, e, d) {
            function f() {
                return 'undefined' === typeof performance ? 'Date.now()' : 'performance.now()';
            }
            function g(a) {
                r = b.def();
                a(r, '=', f(), ';');
                'string' === typeof d ? a(n, '.count+=', d, ';') : a(n, '.count++;');
                m && (e ? (u = b.def(), a(u, '=', t, '.getNumPendingQueries();')) : a(t, '.beginQuery(', n, ');'));
            }
            function l(a) {
                a(n, '.cpuTime+=', f(), '-', r, ';');
                m && (e ? a(t, '.pushScopeStats(', u, ',', t, '.getNumPendingQueries(),', n, ');') : a(t, '.endQuery();'));
            }
            function h(a) {
                var c = b.def(p, '.profile');
                b(p, '.profile=', a, ';');
                b.exit(p, '.profile=', c, ';');
            }
            var k = a.shared, n = a.stats, p = k.current, t = k.timer;
            c = c.profile;
            var r, u;
            if (c) {
                if (ta(c)) {
                    c.enable ? (g(b), l(b.exit), h('true')) : h('false');
                    return;
                }
                c = c.append(a, b);
                h(c);
            } else
                c = b.def(p, '.profile');
            k = a.block();
            g(k);
            b('if(', c, '){', k, '}');
            a = a.block();
            l(a);
            b.exit('if(', c, '){', a, '}');
        }
        function S(a, b, c, e, d) {
            function f(a) {
                switch (a) {
                case 35664:
                case 35667:
                case 35671:
                    return 2;
                case 35665:
                case 35668:
                case 35672:
                    return 3;
                case 35666:
                case 35669:
                case 35673:
                    return 4;
                default:
                    return 1;
                }
            }
            function g(c, e, d) {
                function f() {
                    b('if(!', n, '.buffer){', k, '.enableVertexAttribArray(', m, ');}');
                    var c = d.type, g;
                    g = d.size ? b.def(d.size, '||', e) : e;
                    b('if(', n, '.type!==', c, '||', n, '.size!==', g, '||', aa.map(function (a) {
                        return n + '.' + a + '!==' + d[a];
                    }).join('||'), '){', k, '.bindBuffer(', 34962, ',', K, '.buffer);', k, '.vertexAttribPointer(', [
                        m,
                        g,
                        c,
                        d.normalized,
                        d.stride,
                        d.offset
                    ], ');', n, '.type=', c, ';', n, '.size=', g, ';', aa.map(function (a) {
                        return n + '.' + a + '=' + d[a] + ';';
                    }).join(''), '}');
                    ma && (c = d.divisor, b('if(', n, '.divisor!==', c, '){', a.instancing, '.vertexAttribDivisorANGLE(', [
                        m,
                        c
                    ], ');', n, '.divisor=', c, ';}'));
                }
                function h() {
                    b('if(', n, '.buffer){', k, '.disableVertexAttribArray(', m, ');', '}if(', Da.map(function (a, b) {
                        return n + '.' + a + '!==' + p[b];
                    }).join('||'), '){', k, '.vertexAttrib4f(', m, ',', p, ');', Da.map(function (a, b) {
                        return n + '.' + a + '=' + p[b] + ';';
                    }).join(''), '}');
                }
                var k = l.gl, m = b.def(c, '.location'), n = b.def(l.attributes, '[', m, ']');
                c = d.state;
                var K = d.buffer, p = [
                        d.x,
                        d.y,
                        d.z,
                        d.w
                    ], aa = [
                        'buffer',
                        'normalized',
                        'offset',
                        'stride'
                    ];
                1 === c ? f() : 2 === c ? h() : (b('if(', c, '===', 1, '){'), f(), b('}else{'), h(), b('}'));
            }
            var l = a.shared;
            e.forEach(function (e) {
                var l = e.name, h = c.attributes[l], k;
                if (h) {
                    if (!d(h))
                        return;
                    k = h.append(a, b);
                } else {
                    if (!d(sb))
                        return;
                    var m = a.scopeAttrib(l);
                    k = {};
                    Object.keys(new xa()).forEach(function (a) {
                        k[a] = b.def(m, '.', a);
                    });
                }
                g(a.link(e), f(e.info.type), k);
            });
        }
        function U(a, c, e, d, f) {
            for (var g = a.shared, l = g.gl, h, k = 0; k < d.length; ++k) {
                var m = d[k], n = m.name, p = m.info.type, t = e.uniforms[n], m = a.link(m) + '.location', r;
                if (t) {
                    if (!f(t))
                        continue;
                    if (ta(t)) {
                        n = t.value;
                        if (35678 === p || 35680 === p)
                            p = a.link(n._texture || n.color[0]._texture), c(l, '.uniform1i(', m, ',', p + '.bind());'), c.exit(p, '.unbind();');
                        else if (35674 === p || 35675 === p || 35676 === p)
                            n = a.global.def('new Float32Array([' + Array.prototype.slice.call(n) + '])'), t = 2, 35675 === p ? t = 3 : 35676 === p && (t = 4), c(l, '.uniformMatrix', t, 'fv(', m, ',false,', n, ');');
                        else {
                            switch (p) {
                            case 5126:
                                h = '1f';
                                break;
                            case 35664:
                                h = '2f';
                                break;
                            case 35665:
                                h = '3f';
                                break;
                            case 35666:
                                h = '4f';
                                break;
                            case 35670:
                                h = '1i';
                                break;
                            case 5124:
                                h = '1i';
                                break;
                            case 35671:
                                h = '2i';
                                break;
                            case 35667:
                                h = '2i';
                                break;
                            case 35672:
                                h = '3i';
                                break;
                            case 35668:
                                h = '3i';
                                break;
                            case 35673:
                                h = '4i';
                                break;
                            case 35669:
                                h = '4i';
                            }
                            c(l, '.uniform', h, '(', m, ',', na(n) ? Array.prototype.slice.call(n) : n, ');');
                        }
                        continue;
                    } else
                        r = t.append(a, c);
                } else {
                    if (!f(sb))
                        continue;
                    r = c.def(g.uniforms, '[', b.id(n), ']');
                }
                35678 === p ? c('if(', r, '&&', r, '._reglType==="framebuffer"){', r, '=', r, '.color[0];', '}') : 35680 === p && c('if(', r, '&&', r, '._reglType==="framebufferCube"){', r, '=', r, '.color[0];', '}');
                n = 1;
                switch (p) {
                case 35678:
                case 35680:
                    p = c.def(r, '._texture');
                    c(l, '.uniform1i(', m, ',', p, '.bind());');
                    c.exit(p, '.unbind();');
                    continue;
                case 5124:
                case 35670:
                    h = '1i';
                    break;
                case 35667:
                case 35671:
                    h = '2i';
                    n = 2;
                    break;
                case 35668:
                case 35672:
                    h = '3i';
                    n = 3;
                    break;
                case 35669:
                case 35673:
                    h = '4i';
                    n = 4;
                    break;
                case 5126:
                    h = '1f';
                    break;
                case 35664:
                    h = '2f';
                    n = 2;
                    break;
                case 35665:
                    h = '3f';
                    n = 3;
                    break;
                case 35666:
                    h = '4f';
                    n = 4;
                    break;
                case 35674:
                    h = 'Matrix2fv';
                    break;
                case 35675:
                    h = 'Matrix3fv';
                    break;
                case 35676:
                    h = 'Matrix4fv';
                }
                c(l, '.uniform', h, '(', m, ',');
                if ('M' === h.charAt(0)) {
                    var m = Math.pow(p - 35674 + 2, 2), u = a.global.def('new Float32Array(', m, ')');
                    c('false,(Array.isArray(', r, ')||', r, ' instanceof Float32Array)?', r, ':(', J(m, function (a) {
                        return u + '[' + a + ']=' + r + '[' + a + ']';
                    }), ',', u, ')');
                } else
                    1 < n ? c(J(n, function (a) {
                        return r + '[' + a + ']';
                    })) : c(r);
                c(');');
            }
        }
        function H(a, b, c, e) {
            function d(f) {
                var g = m[f];
                return g ? g.contextDep && e.contextDynamic || g.propDep ? g.append(a, c) : g.append(a, b) : b.def(k, '.', f);
            }
            function f() {
                function a() {
                    c(w, '.drawElementsInstancedANGLE(', [
                        p,
                        t,
                        W,
                        r + '<<((' + W + '-5121)>>1)',
                        u
                    ], ');');
                }
                function b() {
                    c(w, '.drawArraysInstancedANGLE(', [
                        p,
                        r,
                        t,
                        u
                    ], ');');
                }
                n ? v ? a() : (c('if(', n, '){'), a(), c('}else{'), b(), c('}')) : b();
            }
            function g() {
                function a() {
                    c(l + '.drawElements(' + [
                        p,
                        t,
                        W,
                        r + '<<((' + W + '-5121)>>1)'
                    ] + ');');
                }
                function b() {
                    c(l + '.drawArrays(' + [
                        p,
                        r,
                        t
                    ] + ');');
                }
                n ? v ? a() : (c('if(', n, '){'), a(), c('}else{'), b(), c('}')) : b();
            }
            var h = a.shared, l = h.gl, k = h.draw, m = e.draw, n = function () {
                    var d = m.elements, f = b;
                    if (d) {
                        if (d.contextDep && e.contextDynamic || d.propDep)
                            f = c;
                        d = d.append(a, f);
                    } else
                        d = f.def(k, '.', 'elements');
                    d && f('if(' + d + ')' + l + '.bindBuffer(34963,' + d + '.buffer.buffer);');
                    return d;
                }(), p = d('primitive'), r = d('offset'), t = function () {
                    var d = m.count, f = b;
                    if (d) {
                        if (d.contextDep && e.contextDynamic || d.propDep)
                            f = c;
                        d = d.append(a, f);
                    } else
                        d = f.def(k, '.', 'count');
                    return d;
                }();
            if ('number' === typeof t) {
                if (0 === t)
                    return;
            } else
                c('if(', t, '){'), c.exit('}');
            var u, w;
            ma && (u = d('instances'), w = a.instancing);
            var W = n + '.type', v = m.elements && ta(m.elements);
            ma && ('number' !== typeof u || 0 <= u) ? 'string' === typeof u ? (c('if(', u, '>0){'), f(), c('}else if(', u, '<0){'), g(), c('}')) : f() : g();
        }
        function ba(a, b, c, e, d) {
            b = t();
            d = b.proc('body', d);
            ma && (b.instancing = d.def(b.shared.extensions, '.angle_instanced_arrays'));
            a(b, d, c, e);
            return b.compile().body;
        }
        function R(a, b, c, e) {
            ua(a, b);
            S(a, b, c, e.attributes, function () {
                return !0;
            });
            U(a, b, c, e.uniforms, function () {
                return !0;
            });
            H(a, b, b, c);
        }
        function W(a, b) {
            var c = a.proc('draw', 1);
            ua(a, c);
            sa(a, c, b.context);
            I(a, c, b.framebuffer);
            T(a, c, b);
            L(a, c, b.state);
            E(a, c, b, !1, !0);
            var e = b.shader.progVar.append(a, c);
            c(a.shared.gl, '.useProgram(', e, '.program);');
            if (b.shader.program)
                R(a, c, b, b.shader.program);
            else {
                var d = a.global.def('{}'), f = c.def(e, '.id'), g = c.def(d, '[', f, ']');
                c(a.cond(g).then(g, '.call(this,a0);')['else'](g, '=', d, '[', f, ']=', a.link(function (c) {
                    return ba(R, a, b, c, 1);
                }), '(', e, ');', g, '.call(this,a0);'));
            }
            0 < Object.keys(b.state).length && c(a.shared.current, '.dirty=true;');
        }
        function la(a, b, c, e) {
            function d() {
                return !0;
            }
            a.batchId = 'a1';
            ua(a, b);
            S(a, b, c, e.attributes, d);
            U(a, b, c, e.uniforms, d);
            H(a, b, b, c);
        }
        function ya(a, b, c, e) {
            function d(a) {
                return a.contextDep && g || a.propDep;
            }
            function f(a) {
                return !d(a);
            }
            ua(a, b);
            var g = c.contextDep, h = b.def(), l = b.def();
            a.shared.props = l;
            a.batchId = h;
            var k = a.scope(), m = a.scope();
            b(k.entry, 'for(', h, '=0;', h, '<', 'a1', ';++', h, '){', l, '=', 'a0', '[', h, '];', m, '}', k.exit);
            c.needsContext && sa(a, m, c.context);
            c.needsFramebuffer && I(a, m, c.framebuffer);
            L(a, m, c.state, d);
            c.profile && d(c.profile) && E(a, m, c, !1, !0);
            e ? (S(a, k, c, e.attributes, f), S(a, m, c, e.attributes, d), U(a, k, c, e.uniforms, f), U(a, m, c, e.uniforms, d), H(a, k, m, c)) : (b = a.global.def('{}'), e = c.shader.progVar.append(a, m), l = m.def(e, '.id'), k = m.def(b, '[', l, ']'), m(a.shared.gl, '.useProgram(', e, '.program);', 'if(!', k, '){', k, '=', b, '[', l, ']=', a.link(function (b) {
                return ba(la, a, c, b, 2);
            }), '(', e, ');}', k, '.call(this,a0[', h, '],', h, ');'));
        }
        function ha(a, b) {
            function c(a) {
                return a.contextDep && d || a.propDep;
            }
            var e = a.proc('batch', 2);
            a.batchId = '0';
            ua(a, e);
            var d = !1, f = !0;
            Object.keys(b.context).forEach(function (a) {
                d = d || b.context[a].propDep;
            });
            d || (sa(a, e, b.context), f = !1);
            var g = b.framebuffer, h = !1;
            g ? (g.propDep ? d = h = !0 : g.contextDep && d && (h = !0), h || I(a, e, g)) : I(a, e, null);
            b.state.viewport && b.state.viewport.propDep && (d = !0);
            T(a, e, b);
            L(a, e, b.state, function (a) {
                return !c(a);
            });
            b.profile && c(b.profile) || E(a, e, b, !1, 'a1');
            b.contextDep = d;
            b.needsContext = f;
            b.needsFramebuffer = h;
            f = b.shader.progVar;
            if (f.contextDep && d || f.propDep)
                ya(a, e, b, null);
            else if (f = f.append(a, e), e(a.shared.gl, '.useProgram(', f, '.program);'), b.shader.program)
                ya(a, e, b, b.shader.program);
            else {
                var g = a.global.def('{}'), h = e.def(f, '.id'), l = e.def(g, '[', h, ']');
                e(a.cond(l).then(l, '.call(this,a0,a1);')['else'](l, '=', g, '[', h, ']=', a.link(function (c) {
                    return ba(ya, a, b, c, 2);
                }), '(', f, ');', l, '.call(this,a0,a1);'));
            }
            0 < Object.keys(b.state).length && e(a.shared.current, '.dirty=true;');
        }
        function ea(a, c) {
            function e(b) {
                var g = c.shader[b];
                g && d.set(f.shader, '.' + b, g.append(a, d));
            }
            var d = a.proc('scope', 3);
            a.batchId = 'a2';
            var f = a.shared, g = f.current;
            sa(a, d, c.context);
            c.framebuffer && c.framebuffer.append(a, d);
            qb(Object.keys(c.state)).forEach(function (b) {
                var e = c.state[b].append(a, d);
                na(e) ? e.forEach(function (c, e) {
                    d.set(a.next[b], '[' + e + ']', c);
                }) : d.set(f.next, '.' + b, e);
            });
            E(a, d, c, !0, !0);
            [
                'elements',
                'offset',
                'count',
                'instances',
                'primitive'
            ].forEach(function (b) {
                var e = c.draw[b];
                e && d.set(f.draw, '.' + b, '' + e.append(a, d));
            });
            Object.keys(c.uniforms).forEach(function (e) {
                d.set(f.uniforms, '[' + b.id(e) + ']', c.uniforms[e].append(a, d));
            });
            Object.keys(c.attributes).forEach(function (b) {
                var e = c.attributes[b].append(a, d), f = a.scopeAttrib(b);
                Object.keys(new xa()).forEach(function (a) {
                    d.set(f, '.' + a, e[a]);
                });
            });
            e('vert');
            e('frag');
            0 < Object.keys(c.state).length && (d(g, '.dirty=true;'), d.exit(g, '.dirty=true;'));
            d('a1(', a.shared.context, ',a0,', a.batchId, ');');
        }
        function ja(a) {
            if ('object' === typeof a && !na(a)) {
                for (var b = Object.keys(a), c = 0; c < b.length; ++c)
                    if (ia.isDynamic(a[b[c]]))
                        return !0;
                return !1;
            }
        }
        function fa(a, b, c) {
            function e(a, b) {
                g.forEach(function (c) {
                    var e = d[c];
                    ia.isDynamic(e) && (e = a.invoke(b, e), b(k, '.', c, '=', e, ';'));
                });
            }
            var d = b['static'][c];
            if (d && ja(d)) {
                var f = a.global, g = Object.keys(d), h = !1, l = !1, m = !1, k = a.global.def('{}');
                g.forEach(function (b) {
                    var c = d[b];
                    if (ia.isDynamic(c))
                        'function' === typeof c && (c = d[b] = ia.unbox(c)), b = N(c, null), h = h || b.thisDep, m = m || b.propDep, l = l || b.contextDep;
                    else {
                        f(k, '.', b, '=');
                        switch (typeof c) {
                        case 'number':
                            f(c);
                            break;
                        case 'string':
                            f('"', c, '"');
                            break;
                        case 'object':
                            Array.isArray(c) && f('[', c.join(), ']');
                            break;
                        default:
                            f(a.link(c));
                        }
                        f(';');
                    }
                });
                b.dynamic[c] = new ia.DynamicVariable(4, {
                    thisDep: h,
                    contextDep: l,
                    propDep: m,
                    ref: k,
                    append: e
                });
                delete b['static'][c];
            }
        }
        var xa = r.Record, V = {
                add: 32774,
                subtract: 32778,
                'reverse subtract': 32779
            };
        c.ext_blend_minmax && (V.min = 32775, V.max = 32776);
        var ma = c.angle_instanced_arrays, ka = c.webgl_draw_buffers, pa = {
                dirty: !0,
                profile: e.profile
            }, Fa = {}, Ja = [], qa = {}, ra = {};
        D('dither', 3024);
        D('blend.enable', 3042);
        w('blend.color', 'blendColor', [
            0,
            0,
            0,
            0
        ]);
        w('blend.equation', 'blendEquationSeparate', [
            32774,
            32774
        ]);
        w('blend.func', 'blendFuncSeparate', [
            1,
            0,
            1,
            0
        ]);
        D('depth.enable', 2929, !0);
        w('depth.func', 'depthFunc', 513);
        w('depth.range', 'depthRange', [
            0,
            1
        ]);
        w('depth.mask', 'depthMask', !0);
        w('colorMask', 'colorMask', [
            !0,
            !0,
            !0,
            !0
        ]);
        D('cull.enable', 2884);
        w('cull.face', 'cullFace', 1029);
        w('frontFace', 'frontFace', 2305);
        w('lineWidth', 'lineWidth', 1);
        D('polygonOffset.enable', 32823);
        w('polygonOffset.offset', 'polygonOffset', [
            0,
            0
        ]);
        D('sample.alpha', 32926);
        D('sample.enable', 32928);
        w('sample.coverage', 'sampleCoverage', [
            1,
            !1
        ]);
        D('stencil.enable', 2960);
        w('stencil.mask', 'stencilMask', -1);
        w('stencil.func', 'stencilFunc', [
            519,
            0,
            -1
        ]);
        w('stencil.opFront', 'stencilOpSeparate', [
            1028,
            7680,
            7680,
            7680
        ]);
        w('stencil.opBack', 'stencilOpSeparate', [
            1029,
            7680,
            7680,
            7680
        ]);
        D('scissor.enable', 3089);
        w('scissor.box', 'scissor', [
            0,
            0,
            a.drawingBufferWidth,
            a.drawingBufferHeight
        ]);
        w('viewport', 'viewport', [
            0,
            0,
            a.drawingBufferWidth,
            a.drawingBufferHeight
        ]);
        var ga = {
                gl: a,
                context: u,
                strings: b,
                next: Fa,
                current: pa,
                draw: l,
                elements: k,
                buffer: f,
                shader: v,
                attributes: r.state,
                uniforms: g,
                framebuffer: h,
                extensions: c,
                timer: m,
                isBufferArgs: Na
            }, da = {
                primTypes: Ra,
                compareFuncs: Ua,
                blendFuncs: Ga,
                blendEquations: V,
                stencilOps: Oa,
                glTypes: Qa,
                orientationType: rb
            };
        ka && (da.backBuffer = [1029], da.drawBuffer = J(d.maxDrawbuffers, function (a) {
            return 0 === a ? [0] : J(a, function (a) {
                return 36064 + a;
            });
        }));
        var oa = 0;
        return {
            next: Fa,
            current: pa,
            procs: function () {
                var b = t(), c = b.proc('poll'), e = b.proc('refresh'), f = b.block();
                c(f);
                e(f);
                var g = b.shared, h = g.gl, l = g.next, m = g.current;
                f(m, '.dirty=false;');
                I(b, c);
                I(b, e, null, !0);
                var k = a.getExtension('angle_instanced_arrays'), n;
                k && (n = b.link(k));
                for (var p = 0; p < d.maxAttributes; ++p) {
                    var r = e.def(g.attributes, '[', p, ']'), u = b.cond(r, '.buffer');
                    u.then(h, '.enableVertexAttribArray(', p, ');', h, '.bindBuffer(', 34962, ',', r, '.buffer.buffer);', h, '.vertexAttribPointer(', p, ',', r, '.size,', r, '.type,', r, '.normalized,', r, '.stride,', r, '.offset);')['else'](h, '.disableVertexAttribArray(', p, ');', h, '.vertexAttrib4f(', p, ',', r, '.x,', r, '.y,', r, '.z,', r, '.w);', r, '.buffer=null;');
                    e(u);
                    k && e(n, '.vertexAttribDivisorANGLE(', p, ',', r, '.divisor);');
                }
                Object.keys(qa).forEach(function (a) {
                    var d = qa[a], g = f.def(l, '.', a), k = b.block();
                    k('if(', g, '){', h, '.enable(', d, ')}else{', h, '.disable(', d, ')}', m, '.', a, '=', g, ';');
                    e(k);
                    c('if(', g, '!==', m, '.', a, '){', k, '}');
                });
                Object.keys(ra).forEach(function (a) {
                    var d = ra[a], g = pa[a], k, n, p = b.block();
                    p(h, '.', d, '(');
                    na(g) ? (d = g.length, k = b.global.def(l, '.', a), n = b.global.def(m, '.', a), p(J(d, function (a) {
                        return k + '[' + a + ']';
                    }), ');', J(d, function (a) {
                        return n + '[' + a + ']=' + k + '[' + a + '];';
                    }).join('')), c('if(', J(d, function (a) {
                        return k + '[' + a + ']!==' + n + '[' + a + ']';
                    }).join('||'), '){', p, '}')) : (k = f.def(l, '.', a), n = f.def(m, '.', a), p(k, ');', m, '.', a, '=', k, ';'), c('if(', k, '!==', n, '){', p, '}'));
                    e(p);
                });
                return b.compile();
            }(),
            compile: function (a, b, c, e, d) {
                var f = t();
                f.stats = f.link(d);
                Object.keys(b['static']).forEach(function (a) {
                    fa(f, b, a);
                });
                Pb.forEach(function (b) {
                    fa(f, a, b);
                });
                c = z(a, b, c, e, f);
                W(f, c);
                ea(f, c);
                ha(f, c);
                return f.compile();
            }
        };
    }
    function tb(a, b) {
        for (var c = 0; c < a.length; ++c)
            if (a[c] === b)
                return c;
        return -1;
    }
    var A = function (a, b) {
            for (var c = Object.keys(b), d = 0; d < c.length; ++d)
                a[c[d]] = b[c[d]];
            return a;
        }, vb = 0, ia = {
            DynamicVariable: da,
            define: function (a, b) {
                return new da(a, Wa(b + ''));
            },
            isDynamic: function (a) {
                return 'function' === typeof a && !a._reglType || a instanceof da;
            },
            unbox: function (a, b) {
                return 'function' === typeof a ? new da(0, a) : a;
            },
            accessor: Wa
        }, Va = {
            next: 'function' === typeof requestAnimationFrame ? function (a) {
                return requestAnimationFrame(a);
            } : function (a) {
                return setTimeout(a, 16);
            },
            cancel: 'function' === typeof cancelAnimationFrame ? function (a) {
                return cancelAnimationFrame(a);
            } : clearTimeout
        }, ub = 'undefined' !== typeof performance && performance.now ? function () {
            return performance.now();
        } : function () {
            return +new Date();
        }, Qb = function (a, b) {
            var c = 1;
            b.ext_texture_filter_anisotropic && (c = a.getParameter(34047));
            var d = 1, f = 1;
            b.webgl_draw_buffers && (d = a.getParameter(34852), f = a.getParameter(36063));
            return {
                colorBits: [
                    a.getParameter(3410),
                    a.getParameter(3411),
                    a.getParameter(3412),
                    a.getParameter(3413)
                ],
                depthBits: a.getParameter(3414),
                stencilBits: a.getParameter(3415),
                subpixelBits: a.getParameter(3408),
                extensions: Object.keys(b).filter(function (a) {
                    return !!b[a];
                }),
                maxAnisotropic: c,
                maxDrawbuffers: d,
                maxColorAttachments: f,
                pointSizeDims: a.getParameter(33901),
                lineWidthDims: a.getParameter(33902),
                maxViewportDims: a.getParameter(3386),
                maxCombinedTextureUnits: a.getParameter(35661),
                maxCubeMapSize: a.getParameter(34076),
                maxRenderbufferSize: a.getParameter(34024),
                maxTextureUnits: a.getParameter(34930),
                maxTextureSize: a.getParameter(3379),
                maxAttributes: a.getParameter(34921),
                maxVertexUniforms: a.getParameter(36347),
                maxVertexTextureUnits: a.getParameter(35660),
                maxVaryingVectors: a.getParameter(36348),
                maxFragmentUniforms: a.getParameter(36349),
                glsl: a.getParameter(35724),
                renderer: a.getParameter(7937),
                vendor: a.getParameter(7936),
                version: a.getParameter(7938)
            };
        }, Ea = {
            '[object Int8Array]': 5120,
            '[object Int16Array]': 5122,
            '[object Int32Array]': 5124,
            '[object Uint8Array]': 5121,
            '[object Uint8ClampedArray]': 5121,
            '[object Uint16Array]': 5123,
            '[object Uint32Array]': 5125,
            '[object Float32Array]': 5126,
            '[object Float64Array]': 5121,
            '[object ArrayBuffer]': 5121
        }, O = function (a) {
            return Object.prototype.toString.call(a) in Ea;
        }, H = function (a) {
            return Object.keys(a).map(function (b) {
                return a[b];
            });
        }, $a = J(8, function () {
            return [];
        }), x = {
            alloc: fa,
            free: ab,
            allocType: function (a, b) {
                var c = null;
                switch (a) {
                case 5120:
                    c = new Int8Array(fa(b), 0, b);
                    break;
                case 5121:
                    c = new Uint8Array(fa(b), 0, b);
                    break;
                case 5122:
                    c = new Int16Array(fa(2 * b), 0, b);
                    break;
                case 5123:
                    c = new Uint16Array(fa(2 * b), 0, b);
                    break;
                case 5124:
                    c = new Int32Array(fa(4 * b), 0, b);
                    break;
                case 5125:
                    c = new Uint32Array(fa(4 * b), 0, b);
                    break;
                case 5126:
                    c = new Float32Array(fa(4 * b), 0, b);
                    break;
                default:
                    return null;
                }
                return c.length !== b ? c.subarray(0, b) : c;
            },
            freeType: function (a) {
                ab(a.buffer);
            }
        }, La = {
            shape: function (a) {
                for (var b = []; a.length; a = a[0])
                    b.push(a.length);
                return b;
            },
            flatten: function (a, b, c, d) {
                var f = 1;
                if (b.length)
                    for (var k = 0; k < b.length; ++k)
                        f *= b[k];
                else
                    f = 0;
                c = d || x.allocType(c, f);
                switch (b.length) {
                case 0:
                    break;
                case 1:
                    d = b[0];
                    for (b = 0; b < d; ++b)
                        c[b] = a[b];
                    break;
                case 2:
                    d = b[0];
                    b = b[1];
                    for (k = f = 0; k < d; ++k)
                        for (var p = a[k], h = 0; h < b; ++h)
                            c[f++] = p[h];
                    break;
                case 3:
                    bb(a, b[0], b[1], b[2], c, 0);
                    break;
                default:
                    cb(a, b, 0, c, 0);
                }
                return c;
            }
        }, Qa = {
            int8: 5120,
            int16: 5122,
            int32: 5124,
            uint8: 5121,
            uint16: 5123,
            uint32: 5125,
            'float': 5126,
            float32: 5126
        }, hb = {
            dynamic: 35048,
            stream: 35040,
            'static': 35044
        }, Pa = La.flatten, fb = La.shape, ga = [];
    ga[5120] = 1;
    ga[5122] = 2;
    ga[5124] = 4;
    ga[5121] = 1;
    ga[5123] = 2;
    ga[5125] = 4;
    ga[5126] = 4;
    var Ra = {
            points: 0,
            point: 0,
            lines: 1,
            line: 1,
            triangles: 4,
            triangle: 4,
            'line loop': 2,
            'line strip': 3,
            'triangle strip': 5,
            'triangle fan': 6
        }, jb = new Float32Array(1), Db = new Uint32Array(jb.buffer), Hb = [
            9984,
            9986,
            9985,
            9987
        ], Ka = [
            0,
            6409,
            6410,
            6407,
            6408
        ], R = {};
    R[6409] = R[6406] = R[6402] = 1;
    R[34041] = R[6410] = 2;
    R[6407] = R[35904] = 3;
    R[6408] = R[35906] = 4;
    var Eb = Object.keys(Ea).concat([
            '[object HTMLCanvasElement]',
            '[object CanvasRenderingContext2D]',
            '[object HTMLImageElement]',
            '[object HTMLVideoElement]'
        ]), za = [];
    za[5121] = 1;
    za[5126] = 4;
    za[36193] = 2;
    za[5123] = 2;
    za[5125] = 4;
    var C = [];
    C[32854] = 2;
    C[32855] = 2;
    C[36194] = 2;
    C[34041] = 4;
    C[33776] = 0.5;
    C[33777] = 0.5;
    C[33778] = 1;
    C[33779] = 1;
    C[35986] = 0.5;
    C[35987] = 1;
    C[34798] = 1;
    C[35840] = 0.5;
    C[35841] = 0.25;
    C[35842] = 0.5;
    C[35843] = 0.25;
    C[36196] = 0.5;
    var L = [];
    L[32854] = 2;
    L[32855] = 2;
    L[36194] = 2;
    L[33189] = 2;
    L[36168] = 1;
    L[34041] = 4;
    L[35907] = 4;
    L[34836] = 16;
    L[34842] = 8;
    L[34843] = 6;
    var Rb = function (a, b, c, d, f) {
            function k(a) {
                this.id = r++;
                this.refCount = 1;
                this.renderbuffer = a;
                this.format = 32854;
                this.height = this.width = 0;
                f.profile && (this.stats = { size: 0 });
            }
            function p(b) {
                var c = b.renderbuffer;
                a.bindRenderbuffer(36161, null);
                a.deleteRenderbuffer(c);
                b.renderbuffer = null;
                b.refCount = 0;
                delete v[b.id];
                d.renderbufferCount--;
            }
            var h = {
                rgba4: 32854,
                rgb565: 36194,
                'rgb5 a1': 32855,
                depth: 33189,
                stencil: 36168,
                'depth stencil': 34041
            };
            b.ext_srgb && (h.srgba = 35907);
            b.ext_color_buffer_half_float && (h.rgba16f = 34842, h.rgb16f = 34843);
            b.webgl_color_buffer_float && (h.rgba32f = 34836);
            var g = [];
            Object.keys(h).forEach(function (a) {
                g[h[a]] = a;
            });
            var r = 0, v = {};
            k.prototype.decRef = function () {
                0 >= --this.refCount && p(this);
            };
            f.profile && (d.getTotalRenderbufferSize = function () {
                var a = 0;
                Object.keys(v).forEach(function (b) {
                    a += v[b].stats.size;
                });
                return a;
            });
            return {
                create: function (b, c) {
                    function m(b, c) {
                        var d = 0, l = 0, k = 32854;
                        'object' === typeof b && b ? ('shape' in b ? (l = b.shape, d = l[0] | 0, l = l[1] | 0) : ('radius' in b && (d = l = b.radius | 0), 'width' in b && (d = b.width | 0), 'height' in b && (l = b.height | 0)), 'format' in b && (k = h[b.format])) : 'number' === typeof b ? (d = b | 0, l = 'number' === typeof c ? c | 0 : d) : b || (d = l = 1);
                        if (d !== e.width || l !== e.height || k !== e.format)
                            return m.width = e.width = d, m.height = e.height = l, e.format = k, a.bindRenderbuffer(36161, e.renderbuffer), a.renderbufferStorage(36161, k, d, l), f.profile && (e.stats.size = L[e.format] * e.width * e.height), m.format = g[e.format], m;
                    }
                    var e = new k(a.createRenderbuffer());
                    v[e.id] = e;
                    d.renderbufferCount++;
                    m(b, c);
                    m.resize = function (b, c) {
                        var d = b | 0, g = c | 0 || d;
                        if (d === e.width && g === e.height)
                            return m;
                        m.width = e.width = d;
                        m.height = e.height = g;
                        a.bindRenderbuffer(36161, e.renderbuffer);
                        a.renderbufferStorage(36161, e.format, d, g);
                        f.profile && (e.stats.size = L[e.format] * e.width * e.height);
                        return m;
                    };
                    m._reglType = 'renderbuffer';
                    m._renderbuffer = e;
                    f.profile && (m.stats = e.stats);
                    m.destroy = function () {
                        e.decRef();
                    };
                    return m;
                },
                clear: function () {
                    H(v).forEach(p);
                },
                restore: function () {
                    H(v).forEach(function (b) {
                        b.renderbuffer = a.createRenderbuffer();
                        a.bindRenderbuffer(36161, b.renderbuffer);
                        a.renderbufferStorage(36161, b.format, b.width, b.height);
                    });
                    a.bindRenderbuffer(36161, null);
                }
            };
        }, ob = [];
    ob[6408] = 4;
    var Ma = [];
    Ma[5121] = 1;
    Ma[5126] = 4;
    Ma[36193] = 2;
    var Da = [
            'x',
            'y',
            'z',
            'w'
        ], Pb = 'blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset'.split(' '), Ga = {
            0: 0,
            1: 1,
            zero: 0,
            one: 1,
            'src color': 768,
            'one minus src color': 769,
            'src alpha': 770,
            'one minus src alpha': 771,
            'dst color': 774,
            'one minus dst color': 775,
            'dst alpha': 772,
            'one minus dst alpha': 773,
            'constant color': 32769,
            'one minus constant color': 32770,
            'constant alpha': 32771,
            'one minus constant alpha': 32772,
            'src alpha saturate': 776
        }, Ua = {
            never: 512,
            less: 513,
            '<': 513,
            equal: 514,
            '=': 514,
            '==': 514,
            '===': 514,
            lequal: 515,
            '<=': 515,
            greater: 516,
            '>': 516,
            notequal: 517,
            '!=': 517,
            '!==': 517,
            gequal: 518,
            '>=': 518,
            always: 519
        }, Oa = {
            0: 0,
            zero: 0,
            keep: 7680,
            replace: 7681,
            increment: 7682,
            decrement: 7683,
            'increment wrap': 34055,
            'decrement wrap': 34056,
            invert: 5386
        }, rb = {
            cw: 2304,
            ccw: 2305
        }, sb = new Y(!1, !1, !1, function () {
        }), Sb = function (a, b) {
            function c() {
                this.endQueryIndex = this.startQueryIndex = -1;
                this.sum = 0;
                this.stats = null;
            }
            function d(a, b, d) {
                var e = h.pop() || new c();
                e.startQueryIndex = a;
                e.endQueryIndex = b;
                e.sum = 0;
                e.stats = d;
                g.push(e);
            }
            var f = b.ext_disjoint_timer_query;
            if (!f)
                return null;
            var k = [], p = [], h = [], g = [], r = [], v = [];
            return {
                beginQuery: function (a) {
                    var b = k.pop() || f.createQueryEXT();
                    f.beginQueryEXT(35007, b);
                    p.push(b);
                    d(p.length - 1, p.length, a);
                },
                endQuery: function () {
                    f.endQueryEXT(35007);
                },
                pushScopeStats: d,
                update: function () {
                    var a, b;
                    a = p.length;
                    if (0 !== a) {
                        v.length = Math.max(v.length, a + 1);
                        r.length = Math.max(r.length, a + 1);
                        r[0] = 0;
                        var c = v[0] = 0;
                        for (b = a = 0; b < p.length; ++b) {
                            var e = p[b];
                            f.getQueryObjectEXT(e, 34919) ? (c += f.getQueryObjectEXT(e, 34918), k.push(e)) : p[a++] = e;
                            r[b + 1] = c;
                            v[b + 1] = a;
                        }
                        p.length = a;
                        for (b = a = 0; b < g.length; ++b) {
                            var c = g[b], d = c.startQueryIndex, e = c.endQueryIndex;
                            c.sum += r[e] - r[d];
                            d = v[d];
                            e = v[e];
                            e === d ? (c.stats.gpuTime += c.sum / 1000000, h.push(c)) : (c.startQueryIndex = d, c.endQueryIndex = e, g[a++] = c);
                        }
                        g.length = a;
                    }
                },
                getNumPendingQueries: function () {
                    return p.length;
                },
                clear: function () {
                    k.push.apply(k, p);
                    for (var a = 0; a < k.length; a++)
                        f.deleteQueryEXT(k[a]);
                    p.length = 0;
                    k.length = 0;
                },
                restore: function () {
                    p.length = 0;
                    k.length = 0;
                }
            };
        };
    return function (a) {
        function b() {
            if (0 === E.length)
                x && x.update(), ba = null;
            else {
                ba = Va.next(b);
                v();
                for (var a = E.length - 1; 0 <= a; --a) {
                    var c = E[a];
                    c && c(M, null, 0);
                }
                m.flush();
                x && x.update();
            }
        }
        function c() {
            !ba && 0 < E.length && (ba = Va.next(b));
        }
        function d() {
            ba && (Va.cancel(b), ba = null);
        }
        function f(a) {
            a.preventDefault();
            d();
            S.forEach(function (a) {
                a();
            });
        }
        function k(a) {
            m.getError();
            n.restore();
            N.restore();
            G.restore();
            z.restore();
            L.restore();
            I.restore();
            x && x.restore();
            T.procs.refresh();
            c();
            U.forEach(function (a) {
                a();
            });
        }
        function p(a) {
            function b(a) {
                var c = {}, d = {};
                Object.keys(a).forEach(function (b) {
                    var e = a[b];
                    ia.isDynamic(e) ? d[b] = ia.unbox(e, b) : c[b] = e;
                });
                return {
                    dynamic: d,
                    'static': c
                };
            }
            function c(a) {
                for (; m.length < a;)
                    m.push(null);
                return m;
            }
            var d = b(a.context || {}), e = b(a.uniforms || {}), f = b(a.attributes || {}), g = b(function (a) {
                    function b(a) {
                        if (a in c) {
                            var d = c[a];
                            delete c[a];
                            Object.keys(d).forEach(function (b) {
                                c[a + '.' + b] = d[b];
                            });
                        }
                    }
                    var c = A({}, a);
                    delete c.uniforms;
                    delete c.attributes;
                    delete c.context;
                    'stencil' in c && c.stencil.op && (c.stencil.opBack = c.stencil.opFront = c.stencil.op, delete c.stencil.op);
                    b('blend');
                    b('depth');
                    b('cull');
                    b('stencil');
                    b('polygonOffset');
                    b('scissor');
                    b('sample');
                    return c;
                }(a));
            a = {
                gpuTime: 0,
                cpuTime: 0,
                count: 0
            };
            var d = T.compile(g, f, e, d, a), h = d.draw, k = d.batch, l = d.scope, m = [];
            return A(function (a, b) {
                var d;
                if ('function' === typeof a)
                    return l.call(this, null, a, 0);
                if ('function' === typeof b)
                    if ('number' === typeof a)
                        for (d = 0; d < a; ++d)
                            l.call(this, null, b, d);
                    else if (Array.isArray(a))
                        for (d = 0; d < a.length; ++d)
                            l.call(this, a[d], b, d);
                    else
                        return l.call(this, a, b, 0);
                else if ('number' === typeof a) {
                    if (0 < a)
                        return k.call(this, c(a | 0), a | 0);
                } else if (Array.isArray(a)) {
                    if (a.length)
                        return k.call(this, a, a.length);
                } else
                    return h.call(this, a);
            }, { stats: a });
        }
        function h(a, b) {
            var c = 0;
            T.procs.poll();
            var d = b.color;
            d && (m.clearColor(+d[0] || 0, +d[1] || 0, +d[2] || 0, +d[3] || 0), c |= 16384);
            'depth' in b && (m.clearDepth(+b.depth), c |= 256);
            'stencil' in b && (m.clearStencil(b.stencil | 0), c |= 1024);
            m.clear(c);
        }
        function g(a) {
            E.push(a);
            c();
            return {
                cancel: function () {
                    function b() {
                        var a = tb(E, b);
                        E[a] = E[E.length - 1];
                        --E.length;
                        0 >= E.length && d();
                    }
                    var c = tb(E, a);
                    E[c] = b;
                }
            };
        }
        function r() {
            var a = O.viewport, b = O.scissor_box;
            a[0] = a[1] = b[0] = b[1] = 0;
            M.viewportWidth = M.framebufferWidth = M.drawingBufferWidth = a[2] = b[2] = m.drawingBufferWidth;
            M.viewportHeight = M.framebufferHeight = M.drawingBufferHeight = a[3] = b[3] = m.drawingBufferHeight;
        }
        function v() {
            M.tick += 1;
            M.time = u();
            r();
            T.procs.poll();
        }
        function l() {
            r();
            T.procs.refresh();
            x && x.update();
        }
        function u() {
            return (ub() - C) / 1000;
        }
        a = zb(a);
        if (!a)
            return null;
        var m = a.gl, e = m.getContextAttributes();
        m.isContextLost();
        var n = Ab(m, a);
        if (!n)
            return null;
        var D = wb(), w = {
                bufferCount: 0,
                elementsCount: 0,
                framebufferCount: 0,
                shaderCount: 0,
                textureCount: 0,
                cubeCount: 0,
                renderbufferCount: 0,
                maxTextureUnits: 0
            }, t = n.extensions, x = Sb(m, t), C = ub(), B = m.drawingBufferWidth, J = m.drawingBufferHeight, M = {
                tick: 0,
                time: 0,
                viewportWidth: B,
                viewportHeight: J,
                framebufferWidth: B,
                framebufferHeight: J,
                drawingBufferWidth: B,
                drawingBufferHeight: J,
                pixelRatio: a.pixelRatio
            }, P = Qb(m, t), G = Bb(m, w, a), Q = Cb(m, t, G, w), B = Kb(m, t, P, G, D), N = Lb(m, D, w, a), z = Fb(m, t, P, function () {
                T.procs.poll();
            }, M, w, a), L = Rb(m, t, P, w, a), I = Jb(m, t, P, z, L, w), T = Ob(m, D, t, P, G, Q, z, I, {}, B, N, {
                elements: null,
                primitive: 4,
                count: -1,
                offset: 0,
                instances: -1
            }, M, x, a), D = Mb(m, I, T.procs.poll, M, e, t), O = T.next, H = m.canvas, E = [], S = [], U = [], R = [a.onDestroy], ba = null;
        H && (H.addEventListener('webglcontextlost', f, !1), H.addEventListener('webglcontextrestored', k, !1));
        var Y = I.setFBO = p({ framebuffer: ia.define.call(null, 1, 'framebuffer') });
        l();
        e = A(p, {
            clear: function (a) {
                if ('framebuffer' in a)
                    if (a.framebuffer && 'framebufferCube' === a.framebuffer_reglType)
                        for (var b = 0; 6 > b; ++b)
                            Y(A({ framebuffer: a.framebuffer.faces[b] }, a), h);
                    else
                        Y(a, h);
                else
                    h(null, a);
            },
            prop: ia.define.bind(null, 1),
            context: ia.define.bind(null, 2),
            'this': ia.define.bind(null, 3),
            draw: p({}),
            buffer: function (a) {
                return G.create(a, 34962, !1, !1);
            },
            elements: function (a) {
                return Q.create(a, !1);
            },
            texture: z.create2D,
            cube: z.createCube,
            renderbuffer: L.create,
            framebuffer: I.create,
            framebufferCube: I.createCube,
            attributes: e,
            frame: g,
            on: function (a, b) {
                var c;
                switch (a) {
                case 'frame':
                    return g(b);
                case 'lost':
                    c = S;
                    break;
                case 'restore':
                    c = U;
                    break;
                case 'destroy':
                    c = R;
                }
                c.push(b);
                return {
                    cancel: function () {
                        for (var a = 0; a < c.length; ++a)
                            if (c[a] === b) {
                                c[a] = c[c.length - 1];
                                c.pop();
                                break;
                            }
                    }
                };
            },
            limits: P,
            hasExtension: function (a) {
                return 0 <= P.extensions.indexOf(a.toLowerCase());
            },
            read: D,
            destroy: function () {
                E.length = 0;
                d();
                H && (H.removeEventListener('webglcontextlost', f), H.removeEventListener('webglcontextrestored', k));
                N.clear();
                I.clear();
                L.clear();
                z.clear();
                Q.clear();
                G.clear();
                x && x.clear();
                R.forEach(function (a) {
                    a();
                });
            },
            _gl: m,
            _refresh: l,
            poll: function () {
                v();
                x && x.update();
            },
            now: u,
            stats: w
        });
        a.onDone(null, e);
        return e;
    };
}));
},{}],44:[function(require,module,exports){
'use strict';
module.exports = (red, green, blue, alpha) => {
    const isPercent = (red + (alpha || '')).toString().includes('%');
    if (typeof red === 'string') {
        const res = red.match(/(0?\.?\d{1,3})%?\b/g).map(Number);
        red = res[0];
        green = res[1];
        blue = res[2];
        alpha = res[3];
    } else if (alpha !== undefined) {
        alpha = parseFloat(alpha);
    }
    if (typeof red !== 'number' || typeof green !== 'number' || typeof blue !== 'number' || red > 255 || green > 255 || blue > 255) {
        throw new TypeError('Expected three numbers below 256');
    }
    if (typeof alpha === 'number') {
        if (!isPercent && alpha >= 0 && alpha <= 1) {
            alpha = Math.round(255 * alpha);
        } else if (isPercent && alpha >= 0 && alpha <= 100) {
            alpha = Math.round(255 * alpha / 100);
        } else {
            throw new TypeError(`Expected alpha value (${ alpha }) as a fraction or percentage`);
        }
        alpha = (alpha | 1 << 8).toString(16).slice(1);
    } else {
        alpha = '';
    }
    return (blue | green << 8 | red << 16 | 1 << 24).toString(16).slice(1) + alpha;
};
},{}],45:[function(require,module,exports){
'use strict';
var parseUnit = require('parse-unit');
module.exports = toPX;
var PIXELS_PER_INCH = 96;
function getPropertyInPX(element, prop) {
    var parts = parseUnit(getComputedStyle(element).getPropertyValue(prop));
    return parts[0] * toPX(parts[1], element);
}
function getSizeBrutal(unit, element) {
    var testDIV = document.createElement('div');
    testDIV.style['font-size'] = '128' + unit;
    element.appendChild(testDIV);
    var size = getPropertyInPX(testDIV, 'font-size') / 128;
    element.removeChild(testDIV);
    return size;
}
function toPX(str, element) {
    element = element || document.body;
    str = (str || 'px').trim().toLowerCase();
    if (element === window || element === document) {
        element = document.body;
    }
    switch (str) {
    case '%':
        return element.clientHeight / 100;
    case 'ch':
    case 'ex':
        return getSizeBrutal(str, element);
    case 'em':
        return getPropertyInPX(element, 'font-size');
    case 'rem':
        return getPropertyInPX(document.body, 'font-size');
    case 'vw':
        return window.innerWidth / 100;
    case 'vh':
        return window.innerHeight / 100;
    case 'vmin':
        return Math.min(window.innerWidth, window.innerHeight) / 100;
    case 'vmax':
        return Math.max(window.innerWidth, window.innerHeight) / 100;
    case 'in':
        return PIXELS_PER_INCH;
    case 'cm':
        return PIXELS_PER_INCH / 2.54;
    case 'mm':
        return PIXELS_PER_INCH / 25.4;
    case 'pt':
        return PIXELS_PER_INCH / 72;
    case 'pc':
        return PIXELS_PER_INCH / 6;
    }
    return 1;
}
},{"parse-unit":41}],46:[function(require,module,exports){
'use strict';
function fail(msg) {
    throw new Error('regl-gpgpu-parser:map: ' + msg);
}
module.exports = function (regl, parsedMap) {
    var attributes = {};
    attributes[parsedMap.attrName] = [
        [
            -4,
            -4
        ],
        [
            4,
            -4
        ],
        [
            0,
            4
        ]
    ];
    var uniforms = {};
    var invokeArgs = parsedMap.invokeArgs;
    for (var i = 0; i < invokeArgs.length; i++) {
        uniforms[invokeArgs[i]] = regl.prop(invokeArgs[i]);
    }
    uniforms[parsedMap.duProp] = function (context) {
        return 1 / context.framebufferWidth;
    };
    uniforms[parsedMap.dvProp] = function (context) {
        return 1 / context.framebufferHeight;
    };
    var op = regl({
        frag: parsedMap.frag,
        vert: parsedMap.vert,
        framebuffer: regl.prop(parsedMap.destProp),
        attributes: attributes,
        uniforms: uniforms,
        depth: { enable: false },
        count: 3
    });
    function compute(args, reps) {
        if (args.length - 1 !== invokeArgs.length) {
            fail('Number of args provided (' + args.length + ') does not equal number of args expected (' + (invokeArgs.length + 1) + ').');
        }
        var i;
        var props = {};
        reps = reps || 1;
        for (var rep = 0; rep < reps; rep++) {
            props[parsedMap.destProp] = args[0];
            for (var i = 1; i < args.length; i++) {
                props[invokeArgs[i - 1]] = args[i];
            }
            op(props);
            if (parsedMap.permute) {
                var p = parsedMap.permute;
                var tmp = [];
                for (i = 0; i < p.length; i++) {
                    tmp[i] = args[p[i]];
                }
                for (i = 0; i < p.length; i++) {
                    args[i] = tmp[i];
                }
            }
        }
    }
    compute.destroy = function () {
        if (!op)
            return;
        op.destroy();
        op = null;
    };
    return compute;
};
},{}],47:[function(require,module,exports){
'use strict';
var parseMap = require('./parsers/map');
var compileMap = require('./compilers/map');
var gpuArray = require('./lib/array');
module.exports = function (regl) {
    return {
        map: function (args) {
            return compileMap(regl, parseMap(args));
        },
        array: function (data, shape, opts) {
            return gpuArray(regl, data, shape, opts);
        }
    };
};
},{"./compilers/map":46,"./lib/array":48,"./parsers/map":66}],48:[function(require,module,exports){
'use strict';
module.exports = gpuArray;
var isndarray = require('isndarray');
var ndarray = require('ndarray');
function gpuArray(regl, data, shape, opts) {
    opts = opts || {};
    var dtype = 'float';
    if (!(this instanceof gpuArray)) {
        return new gpuArray(regl, data, shape, opts);
    }
    if (Array.isArray(data)) {
        data = new Float32Array(data);
    }
    if (isndarray(data) && !Array.isArray(shape)) {
        shape = data.shape;
        if (data.dtype === 'float32') {
            dtype = 'float';
            data = ndarray(new Float32Array(data.data), data.shape, data.stride, data.offset);
        } else if (data.dtype = 'uint8') {
            dtype = 'uint8';
            data = ndarray(data.data, data.shape, data.stride, data.offset);
        } else {
            throw new Error('data must be uint8 or float32');
        }
    }
    if (shape.length !== 3 || shape[2] !== 4) {
        throw new Error('gpuArray shape must be m x n x 4');
    }
    var n = shape.slice(0, 2).reduce(function (a, b) {
        return a * b;
    }, 1);
    if (!data || typeof data === 'function') {
        var fn = data;
        data = new Float32Array(n * 4);
    }
    if (typeof fn === 'function') {
        var ni = shape[0];
        var nj = shape[1];
        for (var j = 0; j < nj; j++) {
            for (var i = 0; i < ni; i++) {
                var value = fn(i, j);
                var idx = 4 * (i + ni * j);
                data[idx] = value[0];
                data[idx + 1] = value[1];
                data[idx + 2] = value[2];
                data[idx + 3] = value[3];
            }
        }
    }
    var fullShape = shape.slice(0, 2).concat([4]);
    var tex = regl.texture({
        data: data,
        width: shape[0],
        height: shape[1],
        wrapS: opts.xboundary || 'clamp',
        wrapT: opts.yboundary || 'clamp',
        mag: opts.magfilter || 'nearest',
        min: opts.minfilter || 'nearest'
    });
    var fbo = regl.framebuffer({
        color: tex,
        colorFormat: 'rgba',
        colorType: dtype
    });
    var origDestroy = fbo.destroy.bind(fbo);
    fbo.update = function (data) {
        tex({ data: data });
    };
    fbo.read = function (opts) {
        var a;
        fbo.use(function () {
            a = regl.read(opts);
        });
        return ndarray(a, fullShape);
    };
    fbo.readraw = function (opts) {
        var a;
        fbo.use(function () {
            a = regl.read(opts);
        });
        return a;
    };
    fbo.destroy = function () {
        origDestroy();
        tex.destroy();
    };
    fbo.texture = tex;
    fbo.samplerCoords = function () {
        var xy = [];
        for (var i = 0; i < n; i++) {
            xy.push([
                i % shape[0] / Math.max(1, shape[0] - 1),
                Math.floor(i / shape[0]) / Math.max(1, shape[1] - 1)
            ]);
        }
        return regl.buffer(xy);
    };
    return fbo;
}
},{"isndarray":64,"ndarray":65}],49:[function(require,module,exports){
'use strict';
var tokenize = require('glsl-tokenizer/string');
var parse = require('glsl-parser/direct');
module.exports = function (shader, funcName) {
    var tokens = tokenize(shader);
    var ast = parse(tokens);
    var funcNode = locateFunction(ast, funcName);
    if (!funcNode) {
        throw Error('fragment shader was expected to define a ' + funcName + '() function');
    }
    return parseComputeFunction(funcNode);
};
function locateFunction(node, name) {
    var ret = void 0;
    if (node.type === 'ident' && node.token.data === name && node.parent && node.parent.type === 'function') {
        return node.parent;
    } else {
        for (var i = 0; i < node.children.length; i++) {
            ret = locateFunction(node.children[i], name);
            if (ret)
                break;
        }
        return ret;
    }
}
function findNode(node, qualifiers) {
    var children = node.children;
    var keys = Object.keys(qualifiers);
    for (var i = 0; i < children.length; i++) {
        for (var j = 0; j < keys.length; j++) {
            if (children[i][keys[j]] === qualifiers[keys[j]]) {
                return children[i];
            }
        }
    }
}
function findNodes(node, qualifiers) {
    var nodes = [];
    var children = node.children;
    var keys = Object.keys(qualifiers);
    for (var i = 0; i < children.length; i++) {
        for (var j = 0; j < keys.length; j++) {
            if (children[i][keys[j]] === qualifiers[keys[j]]) {
                nodes.push(children[i]);
            }
        }
    }
    return nodes;
}
function parseComputeFunction(node) {
    var args = [];
    var functionargs = findNode(node, { type: 'functionargs' });
    var decls = findNodes(functionargs, { type: 'decl' });
    for (var i = 0; i < decls.length; i++) {
        var decl = decls[i];
        var kwd = findNode(decl, { type: 'keyword' });
        var decllist = findNode(decl, { type: 'decllist' });
        var ident = findNode(decllist, { type: 'ident' });
        args.push({
            type: kwd.token.data,
            name: ident.token.data
        });
    }
    return args;
}
},{"glsl-parser/direct":51,"glsl-tokenizer/string":61}],50:[function(require,module,exports){
'use strict';
module.exports = function (hashLength) {
    function randomStr() {
        var text = '';
        var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        for (var i = 0; i < hashLength; i++) {
            text += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        return text;
    }
    var allNames = {};
    function uniqAttr(name) {
        var pname;
        do {
            allNames[pname] = pname = name + (hashLength > 0 ? '_' + randomStr() : '');
        } while (!pname && (pname = allNames[pname]));
        return pname;
    }
    return uniqAttr;
};
},{}],51:[function(require,module,exports){
var parse = require('./lib/index');
module.exports = parseArray;
function parseArray(tokens) {
    var parser = parse();
    for (var i = 0; i < tokens.length; i++) {
        parser(tokens[i]);
    }
    return parser(null);
}
},{"./lib/index":53}],52:[function(require,module,exports){
var state, token, tokens, idx;
var original_symbol = {
    nud: function () {
        return this.children && this.children.length ? this : fail('unexpected')();
    },
    led: fail('missing operator')
};
var symbol_table = {};
function itself() {
    return this;
}
symbol('(ident)').nud = itself;
symbol('(keyword)').nud = itself;
symbol('(builtin)').nud = itself;
symbol('(literal)').nud = itself;
symbol('(end)');
symbol(':');
symbol(';');
symbol(',');
symbol(')');
symbol(']');
symbol('}');
infixr('&&', 30);
infixr('||', 30);
infix('|', 43);
infix('^', 44);
infix('&', 45);
infix('==', 46);
infix('!=', 46);
infix('<', 47);
infix('<=', 47);
infix('>', 47);
infix('>=', 47);
infix('>>', 48);
infix('<<', 48);
infix('+', 50);
infix('-', 50);
infix('*', 60);
infix('/', 60);
infix('%', 60);
infix('?', 20, function (left) {
    this.children = [
        left,
        expression(0),
        (advance(':'), expression(0))
    ];
    this.type = 'ternary';
    return this;
});
infix('.', 80, function (left) {
    token.type = 'literal';
    state.fake(token);
    this.children = [
        left,
        token
    ];
    advance();
    return this;
});
infix('[', 80, function (left) {
    this.children = [
        left,
        expression(0)
    ];
    this.type = 'binary';
    advance(']');
    return this;
});
infix('(', 80, function (left) {
    this.children = [left];
    this.type = 'call';
    if (token.data !== ')')
        while (1) {
            this.children.push(expression(0));
            if (token.data !== ',')
                break;
            advance(',');
        }
    advance(')');
    return this;
});
prefix('-');
prefix('+');
prefix('!');
prefix('~');
prefix('defined');
prefix('(', function () {
    this.type = 'group';
    this.children = [expression(0)];
    advance(')');
    return this;
});
prefix('++');
prefix('--');
suffix('++');
suffix('--');
assignment('=');
assignment('+=');
assignment('-=');
assignment('*=');
assignment('/=');
assignment('%=');
assignment('&=');
assignment('|=');
assignment('^=');
assignment('>>=');
assignment('<<=');
module.exports = function (incoming_state, incoming_tokens) {
    state = incoming_state;
    tokens = incoming_tokens;
    idx = 0;
    var result;
    if (!tokens.length)
        return;
    advance();
    result = expression(0);
    result.parent = state[0];
    emit(result);
    if (idx < tokens.length) {
        throw new Error('did not use all tokens');
    }
    result.parent.children = [result];
    function emit(node) {
        state.unshift(node, false);
        for (var i = 0, len = node.children.length; i < len; ++i) {
            emit(node.children[i]);
        }
        state.shift();
    }
};
function symbol(id, binding_power) {
    var sym = symbol_table[id];
    binding_power = binding_power || 0;
    if (sym) {
        if (binding_power > sym.lbp) {
            sym.lbp = binding_power;
        }
    } else {
        sym = Object.create(original_symbol);
        sym.id = id;
        sym.lbp = binding_power;
        symbol_table[id] = sym;
    }
    return sym;
}
function expression(rbp) {
    var left, t = token;
    advance();
    left = t.nud();
    while (rbp < token.lbp) {
        t = token;
        advance();
        left = t.led(left);
    }
    return left;
}
function infix(id, bp, led) {
    var sym = symbol(id, bp);
    sym.led = led || function (left) {
        this.children = [
            left,
            expression(bp)
        ];
        this.type = 'binary';
        return this;
    };
}
function infixr(id, bp, led) {
    var sym = symbol(id, bp);
    sym.led = led || function (left) {
        this.children = [
            left,
            expression(bp - 1)
        ];
        this.type = 'binary';
        return this;
    };
    return sym;
}
function prefix(id, nud) {
    var sym = symbol(id);
    sym.nud = nud || function () {
        this.children = [expression(70)];
        this.type = 'unary';
        return this;
    };
    return sym;
}
function suffix(id) {
    var sym = symbol(id, 150);
    sym.led = function (left) {
        this.children = [left];
        this.type = 'suffix';
        return this;
    };
}
function assignment(id) {
    return infixr(id, 10, function (left) {
        this.children = [
            left,
            expression(9)
        ];
        this.assignment = true;
        this.type = 'assign';
        return this;
    });
}
function advance(id) {
    var next, value, type, output;
    if (id && token.data !== id) {
        return state.unexpected('expected `' + id + '`, got `' + token.data + '`');
    }
    if (idx >= tokens.length) {
        token = symbol_table['(end)'];
        return;
    }
    next = tokens[idx++];
    value = next.data;
    type = next.type;
    if (type === 'ident') {
        output = state.scope.find(value) || state.create_node();
        type = output.type;
    } else if (type === 'builtin') {
        output = symbol_table['(builtin)'];
    } else if (type === 'keyword') {
        output = symbol_table['(keyword)'];
    } else if (type === 'operator') {
        output = symbol_table[value];
        if (!output) {
            return state.unexpected('unknown operator `' + value + '`');
        }
    } else if (type === 'float' || type === 'integer') {
        type = 'literal';
        output = symbol_table['(literal)'];
    } else {
        return state.unexpected('unexpected token.');
    }
    if (output) {
        if (!output.nud) {
            output.nud = itself;
        }
        if (!output.children) {
            output.children = [];
        }
    }
    output = Object.create(output);
    output.token = next;
    output.type = type;
    if (!output.data)
        output.data = value;
    return token = output;
}
function fail(message) {
    return function () {
        return state.unexpected(message);
    };
}
},{}],53:[function(require,module,exports){
module.exports = parser;
var full_parse_expr = require('./expr'), Scope = require('./scope');
var Advance = new Object();
var DEBUG = false;
var _ = 0, IDENT = _++, STMT = _++, STMTLIST = _++, STRUCT = _++, FUNCTION = _++, FUNCTIONARGS = _++, DECL = _++, DECLLIST = _++, FORLOOP = _++, WHILELOOP = _++, IF = _++, EXPR = _++, PRECISION = _++, COMMENT = _++, PREPROCESSOR = _++, KEYWORD = _++, KEYWORD_OR_IDENT = _++, RETURN = _++, BREAK = _++, CONTINUE = _++, DISCARD = _++, DOWHILELOOP = _++, PLACEHOLDER = _++, QUANTIFIER = _++;
var DECL_ALLOW_ASSIGN = 1, DECL_ALLOW_COMMA = 2, DECL_REQUIRE_NAME = 4, DECL_ALLOW_INVARIANT = 8, DECL_ALLOW_STORAGE = 16, DECL_NO_INOUT = 32, DECL_ALLOW_STRUCT = 64, DECL_STATEMENT = 255, DECL_FUNCTION = DECL_STATEMENT & ~(DECL_ALLOW_ASSIGN | DECL_ALLOW_COMMA | DECL_NO_INOUT | DECL_ALLOW_INVARIANT | DECL_REQUIRE_NAME), DECL_STRUCT = DECL_STATEMENT & ~(DECL_ALLOW_ASSIGN | DECL_ALLOW_INVARIANT | DECL_ALLOW_STORAGE | DECL_ALLOW_STRUCT);
var QUALIFIERS = [
    'const',
    'attribute',
    'uniform',
    'varying'
];
var NO_ASSIGN_ALLOWED = false, NO_COMMA_ALLOWED = false;
var token_map = {
    'block-comment': COMMENT,
    'line-comment': COMMENT,
    'preprocessor': PREPROCESSOR
};
var stmt_type = _ = [
    'ident',
    'stmt',
    'stmtlist',
    'struct',
    'function',
    'functionargs',
    'decl',
    'decllist',
    'forloop',
    'whileloop',
    'if',
    'expr',
    'precision',
    'comment',
    'preprocessor',
    'keyword',
    'keyword_or_ident',
    'return',
    'break',
    'continue',
    'discard',
    'do-while',
    'placeholder',
    'quantifier'
];
function parser() {
    var stmtlist = n(STMTLIST), stmt = n(STMT), decllist = n(DECLLIST), precision = n(PRECISION), ident = n(IDENT), keyword_or_ident = n(KEYWORD_OR_IDENT), fn = n(FUNCTION), fnargs = n(FUNCTIONARGS), forstmt = n(FORLOOP), ifstmt = n(IF), whilestmt = n(WHILELOOP), returnstmt = n(RETURN), dowhilestmt = n(DOWHILELOOP), quantifier = n(QUANTIFIER);
    var parse_struct, parse_precision, parse_quantifier, parse_forloop, parse_if, parse_return, parse_whileloop, parse_dowhileloop, parse_function, parse_function_args;
    var check = arguments.length ? [].slice.call(arguments) : [], complete = false, ended = false, depth = 0, state = [], nodes = [], tokens = [], whitespace = [], errored = false, program, token, node;
    state.shift = special_shift;
    state.unshift = special_unshift;
    state.fake = special_fake;
    state.unexpected = unexpected;
    state.scope = new Scope(state);
    state.create_node = function () {
        var n = mknode(IDENT, token);
        n.parent = reader.program;
        return n;
    };
    setup_stative_parsers();
    node = stmtlist();
    node.expecting = '(eof)';
    node.mode = STMTLIST;
    node.token = {
        type: '(program)',
        data: '(program)'
    };
    program = node;
    reader.program = program;
    reader.scope = function (scope) {
        if (arguments.length === 1) {
            state.scope = scope;
        }
        return state.scope;
    };
    state.unshift(node);
    return reader;
    function reader(data) {
        if (data === null) {
            return end(), program;
        }
        nodes = [];
        write(data);
        return nodes;
    }
    function write(input) {
        if (input.type === 'whitespace' || input.type === 'line-comment' || input.type === 'block-comment') {
            whitespace.push(input);
            return;
        }
        tokens.push(input);
        token = token || tokens[0];
        if (token && whitespace.length) {
            token.preceding = token.preceding || [];
            token.preceding = token.preceding.concat(whitespace);
            whitespace = [];
        }
        while (take())
            switch (state[0].mode) {
            case STMT:
                parse_stmt();
                break;
            case STMTLIST:
                parse_stmtlist();
                break;
            case DECL:
                parse_decl();
                break;
            case DECLLIST:
                parse_decllist();
                break;
            case EXPR:
                parse_expr();
                break;
            case STRUCT:
                parse_struct(true, true);
                break;
            case PRECISION:
                parse_precision();
                break;
            case IDENT:
                parse_ident();
                break;
            case KEYWORD:
                parse_keyword();
                break;
            case KEYWORD_OR_IDENT:
                parse_keyword_or_ident();
                break;
            case FUNCTION:
                parse_function();
                break;
            case FUNCTIONARGS:
                parse_function_args();
                break;
            case FORLOOP:
                parse_forloop();
                break;
            case WHILELOOP:
                parse_whileloop();
                break;
            case DOWHILELOOP:
                parse_dowhileloop();
                break;
            case RETURN:
                parse_return();
                break;
            case IF:
                parse_if();
                break;
            case QUANTIFIER:
                parse_quantifier();
                break;
            }
    }
    function end(tokens) {
        if (arguments.length) {
            write(tokens);
        }
        if (state.length > 1) {
            unexpected('unexpected EOF');
            return;
        }
        complete = true;
    }
    function take() {
        if (errored || !state.length)
            return false;
        return token = tokens[0];
    }
    function special_fake(x) {
        state.unshift(x);
        state.shift();
    }
    function special_unshift(_node, add_child) {
        _node.parent = state[0];
        var ret = [].unshift.call(this, _node);
        add_child = add_child === undefined ? true : add_child;
        if (DEBUG) {
            var pad = '';
            for (var i = 0, len = this.length - 1; i < len; ++i) {
                pad += ' |';
            }
            console.log(pad, '\\' + _node.type, _node.token.data);
        }
        if (add_child && node !== _node)
            node.children.push(_node);
        node = _node;
        return ret;
    }
    function special_shift() {
        var _node = [].shift.call(this), okay = check[this.length], emit = false;
        if (DEBUG) {
            var pad = '';
            for (var i = 0, len = this.length; i < len; ++i) {
                pad += ' |';
            }
            console.log(pad, '/' + _node.type);
        }
        if (check.length) {
            if (typeof check[0] === 'function') {
                emit = check[0](_node);
            } else if (okay !== undefined) {
                emit = okay.test ? okay.test(_node.type) : okay === _node.type;
            }
        } else {
            emit = true;
        }
        if (emit && !errored)
            nodes.push(_node);
        node = _node.parent;
        return _node;
    }
    function parse_stmtlist() {
        return stative(function () {
            state.scope.enter();
            return Advance;
        }, normal_mode)();
        function normal_mode() {
            if (token.data === state[0].expecting) {
                return state.scope.exit(), state.shift();
            }
            switch (token.type) {
            case 'preprocessor':
                state.fake(adhoc());
                tokens.shift();
                return;
            default:
                state.unshift(stmt());
                return;
            }
        }
    }
    function parse_stmt() {
        if (state[0].brace) {
            if (token.data !== '}') {
                return unexpected('expected `}`, got ' + token.data);
            }
            state[0].brace = false;
            return tokens.shift(), state.shift();
        }
        switch (token.type) {
        case 'eof':
            return got_eof();
        case 'keyword':
            switch (token.data) {
            case 'for':
                return state.unshift(forstmt());
            case 'if':
                return state.unshift(ifstmt());
            case 'while':
                return state.unshift(whilestmt());
            case 'do':
                return state.unshift(dowhilestmt());
            case 'break':
                return state.fake(mknode(BREAK, token)), tokens.shift();
            case 'continue':
                return state.fake(mknode(CONTINUE, token)), tokens.shift();
            case 'discard':
                return state.fake(mknode(DISCARD, token)), tokens.shift();
            case 'return':
                return state.unshift(returnstmt());
            case 'precision':
                return state.unshift(precision());
            }
            return state.unshift(decl(DECL_STATEMENT));
        case 'ident':
            var lookup;
            if (lookup = state.scope.find(token.data)) {
                if (lookup.parent.type === 'struct') {
                    return state.unshift(decl(DECL_STATEMENT));
                }
                return state.unshift(expr(';'));
            }
        case 'operator':
            if (token.data === '{') {
                state[0].brace = true;
                var n = stmtlist();
                n.expecting = '}';
                return tokens.shift(), state.unshift(n);
            }
            if (token.data === ';') {
                return tokens.shift(), state.shift();
            }
        default:
            return state.unshift(expr(';'));
        }
    }
    function got_eof() {
        if (ended)
            errored = true;
        ended = true;
        return state.shift();
    }
    function parse_decl() {
        var stmt = state[0];
        return stative(invariant_or_not, storage_or_not, parameter_or_not, precision_or_not, struct_or_type, maybe_name, maybe_lparen, is_decllist, done)();
        function invariant_or_not() {
            if (token.data === 'invariant') {
                if (stmt.flags & DECL_ALLOW_INVARIANT) {
                    state.unshift(keyword());
                    return Advance;
                } else {
                    return unexpected('`invariant` is not allowed here');
                }
            } else {
                state.fake(mknode(PLACEHOLDER, {
                    data: '',
                    position: token.position
                }));
                return Advance;
            }
        }
        function storage_or_not() {
            if (is_storage(token)) {
                if (stmt.flags & DECL_ALLOW_STORAGE) {
                    state.unshift(keyword());
                    return Advance;
                } else {
                    return unexpected('storage is not allowed here');
                }
            } else {
                state.fake(mknode(PLACEHOLDER, {
                    data: '',
                    position: token.position
                }));
                return Advance;
            }
        }
        function parameter_or_not() {
            if (is_parameter(token)) {
                if (!(stmt.flags & DECL_NO_INOUT)) {
                    state.unshift(keyword());
                    return Advance;
                } else {
                    return unexpected('parameter is not allowed here');
                }
            } else {
                state.fake(mknode(PLACEHOLDER, {
                    data: '',
                    position: token.position
                }));
                return Advance;
            }
        }
        function precision_or_not() {
            if (is_precision(token)) {
                state.unshift(keyword());
                return Advance;
            } else {
                state.fake(mknode(PLACEHOLDER, {
                    data: '',
                    position: token.position
                }));
                return Advance;
            }
        }
        function struct_or_type() {
            if (token.data === 'struct') {
                if (!(stmt.flags & DECL_ALLOW_STRUCT)) {
                    return unexpected('cannot nest structs');
                }
                state.unshift(struct());
                return Advance;
            }
            if (token.type === 'keyword') {
                state.unshift(keyword());
                return Advance;
            }
            var lookup = state.scope.find(token.data);
            if (lookup) {
                state.fake(Object.create(lookup));
                tokens.shift();
                return Advance;
            }
            return unexpected('expected user defined type, struct or keyword, got ' + token.data);
        }
        function maybe_name() {
            if (token.data === ',' && !(stmt.flags & DECL_ALLOW_COMMA)) {
                return state.shift();
            }
            if (token.data === '[') {
                state.unshift(quantifier());
                return;
            }
            if (token.data === ')')
                return state.shift();
            if (token.data === ';') {
                return stmt.stage + 3;
            }
            if (token.type !== 'ident' && token.type !== 'builtin') {
                return unexpected('expected identifier, got ' + token.data);
            }
            stmt.collected_name = tokens.shift();
            return Advance;
        }
        function maybe_lparen() {
            if (token.data === '(') {
                tokens.unshift(stmt.collected_name);
                delete stmt.collected_name;
                state.unshift(fn());
                return stmt.stage + 2;
            }
            return Advance;
        }
        function is_decllist() {
            tokens.unshift(stmt.collected_name);
            delete stmt.collected_name;
            state.unshift(decllist());
            return Advance;
        }
        function done() {
            return state.shift();
        }
    }
    function parse_decllist() {
        if (token.type === 'ident') {
            var name = token.data;
            state.unshift(ident());
            state.scope.define(name);
            return;
        }
        if (token.type === 'operator') {
            if (token.data === ',') {
                if (!(state[1].flags & DECL_ALLOW_COMMA)) {
                    return state.shift();
                }
                return tokens.shift();
            } else if (token.data === '=') {
                if (!(state[1].flags & DECL_ALLOW_ASSIGN))
                    return unexpected('`=` is not allowed here.');
                tokens.shift();
                state.unshift(expr(',', ';'));
                return;
            } else if (token.data === '[') {
                state.unshift(quantifier());
                return;
            }
        }
        return state.shift();
    }
    function parse_keyword_or_ident() {
        if (token.type === 'keyword') {
            state[0].type = 'keyword';
            state[0].mode = KEYWORD;
            return;
        }
        if (token.type === 'ident') {
            state[0].type = 'ident';
            state[0].mode = IDENT;
            return;
        }
        return unexpected('expected keyword or user-defined name, got ' + token.data);
    }
    function parse_keyword() {
        if (token.type !== 'keyword') {
            return unexpected('expected keyword, got ' + token.data);
        }
        return state.shift(), tokens.shift();
    }
    function parse_ident() {
        if (token.type !== 'ident') {
            return unexpected('expected user-defined name, got ' + token.data);
        }
        state[0].data = token.data;
        return state.shift(), tokens.shift();
    }
    function parse_expr() {
        var expecting = state[0].expecting;
        state[0].tokens = state[0].tokens || [];
        if (state[0].parenlevel === undefined) {
            state[0].parenlevel = 0;
            state[0].bracelevel = 0;
        }
        if (state[0].parenlevel < 1 && expecting.indexOf(token.data) > -1) {
            return parseexpr(state[0].tokens);
        }
        if (token.data === '(') {
            ++state[0].parenlevel;
        } else if (token.data === ')') {
            --state[0].parenlevel;
        }
        switch (token.data) {
        case '{':
            ++state[0].bracelevel;
            break;
        case '}':
            --state[0].bracelevel;
            break;
        case '(':
            ++state[0].parenlevel;
            break;
        case ')':
            --state[0].parenlevel;
            break;
        }
        if (state[0].parenlevel < 0)
            return unexpected('unexpected `)`');
        if (state[0].bracelevel < 0)
            return unexpected('unexpected `}`');
        state[0].tokens.push(tokens.shift());
        return;
        function parseexpr(tokens) {
            try {
                full_parse_expr(state, tokens);
            } catch (err) {
                errored = true;
                throw err;
            }
            return state.shift();
        }
    }
    function n(type) {
        return function () {
            return mknode(type, token);
        };
    }
    function adhoc() {
        return mknode(token_map[token.type], token, node);
    }
    function decl(flags) {
        var _ = mknode(DECL, token, node);
        _.flags = flags;
        return _;
    }
    function struct(allow_assign, allow_comma) {
        var _ = mknode(STRUCT, token, node);
        _.allow_assign = allow_assign === undefined ? true : allow_assign;
        _.allow_comma = allow_comma === undefined ? true : allow_comma;
        return _;
    }
    function expr() {
        var n = mknode(EXPR, token, node);
        n.expecting = [].slice.call(arguments);
        return n;
    }
    function keyword(default_value) {
        var t = token;
        if (default_value) {
            t = {
                'type': '(implied)',
                data: '(default)',
                position: t.position
            };
        }
        return mknode(KEYWORD, t, node);
    }
    function unexpected(str) {
        errored = true;
        throw new Error((str || 'unexpected ' + state) + ' at line ' + state[0].token.line);
    }
    function assert(type, data) {
        return 1, assert_null_string_or_array(type, token.type) && assert_null_string_or_array(data, token.data);
    }
    function assert_null_string_or_array(x, y) {
        switch (typeof x) {
        case 'string':
            if (y !== x) {
                unexpected('expected `' + x + '`, got ' + y + '\n' + token.data);
            }
            return !errored;
        case 'object':
            if (x && x.indexOf(y) === -1) {
                unexpected('expected one of `' + x.join('`, `') + '`, got ' + y);
            }
            return !errored;
        }
        return true;
    }
    function stative() {
        var steps = [].slice.call(arguments), step, result;
        return function () {
            var current = state[0];
            current.stage || (current.stage = 0);
            step = steps[current.stage];
            if (!step)
                return unexpected('parser in undefined state!');
            result = step();
            if (result === Advance)
                return ++current.stage;
            if (result === undefined)
                return;
            current.stage = result;
        };
    }
    function advance(op, t) {
        t = t || 'operator';
        return function () {
            if (!assert(t, op))
                return;
            var last = tokens.shift(), children = state[0].children, last_node = children[children.length - 1];
            if (last_node && last_node.token && last.preceding) {
                last_node.token.succeeding = last_node.token.succeeding || [];
                last_node.token.succeeding = last_node.token.succeeding.concat(last.preceding);
            }
            return Advance;
        };
    }
    function advance_expr(until) {
        return function () {
            state.unshift(expr(until));
            return Advance;
        };
    }
    function advance_ident(declare) {
        return declare ? function () {
            var name = token.data;
            return assert('ident') && (state.unshift(ident()), state.scope.define(name), Advance);
        } : function () {
            if (!assert('ident'))
                return;
            var s = Object.create(state.scope.find(token.data));
            s.token = token;
            return tokens.shift(), Advance;
        };
    }
    function advance_stmtlist() {
        return function () {
            var n = stmtlist();
            n.expecting = '}';
            return state.unshift(n), Advance;
        };
    }
    function maybe_stmtlist(skip) {
        return function () {
            var current = state[0].stage;
            if (token.data !== '{') {
                return state.unshift(stmt()), current + skip;
            }
            return tokens.shift(), Advance;
        };
    }
    function popstmt() {
        return function () {
            return state.shift(), state.shift();
        };
    }
    function setup_stative_parsers() {
        parse_struct = stative(advance('struct', 'keyword'), function () {
            if (token.data === '{') {
                state.fake(mknode(IDENT, {
                    data: '',
                    position: token.position,
                    type: 'ident'
                }));
                return Advance;
            }
            return advance_ident(true)();
        }, function () {
            state.scope.enter();
            return Advance;
        }, advance('{'), function () {
            if (token.type === 'preprocessor') {
                state.fake(adhoc());
                tokens.shift();
                return;
            }
            if (token.data === '}') {
                state.scope.exit();
                tokens.shift();
                return state.shift();
            }
            if (token.data === ';') {
                tokens.shift();
                return;
            }
            state.unshift(decl(DECL_STRUCT));
        });
        parse_precision = stative(function () {
            return tokens.shift(), Advance;
        }, function () {
            return assert('keyword', [
                'lowp',
                'mediump',
                'highp'
            ]) && (state.unshift(keyword()), Advance);
        }, function () {
            return state.unshift(keyword()), Advance;
        }, function () {
            return state.shift();
        });
        parse_quantifier = stative(advance('['), advance_expr(']'), advance(']'), function () {
            return state.shift();
        });
        parse_forloop = stative(advance('for', 'keyword'), advance('('), function () {
            var lookup;
            if (token.type === 'ident') {
                if (!(lookup = state.scope.find(token.data))) {
                    lookup = state.create_node();
                }
                if (lookup.parent.type === 'struct') {
                    return state.unshift(decl(DECL_STATEMENT)), Advance;
                }
            } else if (token.type === 'builtin' || token.type === 'keyword') {
                return state.unshift(decl(DECL_STATEMENT)), Advance;
            }
            return advance_expr(';')();
        }, advance(';'), advance_expr(';'), advance(';'), advance_expr(')'), advance(')'), maybe_stmtlist(3), advance_stmtlist(), advance('}'), popstmt());
        parse_if = stative(advance('if', 'keyword'), advance('('), advance_expr(')'), advance(')'), maybe_stmtlist(3), advance_stmtlist(), advance('}'), function () {
            if (token.data === 'else') {
                return tokens.shift(), state.unshift(stmt()), Advance;
            }
            return popstmt()();
        }, popstmt());
        parse_return = stative(advance('return', 'keyword'), function () {
            if (token.data === ';')
                return Advance;
            return state.unshift(expr(';')), Advance;
        }, function () {
            tokens.shift(), popstmt()();
        });
        parse_whileloop = stative(advance('while', 'keyword'), advance('('), advance_expr(')'), advance(')'), maybe_stmtlist(3), advance_stmtlist(), advance('}'), popstmt());
        parse_dowhileloop = stative(advance('do', 'keyword'), maybe_stmtlist(3), advance_stmtlist(), advance('}'), advance('while', 'keyword'), advance('('), advance_expr(')'), advance(')'), popstmt());
        parse_function = stative(function () {
            for (var i = 1, len = state.length; i < len; ++i)
                if (state[i].mode === FUNCTION) {
                    return unexpected('function definition is not allowed within another function');
                }
            return Advance;
        }, function () {
            if (!assert('ident'))
                return;
            var name = token.data, lookup = state.scope.find(name);
            state.unshift(ident());
            state.scope.define(name);
            state.scope.enter(lookup ? lookup.scope : null);
            return Advance;
        }, advance('('), function () {
            return state.unshift(fnargs()), Advance;
        }, advance(')'), function () {
            if (token.data === ';') {
                return state.scope.exit(), state.shift(), state.shift();
            }
            return Advance;
        }, advance('{'), advance_stmtlist(), advance('}'), function () {
            state.scope.exit();
            return Advance;
        }, function () {
            return state.shift(), state.shift(), state.shift();
        });
        parse_function_args = stative(function () {
            if (token.data === 'void') {
                state.fake(keyword());
                tokens.shift();
                return Advance;
            }
            if (token.data === ')') {
                state.shift();
                return;
            }
            if (token.data === 'struct') {
                state.unshift(struct(NO_ASSIGN_ALLOWED, NO_COMMA_ALLOWED));
                return Advance;
            }
            state.unshift(decl(DECL_FUNCTION));
            return Advance;
        }, function () {
            if (token.data === ',') {
                tokens.shift();
                return 0;
            }
            if (token.data === ')') {
                state.shift();
                return;
            }
            unexpected('expected one of `,` or `)`, got ' + token.data);
        });
    }
}
function mknode(mode, sourcetoken) {
    return {
        mode: mode,
        token: sourcetoken,
        children: [],
        type: stmt_type[mode],
        id: (Math.random() * 4294967295).toString(16)
    };
}
function is_storage(token) {
    return token.data === 'const' || token.data === 'attribute' || token.data === 'uniform' || token.data === 'varying';
}
function is_parameter(token) {
    return token.data === 'in' || token.data === 'inout' || token.data === 'out';
}
function is_precision(token) {
    return token.data === 'highp' || token.data === 'mediump' || token.data === 'lowp';
}
},{"./expr":52,"./scope":54}],54:[function(require,module,exports){
module.exports = scope;
function scope(state) {
    if (this.constructor !== scope)
        return new scope(state);
    this.state = state;
    this.scopes = [];
    this.current = null;
}
var cons = scope, proto = cons.prototype;
proto.enter = function (s) {
    this.scopes.push(this.current = this.state[0].scope = s || {});
};
proto.exit = function () {
    this.scopes.pop();
    this.current = this.scopes[this.scopes.length - 1];
};
proto.define = function (str) {
    this.current[str] = this.state[0];
};
proto.find = function (name, fail) {
    for (var i = this.scopes.length - 1; i > -1; --i) {
        if (this.scopes[i].hasOwnProperty(name)) {
            return this.scopes[i][name];
        }
    }
    return null;
};
},{}],55:[function(require,module,exports){
module.exports = tokenize;
var literals100 = require('./lib/literals'), operators = require('./lib/operators'), builtins100 = require('./lib/builtins'), literals300es = require('./lib/literals-300es'), builtins300es = require('./lib/builtins-300es');
var NORMAL = 999, TOKEN = 9999, BLOCK_COMMENT = 0, LINE_COMMENT = 1, PREPROCESSOR = 2, OPERATOR = 3, INTEGER = 4, FLOAT = 5, IDENT = 6, BUILTIN = 7, KEYWORD = 8, WHITESPACE = 9, EOF = 10, HEX = 11;
var map = [
    'block-comment',
    'line-comment',
    'preprocessor',
    'operator',
    'integer',
    'float',
    'ident',
    'builtin',
    'keyword',
    'whitespace',
    'eof',
    'integer'
];
function tokenize(opt) {
    var i = 0, total = 0, mode = NORMAL, c, last, content = [], tokens = [], token_idx = 0, token_offs = 0, line = 1, col = 0, start = 0, isnum = false, isoperator = false, input = '', len;
    opt = opt || {};
    var allBuiltins = builtins100;
    var allLiterals = literals100;
    if (opt.version === '300 es') {
        allBuiltins = builtins300es;
        allLiterals = literals300es;
    }
    return function (data) {
        tokens = [];
        if (data !== null)
            return write(data.replace ? data.replace(/\r\n/g, '\n') : data);
        return end();
    };
    function token(data) {
        if (data.length) {
            tokens.push({
                type: map[mode],
                data: data,
                position: start,
                line: line,
                column: col
            });
        }
    }
    function write(chunk) {
        i = 0;
        input += chunk;
        len = input.length;
        var last;
        while (c = input[i], i < len) {
            last = i;
            switch (mode) {
            case BLOCK_COMMENT:
                i = block_comment();
                break;
            case LINE_COMMENT:
                i = line_comment();
                break;
            case PREPROCESSOR:
                i = preprocessor();
                break;
            case OPERATOR:
                i = operator();
                break;
            case INTEGER:
                i = integer();
                break;
            case HEX:
                i = hex();
                break;
            case FLOAT:
                i = decimal();
                break;
            case TOKEN:
                i = readtoken();
                break;
            case WHITESPACE:
                i = whitespace();
                break;
            case NORMAL:
                i = normal();
                break;
            }
            if (last !== i) {
                switch (input[last]) {
                case '\n':
                    col = 0;
                    ++line;
                    break;
                default:
                    ++col;
                    break;
                }
            }
        }
        total += i;
        input = input.slice(i);
        return tokens;
    }
    function end(chunk) {
        if (content.length) {
            token(content.join(''));
        }
        mode = EOF;
        token('(eof)');
        return tokens;
    }
    function normal() {
        content = content.length ? [] : content;
        if (last === '/' && c === '*') {
            start = total + i - 1;
            mode = BLOCK_COMMENT;
            last = c;
            return i + 1;
        }
        if (last === '/' && c === '/') {
            start = total + i - 1;
            mode = LINE_COMMENT;
            last = c;
            return i + 1;
        }
        if (c === '#') {
            mode = PREPROCESSOR;
            start = total + i;
            return i;
        }
        if (/\s/.test(c)) {
            mode = WHITESPACE;
            start = total + i;
            return i;
        }
        isnum = /\d/.test(c);
        isoperator = /[^\w_]/.test(c);
        start = total + i;
        mode = isnum ? INTEGER : isoperator ? OPERATOR : TOKEN;
        return i;
    }
    function whitespace() {
        if (/[^\s]/g.test(c)) {
            token(content.join(''));
            mode = NORMAL;
            return i;
        }
        content.push(c);
        last = c;
        return i + 1;
    }
    function preprocessor() {
        if ((c === '\r' || c === '\n') && last !== '\\') {
            token(content.join(''));
            mode = NORMAL;
            return i;
        }
        content.push(c);
        last = c;
        return i + 1;
    }
    function line_comment() {
        return preprocessor();
    }
    function block_comment() {
        if (c === '/' && last === '*') {
            content.push(c);
            token(content.join(''));
            mode = NORMAL;
            return i + 1;
        }
        content.push(c);
        last = c;
        return i + 1;
    }
    function operator() {
        if (last === '.' && /\d/.test(c)) {
            mode = FLOAT;
            return i;
        }
        if (last === '/' && c === '*') {
            mode = BLOCK_COMMENT;
            return i;
        }
        if (last === '/' && c === '/') {
            mode = LINE_COMMENT;
            return i;
        }
        if (c === '.' && content.length) {
            while (determine_operator(content));
            mode = FLOAT;
            return i;
        }
        if (c === ';' || c === ')' || c === '(') {
            if (content.length)
                while (determine_operator(content));
            token(c);
            mode = NORMAL;
            return i + 1;
        }
        var is_composite_operator = content.length === 2 && c !== '=';
        if (/[\w_\d\s]/.test(c) || is_composite_operator) {
            while (determine_operator(content));
            mode = NORMAL;
            return i;
        }
        content.push(c);
        last = c;
        return i + 1;
    }
    function determine_operator(buf) {
        var j = 0, idx, res;
        do {
            idx = operators.indexOf(buf.slice(0, buf.length + j).join(''));
            res = operators[idx];
            if (idx === -1) {
                if (j-- + buf.length > 0)
                    continue;
                res = buf.slice(0, 1).join('');
            }
            token(res);
            start += res.length;
            content = content.slice(res.length);
            return content.length;
        } while (1);
    }
    function hex() {
        if (/[^a-fA-F0-9]/.test(c)) {
            token(content.join(''));
            mode = NORMAL;
            return i;
        }
        content.push(c);
        last = c;
        return i + 1;
    }
    function integer() {
        if (c === '.') {
            content.push(c);
            mode = FLOAT;
            last = c;
            return i + 1;
        }
        if (/[eE]/.test(c)) {
            content.push(c);
            mode = FLOAT;
            last = c;
            return i + 1;
        }
        if (c === 'x' && content.length === 1 && content[0] === '0') {
            mode = HEX;
            content.push(c);
            last = c;
            return i + 1;
        }
        if (/[^\d]/.test(c)) {
            token(content.join(''));
            mode = NORMAL;
            return i;
        }
        content.push(c);
        last = c;
        return i + 1;
    }
    function decimal() {
        if (c === 'f') {
            content.push(c);
            last = c;
            i += 1;
        }
        if (/[eE]/.test(c)) {
            content.push(c);
            last = c;
            return i + 1;
        }
        if (c === '-' && /[eE]/.test(last)) {
            content.push(c);
            last = c;
            return i + 1;
        }
        if (/[^\d]/.test(c)) {
            token(content.join(''));
            mode = NORMAL;
            return i;
        }
        content.push(c);
        last = c;
        return i + 1;
    }
    function readtoken() {
        if (/[^\d\w_]/.test(c)) {
            var contentstr = content.join('');
            if (allLiterals.indexOf(contentstr) > -1) {
                mode = KEYWORD;
            } else if (allBuiltins.indexOf(contentstr) > -1) {
                mode = BUILTIN;
            } else {
                mode = IDENT;
            }
            token(content.join(''));
            mode = NORMAL;
            return i;
        }
        content.push(c);
        last = c;
        return i + 1;
    }
}
},{"./lib/builtins":57,"./lib/builtins-300es":56,"./lib/literals":59,"./lib/literals-300es":58,"./lib/operators":60}],56:[function(require,module,exports){
var v100 = require('./builtins');
v100 = v100.slice().filter(function (b) {
    return !/^(gl\_|texture)/.test(b);
});
module.exports = v100.concat([
    'gl_VertexID',
    'gl_InstanceID',
    'gl_Position',
    'gl_PointSize',
    'gl_FragCoord',
    'gl_FrontFacing',
    'gl_FragDepth',
    'gl_PointCoord',
    'gl_MaxVertexAttribs',
    'gl_MaxVertexUniformVectors',
    'gl_MaxVertexOutputVectors',
    'gl_MaxFragmentInputVectors',
    'gl_MaxVertexTextureImageUnits',
    'gl_MaxCombinedTextureImageUnits',
    'gl_MaxTextureImageUnits',
    'gl_MaxFragmentUniformVectors',
    'gl_MaxDrawBuffers',
    'gl_MinProgramTexelOffset',
    'gl_MaxProgramTexelOffset',
    'gl_DepthRangeParameters',
    'gl_DepthRange',
    'trunc',
    'round',
    'roundEven',
    'isnan',
    'isinf',
    'floatBitsToInt',
    'floatBitsToUint',
    'intBitsToFloat',
    'uintBitsToFloat',
    'packSnorm2x16',
    'unpackSnorm2x16',
    'packUnorm2x16',
    'unpackUnorm2x16',
    'packHalf2x16',
    'unpackHalf2x16',
    'outerProduct',
    'transpose',
    'determinant',
    'inverse',
    'texture',
    'textureSize',
    'textureProj',
    'textureLod',
    'textureOffset',
    'texelFetch',
    'texelFetchOffset',
    'textureProjOffset',
    'textureLodOffset',
    'textureProjLod',
    'textureProjLodOffset',
    'textureGrad',
    'textureGradOffset',
    'textureProjGrad',
    'textureProjGradOffset'
]);
},{"./builtins":57}],57:[function(require,module,exports){
module.exports = [
    'abs',
    'acos',
    'all',
    'any',
    'asin',
    'atan',
    'ceil',
    'clamp',
    'cos',
    'cross',
    'dFdx',
    'dFdy',
    'degrees',
    'distance',
    'dot',
    'equal',
    'exp',
    'exp2',
    'faceforward',
    'floor',
    'fract',
    'gl_BackColor',
    'gl_BackLightModelProduct',
    'gl_BackLightProduct',
    'gl_BackMaterial',
    'gl_BackSecondaryColor',
    'gl_ClipPlane',
    'gl_ClipVertex',
    'gl_Color',
    'gl_DepthRange',
    'gl_DepthRangeParameters',
    'gl_EyePlaneQ',
    'gl_EyePlaneR',
    'gl_EyePlaneS',
    'gl_EyePlaneT',
    'gl_Fog',
    'gl_FogCoord',
    'gl_FogFragCoord',
    'gl_FogParameters',
    'gl_FragColor',
    'gl_FragCoord',
    'gl_FragData',
    'gl_FragDepth',
    'gl_FragDepthEXT',
    'gl_FrontColor',
    'gl_FrontFacing',
    'gl_FrontLightModelProduct',
    'gl_FrontLightProduct',
    'gl_FrontMaterial',
    'gl_FrontSecondaryColor',
    'gl_LightModel',
    'gl_LightModelParameters',
    'gl_LightModelProducts',
    'gl_LightProducts',
    'gl_LightSource',
    'gl_LightSourceParameters',
    'gl_MaterialParameters',
    'gl_MaxClipPlanes',
    'gl_MaxCombinedTextureImageUnits',
    'gl_MaxDrawBuffers',
    'gl_MaxFragmentUniformComponents',
    'gl_MaxLights',
    'gl_MaxTextureCoords',
    'gl_MaxTextureImageUnits',
    'gl_MaxTextureUnits',
    'gl_MaxVaryingFloats',
    'gl_MaxVertexAttribs',
    'gl_MaxVertexTextureImageUnits',
    'gl_MaxVertexUniformComponents',
    'gl_ModelViewMatrix',
    'gl_ModelViewMatrixInverse',
    'gl_ModelViewMatrixInverseTranspose',
    'gl_ModelViewMatrixTranspose',
    'gl_ModelViewProjectionMatrix',
    'gl_ModelViewProjectionMatrixInverse',
    'gl_ModelViewProjectionMatrixInverseTranspose',
    'gl_ModelViewProjectionMatrixTranspose',
    'gl_MultiTexCoord0',
    'gl_MultiTexCoord1',
    'gl_MultiTexCoord2',
    'gl_MultiTexCoord3',
    'gl_MultiTexCoord4',
    'gl_MultiTexCoord5',
    'gl_MultiTexCoord6',
    'gl_MultiTexCoord7',
    'gl_Normal',
    'gl_NormalMatrix',
    'gl_NormalScale',
    'gl_ObjectPlaneQ',
    'gl_ObjectPlaneR',
    'gl_ObjectPlaneS',
    'gl_ObjectPlaneT',
    'gl_Point',
    'gl_PointCoord',
    'gl_PointParameters',
    'gl_PointSize',
    'gl_Position',
    'gl_ProjectionMatrix',
    'gl_ProjectionMatrixInverse',
    'gl_ProjectionMatrixInverseTranspose',
    'gl_ProjectionMatrixTranspose',
    'gl_SecondaryColor',
    'gl_TexCoord',
    'gl_TextureEnvColor',
    'gl_TextureMatrix',
    'gl_TextureMatrixInverse',
    'gl_TextureMatrixInverseTranspose',
    'gl_TextureMatrixTranspose',
    'gl_Vertex',
    'greaterThan',
    'greaterThanEqual',
    'inversesqrt',
    'length',
    'lessThan',
    'lessThanEqual',
    'log',
    'log2',
    'matrixCompMult',
    'max',
    'min',
    'mix',
    'mod',
    'normalize',
    'not',
    'notEqual',
    'pow',
    'radians',
    'reflect',
    'refract',
    'sign',
    'sin',
    'smoothstep',
    'sqrt',
    'step',
    'tan',
    'texture2D',
    'texture2DLod',
    'texture2DProj',
    'texture2DProjLod',
    'textureCube',
    'textureCubeLod',
    'texture2DLodEXT',
    'texture2DProjLodEXT',
    'textureCubeLodEXT',
    'texture2DGradEXT',
    'texture2DProjGradEXT',
    'textureCubeGradEXT'
];
},{}],58:[function(require,module,exports){
var v100 = require('./literals');
module.exports = v100.slice().concat([
    'layout',
    'centroid',
    'smooth',
    'case',
    'mat2x2',
    'mat2x3',
    'mat2x4',
    'mat3x2',
    'mat3x3',
    'mat3x4',
    'mat4x2',
    'mat4x3',
    'mat4x4',
    'uint',
    'uvec2',
    'uvec3',
    'uvec4',
    'samplerCubeShadow',
    'sampler2DArray',
    'sampler2DArrayShadow',
    'isampler2D',
    'isampler3D',
    'isamplerCube',
    'isampler2DArray',
    'usampler2D',
    'usampler3D',
    'usamplerCube',
    'usampler2DArray',
    'coherent',
    'restrict',
    'readonly',
    'writeonly',
    'resource',
    'atomic_uint',
    'noperspective',
    'patch',
    'sample',
    'subroutine',
    'common',
    'partition',
    'active',
    'filter',
    'image1D',
    'image2D',
    'image3D',
    'imageCube',
    'iimage1D',
    'iimage2D',
    'iimage3D',
    'iimageCube',
    'uimage1D',
    'uimage2D',
    'uimage3D',
    'uimageCube',
    'image1DArray',
    'image2DArray',
    'iimage1DArray',
    'iimage2DArray',
    'uimage1DArray',
    'uimage2DArray',
    'image1DShadow',
    'image2DShadow',
    'image1DArrayShadow',
    'image2DArrayShadow',
    'imageBuffer',
    'iimageBuffer',
    'uimageBuffer',
    'sampler1DArray',
    'sampler1DArrayShadow',
    'isampler1D',
    'isampler1DArray',
    'usampler1D',
    'usampler1DArray',
    'isampler2DRect',
    'usampler2DRect',
    'samplerBuffer',
    'isamplerBuffer',
    'usamplerBuffer',
    'sampler2DMS',
    'isampler2DMS',
    'usampler2DMS',
    'sampler2DMSArray',
    'isampler2DMSArray',
    'usampler2DMSArray'
]);
},{"./literals":59}],59:[function(require,module,exports){
module.exports = [
    'precision',
    'highp',
    'mediump',
    'lowp',
    'attribute',
    'const',
    'uniform',
    'varying',
    'break',
    'continue',
    'do',
    'for',
    'while',
    'if',
    'else',
    'in',
    'out',
    'inout',
    'float',
    'int',
    'void',
    'bool',
    'true',
    'false',
    'discard',
    'return',
    'mat2',
    'mat3',
    'mat4',
    'vec2',
    'vec3',
    'vec4',
    'ivec2',
    'ivec3',
    'ivec4',
    'bvec2',
    'bvec3',
    'bvec4',
    'sampler1D',
    'sampler2D',
    'sampler3D',
    'samplerCube',
    'sampler1DShadow',
    'sampler2DShadow',
    'struct',
    'asm',
    'class',
    'union',
    'enum',
    'typedef',
    'template',
    'this',
    'packed',
    'goto',
    'switch',
    'default',
    'inline',
    'noinline',
    'volatile',
    'public',
    'static',
    'extern',
    'external',
    'interface',
    'long',
    'short',
    'double',
    'half',
    'fixed',
    'unsigned',
    'input',
    'output',
    'hvec2',
    'hvec3',
    'hvec4',
    'dvec2',
    'dvec3',
    'dvec4',
    'fvec2',
    'fvec3',
    'fvec4',
    'sampler2DRect',
    'sampler3DRect',
    'sampler2DRectShadow',
    'sizeof',
    'cast',
    'namespace',
    'using'
];
},{}],60:[function(require,module,exports){
module.exports = [
    '<<=',
    '>>=',
    '++',
    '--',
    '<<',
    '>>',
    '<=',
    '>=',
    '==',
    '!=',
    '&&',
    '||',
    '+=',
    '-=',
    '*=',
    '/=',
    '%=',
    '&=',
    '^^',
    '^=',
    '|=',
    '(',
    ')',
    '[',
    ']',
    '.',
    '!',
    '~',
    '*',
    '/',
    '%',
    '+',
    '-',
    '<',
    '>',
    '&',
    '^',
    '|',
    '?',
    ':',
    '=',
    ',',
    ';',
    '{',
    '}'
];
},{}],61:[function(require,module,exports){
var tokenize = require('./index');
module.exports = tokenizeString;
function tokenizeString(str, opt) {
    var generator = tokenize(opt);
    var tokens = [];
    tokens = tokens.concat(generator(str));
    tokens = tokens.concat(generator(null));
    return tokens;
}
},{"./index":55}],62:[function(require,module,exports){
'use strict';
function iota(n) {
    var result = new Array(n);
    for (var i = 0; i < n; ++i) {
        result[i] = i;
    }
    return result;
}
module.exports = iota;
},{}],63:[function(require,module,exports){
module.exports = function (obj) {
    return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer);
};
function isBuffer(obj) {
    return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj);
}
function isSlowBuffer(obj) {
    return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0));
}
},{}],64:[function(require,module,exports){
module.exports = function (arr) {
    if (!arr)
        return false;
    if (!arr.dtype)
        return false;
    var re = new RegExp('function View[0-9]+d(:?' + arr.dtype + ')+');
    return re.test(String(arr.constructor));
};
},{}],65:[function(require,module,exports){
var iota = require('iota-array');
var isBuffer = require('is-buffer');
var hasTypedArrays = typeof Float64Array !== 'undefined';
function compare1st(a, b) {
    return a[0] - b[0];
}
function order() {
    var stride = this.stride;
    var terms = new Array(stride.length);
    var i;
    for (i = 0; i < terms.length; ++i) {
        terms[i] = [
            Math.abs(stride[i]),
            i
        ];
    }
    terms.sort(compare1st);
    var result = new Array(terms.length);
    for (i = 0; i < result.length; ++i) {
        result[i] = terms[i][1];
    }
    return result;
}
function compileConstructor(dtype, dimension) {
    var className = [
        'View',
        dimension,
        'd',
        dtype
    ].join('');
    if (dimension < 0) {
        className = 'View_Nil' + dtype;
    }
    var useGetters = dtype === 'generic';
    if (dimension === -1) {
        var code = 'function ' + className + '(a){this.data=a;};var proto=' + className + '.prototype;proto.dtype=\'' + dtype + '\';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new ' + className + '(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_' + className + '(a){return new ' + className + '(a);}';
        var procedure = new Function(code);
        return procedure();
    } else if (dimension === 0) {
        var code = 'function ' + className + '(a,d) {this.data = a;this.offset = d};var proto=' + className + '.prototype;proto.dtype=\'' + dtype + '\';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function ' + className + '_copy() {return new ' + className + '(this.data,this.offset)};proto.pick=function ' + className + '_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function ' + className + '_get(){return ' + (useGetters ? 'this.data.get(this.offset)' : 'this.data[this.offset]') + '};proto.set=function ' + className + '_set(v){return ' + (useGetters ? 'this.data.set(this.offset,v)' : 'this.data[this.offset]=v') + '};return function construct_' + className + '(a,b,c,d){return new ' + className + '(a,d)}';
        var procedure = new Function('TrivialArray', code);
        return procedure(CACHED_CONSTRUCTORS[dtype][0]);
    }
    var code = ['\'use strict\''];
    var indices = iota(dimension);
    var args = indices.map(function (i) {
        return 'i' + i;
    });
    var index_str = 'this.offset+' + indices.map(function (i) {
        return 'this.stride[' + i + ']*i' + i;
    }).join('+');
    var shapeArg = indices.map(function (i) {
        return 'b' + i;
    }).join(',');
    var strideArg = indices.map(function (i) {
        return 'c' + i;
    }).join(',');
    code.push('function ' + className + '(a,' + shapeArg + ',' + strideArg + ',d){this.data=a', 'this.shape=[' + shapeArg + ']', 'this.stride=[' + strideArg + ']', 'this.offset=d|0}', 'var proto=' + className + '.prototype', 'proto.dtype=\'' + dtype + '\'', 'proto.dimension=' + dimension);
    code.push('Object.defineProperty(proto,\'size\',{get:function ' + className + '_size(){return ' + indices.map(function (i) {
        return 'this.shape[' + i + ']';
    }).join('*'), '}})');
    if (dimension === 1) {
        code.push('proto.order=[0]');
    } else {
        code.push('Object.defineProperty(proto,\'order\',{get:');
        if (dimension < 4) {
            code.push('function ' + className + '_order(){');
            if (dimension === 2) {
                code.push('return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})');
            } else if (dimension === 3) {
                code.push('var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})');
            }
        } else {
            code.push('ORDER})');
        }
    }
    code.push('proto.set=function ' + className + '_set(' + args.join(',') + ',v){');
    if (useGetters) {
        code.push('return this.data.set(' + index_str + ',v)}');
    } else {
        code.push('return this.data[' + index_str + ']=v}');
    }
    code.push('proto.get=function ' + className + '_get(' + args.join(',') + '){');
    if (useGetters) {
        code.push('return this.data.get(' + index_str + ')}');
    } else {
        code.push('return this.data[' + index_str + ']}');
    }
    code.push('proto.index=function ' + className + '_index(', args.join(), '){return ' + index_str + '}');
    code.push('proto.hi=function ' + className + '_hi(' + args.join(',') + '){return new ' + className + '(this.data,' + indices.map(function (i) {
        return [
            '(typeof i',
            i,
            '!==\'number\'||i',
            i,
            '<0)?this.shape[',
            i,
            ']:i',
            i,
            '|0'
        ].join('');
    }).join(',') + ',' + indices.map(function (i) {
        return 'this.stride[' + i + ']';
    }).join(',') + ',this.offset)}');
    var a_vars = indices.map(function (i) {
        return 'a' + i + '=this.shape[' + i + ']';
    });
    var c_vars = indices.map(function (i) {
        return 'c' + i + '=this.stride[' + i + ']';
    });
    code.push('proto.lo=function ' + className + '_lo(' + args.join(',') + '){var b=this.offset,d=0,' + a_vars.join(',') + ',' + c_vars.join(','));
    for (var i = 0; i < dimension; ++i) {
        code.push('if(typeof i' + i + '===\'number\'&&i' + i + '>=0){d=i' + i + '|0;b+=c' + i + '*d;a' + i + '-=d}');
    }
    code.push('return new ' + className + '(this.data,' + indices.map(function (i) {
        return 'a' + i;
    }).join(',') + ',' + indices.map(function (i) {
        return 'c' + i;
    }).join(',') + ',b)}');
    code.push('proto.step=function ' + className + '_step(' + args.join(',') + '){var ' + indices.map(function (i) {
        return 'a' + i + '=this.shape[' + i + ']';
    }).join(',') + ',' + indices.map(function (i) {
        return 'b' + i + '=this.stride[' + i + ']';
    }).join(',') + ',c=this.offset,d=0,ceil=Math.ceil');
    for (var i = 0; i < dimension; ++i) {
        code.push('if(typeof i' + i + '===\'number\'){d=i' + i + '|0;if(d<0){c+=b' + i + '*(a' + i + '-1);a' + i + '=ceil(-a' + i + '/d)}else{a' + i + '=ceil(a' + i + '/d)}b' + i + '*=d}');
    }
    code.push('return new ' + className + '(this.data,' + indices.map(function (i) {
        return 'a' + i;
    }).join(',') + ',' + indices.map(function (i) {
        return 'b' + i;
    }).join(',') + ',c)}');
    var tShape = new Array(dimension);
    var tStride = new Array(dimension);
    for (var i = 0; i < dimension; ++i) {
        tShape[i] = 'a[i' + i + ']';
        tStride[i] = 'b[i' + i + ']';
    }
    code.push('proto.transpose=function ' + className + '_transpose(' + args + '){' + args.map(function (n, idx) {
        return n + '=(' + n + '===undefined?' + idx + ':' + n + '|0)';
    }).join(';'), 'var a=this.shape,b=this.stride;return new ' + className + '(this.data,' + tShape.join(',') + ',' + tStride.join(',') + ',this.offset)}');
    code.push('proto.pick=function ' + className + '_pick(' + args + '){var a=[],b=[],c=this.offset');
    for (var i = 0; i < dimension; ++i) {
        code.push('if(typeof i' + i + '===\'number\'&&i' + i + '>=0){c=(c+this.stride[' + i + ']*i' + i + ')|0}else{a.push(this.shape[' + i + ']);b.push(this.stride[' + i + '])}');
    }
    code.push('var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}');
    code.push('return function construct_' + className + '(data,shape,stride,offset){return new ' + className + '(data,' + indices.map(function (i) {
        return 'shape[' + i + ']';
    }).join(',') + ',' + indices.map(function (i) {
        return 'stride[' + i + ']';
    }).join(',') + ',offset)}');
    var procedure = new Function('CTOR_LIST', 'ORDER', code.join('\n'));
    return procedure(CACHED_CONSTRUCTORS[dtype], order);
}
function arrayDType(data) {
    if (isBuffer(data)) {
        return 'buffer';
    }
    if (hasTypedArrays) {
        switch (Object.prototype.toString.call(data)) {
        case '[object Float64Array]':
            return 'float64';
        case '[object Float32Array]':
            return 'float32';
        case '[object Int8Array]':
            return 'int8';
        case '[object Int16Array]':
            return 'int16';
        case '[object Int32Array]':
            return 'int32';
        case '[object Uint8Array]':
            return 'uint8';
        case '[object Uint16Array]':
            return 'uint16';
        case '[object Uint32Array]':
            return 'uint32';
        case '[object Uint8ClampedArray]':
            return 'uint8_clamped';
        }
    }
    if (Array.isArray(data)) {
        return 'array';
    }
    return 'generic';
}
var CACHED_CONSTRUCTORS = {
    'float32': [],
    'float64': [],
    'int8': [],
    'int16': [],
    'int32': [],
    'uint8': [],
    'uint16': [],
    'uint32': [],
    'array': [],
    'uint8_clamped': [],
    'buffer': [],
    'generic': []
};
(function () {
    for (var id in CACHED_CONSTRUCTORS) {
        CACHED_CONSTRUCTORS[id].push(compileConstructor(id, -1));
    }
});
function wrappedNDArrayCtor(data, shape, stride, offset) {
    if (data === undefined) {
        var ctor = CACHED_CONSTRUCTORS.array[0];
        return ctor([]);
    } else if (typeof data === 'number') {
        data = [data];
    }
    if (shape === undefined) {
        shape = [data.length];
    }
    var d = shape.length;
    if (stride === undefined) {
        stride = new Array(d);
        for (var i = d - 1, sz = 1; i >= 0; --i) {
            stride[i] = sz;
            sz *= shape[i];
        }
    }
    if (offset === undefined) {
        offset = 0;
        for (var i = 0; i < d; ++i) {
            if (stride[i] < 0) {
                offset -= (shape[i] - 1) * stride[i];
            }
        }
    }
    var dtype = arrayDType(data);
    var ctor_list = CACHED_CONSTRUCTORS[dtype];
    while (ctor_list.length <= d + 1) {
        ctor_list.push(compileConstructor(dtype, ctor_list.length - 1));
    }
    var ctor = ctor_list[d + 1];
    return ctor(data, shape, stride, offset);
}
module.exports = wrappedNDArrayCtor;
},{"iota-array":62,"is-buffer":63}],66:[function(require,module,exports){
'use strict';
module.exports = parseGpgpuMap;
var uniqAttr = require('../lib/uniq-attr');
var parseFunction = require('../lib/parse-function');
function parseGpgpuMap(opts) {
    if (!opts)
        fail('expected options');
    var funcName = opts.functionName === undefined ? 'compute' : opts.functionName;
    var hashLen = opts.hashLength === undefined ? 14 : opts.hashLength;
    var parsedBody = parseFunction(opts.body, funcName);
    var parsedArgs = parseArgs(opts.args);
    var uniforms = computeUniforms(parsedArgs, parsedBody);
    var defs = computeDefs(uniforms, hashLen);
    return {
        frag: [
            'precision mediump float;',
            defs.varying.join('\n'),
            defs.uniforms.join('\n'),
            opts.body,
            'void main () {',
            defs.sampleLookups.join('\n'),
            '  gl_FragColor = ' + funcName + '(' + defs.computeArgs.join(', ') + ');',
            '}'
        ].join('\n'),
        vert: [
            'precision mediump float;',
            'attribute vec2 ' + defs.vars.xy + ';',
            'varying vec2 ' + defs.vars.uv + ';',
            'void main () {',
            '  ' + defs.vars.uv + ' = 0.5 * (' + defs.vars.xy + ' + 1.0);',
            '  gl_Position = vec4(' + defs.vars.xy + ', 0, 1);',
            '}'
        ].join('\n'),
        attrName: defs.vars.xy,
        destProp: defs.vars.dest,
        invokeArgs: defs.invokeArgs,
        duProp: defs.vars.du,
        dvProp: defs.vars.dv,
        permute: opts.permute
    };
}
function fail(msg) {
    throw new Error('regl-gpgpu-parser:map: ' + msg);
}
function parseArgs(args) {
    var result = [];
    var parsed, arg;
    var idx = 0;
    for (var i = 0; i < args.length; i++) {
        arg = args[i];
        parsed = {
            isScalar: arg === 'scalar',
            isRef: typeof arg.array === 'number' && arg.array !== i,
            hasOffset: Array.isArray(arg.offset)
        };
        parsed.isArray = arg === 'array' || !parsed.isScalar && !parsed.isRef && typeof arg === 'object';
        if (parsed.isRef) {
            parsed.ref = arg.array;
        }
        if (parsed.hasOffset) {
            parsed.offset = arg.offset;
        }
        if (parsed.isScalar || parsed.isArray && !parsed.isRef) {
            parsed.inputIdx = idx++;
        }
        result.push(parsed);
    }
    return result;
}
function computeUniforms(parsedArgs, parsedBody) {
    if (parsedArgs.length !== parsedBody.length) {
        fail('number of defined args (' + parsedArgs.length + ') does not match map function arity (' + parsedBody.length + ')');
    }
    var i, arg, fnArg;
    var uniforms = [];
    for (i = 0; i < parsedArgs.length; i++) {
        arg = parsedArgs[i];
        fnArg = parsedBody[i];
        if (arg.isRef)
            continue;
        uniforms[i] = {
            argName: fnArg.name,
            isRef: false,
            baseName: fnArg.name + (arg.isArray ? 'Texture' : ''),
            isArray: arg.isArray,
            isScalar: !arg.isArray
        };
        if (arg.isScalar) {
            uniforms[i].argType = fnArg.type;
        }
    }
    for (i = 0; i < parsedArgs.length; i++) {
        arg = parsedArgs[i];
        fnArg = parsedBody[i];
        if (!arg.isRef)
            continue;
        var ref = uniforms[arg.ref];
        if (ref.isRef) {
            fail('argument ' + i + ' references argument ' + ref.ref + '. Recursive references are not supported.');
        }
        uniforms[i] = {
            argName: fnArg.name,
            baseName: ref.baseName,
            isArray: ref.isArray,
            isRef: true,
            ref: arg.ref,
            hasOffset: arg.hasOffset,
            offset: arg.offset
        };
    }
    return uniforms;
}
function computeDefs(parsedUniforms, hashLength) {
    var getAttr = uniqAttr(hashLength);
    var vars = {
        xy: getAttr('xy'),
        uv: getAttr('uv'),
        du: getAttr('du'),
        dv: getAttr('dv'),
        dest: getAttr('dest')
    };
    var sampleLookups = [];
    var uniforms = [];
    var varying = [];
    var computeArgs = [];
    var invokeArgs = [];
    varying.push('varying vec2 ' + vars.uv + ';');
    uniforms.push('uniform float ' + vars.du + ';');
    uniforms.push('uniform float ' + vars.dv + ';');
    var uniformName;
    var uniformNames = {};
    for (var i = 0; i < parsedUniforms.length; i++) {
        var uniform = parsedUniforms[i];
        if (uniform.isRef) {
            if (uniformNames[uniform.baseName]) {
                uniformName = uniformNames[uniform.baseName];
            } else {
                uniformNames[uniform.baseName] = uniformName = getAttr(uniform.baseName);
            }
        } else {
            if (uniformNames[uniform.baseName]) {
                uniformName = uniformNames[uniform.baseName];
            } else {
                uniformNames[uniform.baseName] = uniformName = getAttr(uniform.baseName);
            }
        }
        if (uniform.isArray) {
            if (!uniform.isRef) {
                uniforms.push('uniform sampler2D ' + uniformName + ';');
            }
            var offset = [vars.uv];
            if (uniform.hasOffset) {
                var offsetStr = ['vec2('];
                if (uniform.offset[0] !== 0) {
                    offsetStr.push(uniform.offset[0].toFixed(8) + ' * ' + vars.du);
                } else {
                    offsetStr.push('0.0');
                }
                offsetStr.push(', ');
                if (uniform.offset[1] !== 0) {
                    offsetStr.push(uniform.offset[1].toFixed(8) + ' * ' + vars.dv);
                } else {
                    offsetStr.push('0.0');
                }
                offsetStr.push(')');
                offset.push(offsetStr.join(''));
            }
            sampleLookups.push('  vec4 ' + uniform.argName + ' = texture2D(' + uniformName + ', ' + offset.join(' + ') + ');');
            computeArgs.push(uniform.argName);
        }
        if (uniform.isScalar || uniform.isArray && !uniform.isRef) {
            invokeArgs.push(uniformName);
        }
        if (uniform.isScalar) {
            uniforms.push('uniform ' + uniform.argType + ' ' + uniformName + ';');
            computeArgs.push(uniformName);
        }
    }
    return {
        uniforms: uniforms,
        sampleLookups: sampleLookups,
        varying: varying,
        computeArgs: computeArgs,
        invokeArgs: invokeArgs,
        vars: vars
    };
}
},{"../lib/parse-function":49,"../lib/uniq-attr":50}]},{},[1]);
</script>
</html>
